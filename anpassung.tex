\addtocontents{toc}{\protect\pagebreak}
%revised
\label{Anpassungen}%
\index{Template-S@Templates!Anpassungen}%
\index{Frontend!Anpassung}%
\chapter{Anpassungen}

Früher oder später wird jeder Benutzer von Serendipity zu dem Punkt kommen, an
dem individuelle Anpassungen des Blogs gewünscht sind. 
Übliche Anpassungen reichen dabei von der Wahl der Grundfarbe und des
Grundlayouts, eigenen Kopfgrafiken bis hin zu eigenständigen Unterseiten und
Funktionalitäten. 

Glücklicherweise bietet Serendipity für solche Anpassungen oft mehrere
Möglichkeiten an, und Sie können über unterschiedliche technische Wege Einfluss
nehmen. In den folgenden Abschnitten werden die einzelnen Möglichkeiten dargestellt, die
meist aufeinander aufbauen und zum Ende hin komplexer werden.

\section{Eingebaute Anpassungsmöglichkeiten}

In den vorhergehenden Kapiteln haben Sie bereits gerlernt, wie Sie das Aussehen
Ihres Blogs durch die Wahl eines Templates verändern können.

\index{Template-Optionen}%
Seit Serendipity Version 1.1 besitzen Templates die Möglichkeit, Template-abhängige
Optionen festzulegen. Diese Optionen können Sie als Administrator bzw. Redakteur
des Blogs mittels der Template-Verwaltung (siehe Kapitel \ref{Styles verwalten} 
ab Seite \pageref{Styles verwalten}) beliebig anpassen. 

\index{Bulletproof}%
\index{Template-S@Templates!Bulletproof}%
\label{bpdesc}%
Ab Serendipity 1.2 wird standardmäßig ein neues Template
namens \emph{Bulletproof} mitgeliefert. Dieses Template unterscheidet sich in
seiner Zielsetzung wesentlich von normalen Serendipity-Templates. Üblicherweise
ist ein Template auf ein spezielles Design ausgelegt. Dabei legt der Designer des
Templates für Sie fest, wie Artikel dargestellt werden, welche Farben das
Template benutzt und vor allem, wie das Grundlayout ausgelegt ist. Wenn Sie
etwas an den Farben ändern möchten, müssen Sie meist selbst Hand an der
Template-Programmierung anlegen, was ohne Detailkenntnisse vielen Benutzern
schwerfällt. 

An genau diese Benutzer richtet sich \emph{Bulletproof}. Es stellt ein
Template-Grundgerüst zur Verfügung, das sich an bestmöglicher
Browser"=Kompatibilität orientiert. Dieses Grundgerüst können Sie mittels der
Template-Optionen nun vielfältig gestalten: Sie können Farbschemas auswählen,
bestimmen, wie viele Spalten das Layout besitzt, welche Navigationsleisten Sie
einbinden wollen und auch wie die Blog-Artikel selbst gestaltet sind.

\index{Framework}%
\index{Kopfgrafiken}%
\index{Headerbild}%
Über ein derartiges Baukasten-Prinzip (\emph{Framework}) können Sie als
Blog-Eigentümer z.\,B.\ leicht andere Kopfgrafiken einsetzen und sich vor allem
darauf verlassen, dass die Basis des Frameworks browser-übergreifend annähernd gleich aussieht.

In zukünftigen Serendipity-Versionen wird dieses Template das Standarddesign
ersetzen und dem Benutzer direkt von Anfang an diesen gestalterischen Freiraum
genehmigen. Auch das Bulletproof-Template können Sie später über eigene
Programmierung/Anpassungen verändern, wie Abschnitt \ref{templateoptionen} ab
Seite \pageref{templateoptionen} zeigen wird.

Abgesehen von den Template-Optionen bietet auch die
Serendipity"=Grundkonfiguration (siehe Seite \pageref{Konfiguration})
einige Möglichkeiten zur Anpassung der Darstellung Ihres Blogs (beispielsweise
dem Blog-Titel und ob Popup"=Fenster verwendet werden sollen).

Über die verfügbaren Plugins zu Serendipity können Sie bereits zahlreiche
Funktionalitäten nachrüsten. Universale Plugins, wie die Einbindung 
beliebiger HTML-Texte, JavaScript oder PHP-Dateien (ab Seite \pageref{Plugins}),
ermöglichen es Ihnen, leicht Änderungen vorzunehmen, ohne Dateien bearbeiten zu müssen.

\label{template-css}%
\index{CSS}%
\index{Style Sheets}%
\section{Cascading Style Sheets}

Alle Anpassungen des Layouts nimmt man heutzutage mittels der
Formatierungssprache \emph{CSS} (\emph{Cascading Stylesheets}) vor.

Ein Stylesheet ist eine Datei, in der eine oder mehrere Anweisungen regeln
können, wie ein HTML-Element dargestellt werden soll. Ein Stylesheet ist
sozusagen eine Ergänzung der HTML-Datei: Die HTML-Datei legt die Struktur eines
Dokumentes fest, und das Stylesheet regelt die Darstellung der Struktur.

Eine derartige Trennung von Inhalt und Aussehen hat zahlreiche Vorteile. Zum
einen entschlackt dies die HTML-Datei, da in dieser nur noch der eigentliche
Inhalt gespeichert wird. Dank dieser Trennung kann dasselbe Dokument abhängig
von der Umgebung, in der es dargestellt wird, unterschiedlich formatiert sein.
Klassisches Beispiel ist die Darstellung des Dokumentes auf dem Bildschirm und
die Ausgabe auf dem Drucker. In der Druckversion kann z.\,B.\ ein Kommentarformular
versteckt werden, da man es ja ausgedruckt sowieso nicht ausfüllen kann. Auch
kann die Textbreite beim Ausdruck besser auf das Papierformat abgestimmt werden.

Gerade für sehbehinderte Menschen hat diese Trennung des Inhalts und der
Präsentation enorme Vorteile: Sie können selbständig die Schriftgröße
beeinflussen oder sich Texte von einem Lesegerät vorlesen lassen, ohne dass
lästige Navigationselemente den Vorlesevorgang unterbrechen.

Vor allem machen es Stylesheets aber sehr einfach, schnell grafische Änderungen
auszuprobieren. Um die Schriftart der ganzen Seite zu verändern, reicht es,
eine einzige Anweisung einzufügen. In frühen Zeiten des Internets mussten dafür
zahlreiche \cmd{<font>}-Tags einer Datei einzeln überarbeitet werden. Somit sind
Stylesheets also gerade für Designer ein wahrer Segen.

\index{HTML}%
Eine HTML-Datei besteht aus einer Menge von beliebig verschachtelten Elementen,
den sogenannten Tags. Jedes Tag kann eine Reihe von Attributen und einen Inhalt
besitzen. Ein Textabsatz wird beispielsweise so beschrieben:

\begin{ospcode}
<p>Dies ist ein Absatz.</p>
<p>Der zweite Absatz folgt <em>meistens</em> auf den ersten Absatz.</p>
<p><img src="bild.jpg" /></p>
\end{ospcode}


Das Tag für einen Absatz lautet \cmd{p}, und der Absatztext selbst muss von
einem öffnenden \cmd{<p>}-Tag und einem schließenden \cmd{</p>}-Tag umgeben sein.
Im zweiten Absatz wurde ein weiteres Tag eingesetzt, das eine Zeichenkette
\emph{hervorhebt}. Auch hier ist jeweils ein öffnendes und ein schließendes Tag
vonnöten.

Es gibt jedoch auch HTML-Tags, die keinen öffnenden/schließenden Teil benötigen,
sondern alleine stehen können. Ein Beispiel für ein solches Tag ist die
Einbindung eines Bildes mittels \cmd{img}. Die XHTML-Syntax erfordert für solche
alleinstehenden Tags, dass diese mit einem \cmd{/>} enden. Anhand des 
\cmd{<img/>}-Tags lässt sich auch der Einsatz von HTML-Attributen erläutern. Das Attribut
\cmd{src} enthält den Namen der Bilddatei, die angezeigt werden soll.
Jedes Attribut muss immer durch ein Gleichheitszeichen einen Wert zugewiesen
bekommen, der in einfachen oder doppelten Anführungszeichen zu stehen hat.

Nach diesen Grundprinzipien richten sich alle HTML-Dokumente, wobei es jedoch
wesentlich mehr HTML-Tags als die hier aufgeführten gibt. Mittels einer
Stylesheet-Datei kann man nun das Aussehen der Tags beeinflussen:

\begin{ospcode}
p \{
  font-size: 1.2em;
\}

p em \{
   font-weight: bold;
\}
\end{ospcode}

Diese Syntax unterscheidet sich augenscheinlich von der Art und Weise, wie HTML
programmiert wird. Dennoch haben beide Dateien einen gemeinsamen Nenner,
nämlich die Namen der HTML-Tags sowie deren Verschachtelung.

Obiges Stylesheet würde dafür sorgen, dass unser HTML-Beispiel so ausgegeben
wird, dass die Schriftgröße beider Absätze auf 120\% der vom Benutzer
eingestellten Schriftgröße gestellt wird. Das Wort \emph{meistens} innerhalb
unseres HTML-Beispiels wird dabei fett ausgezeichnet.

Grundsätzlich enthält ein Stylesheet also eine beliebige Anzahl von
Formatierungsanweisungen. Jede Anweisung besteht aus einem Block: Erst folgt die
Angabe, auf welche Elemente eine Formatierung angewandt werden soll
(beispielsweise das \cmd{p}-Tag). Es folgt eine geschweifte Klammer (\cmd{\{})
und danach eine Auflistung von Formatierungsanweisungen. Der Übersichtlichkeit halber
sollte man jede Formatierungsanweisung in eine eigene Zeile schreiben. Als
Erstes kommt der Name der Formatierungsanweisung (\cmd{font-size}), danach ein
Doppelpunkt und danach ein Wert (\cmd{1.2em}). Das Ende der Zeile wird durch
ein Semikolon (\cmd{;}) markiert. Nach einer beliebigen Anzahl von
Formatierungsanweisungen wird der Block durch eine weitere geschweifte Klammer
(\cmd{\}}) wieder geschlossen, und es kann ein weiterer Block folgen.
%FM@Satz: geschweifte Klammern (2x) korrekt?

\index{Cascading}%
Der Begriff \cmd{Cascading} bezeichnet eine wichtige Fähigkeit der Stylesheets: 
Die jeweiligen Formatierungsausdrücke
können \emph{vererbt} werden. Dazu muss man wissen, dass die
Struktur einer HTML-Seite einer Baumstruktur ähnelt: Die Verschachtelung
einzelner Elemente könnte man grafisch ähnlich darstellen, wie ein Dateimanager
die Verzeichnisstruktur anzeigt.

Es kann also sein, dass ein Absatz im HTML-Dokument sowohl auf oberster Ebene
vorkommt als auch innerhalb eines Unterabschnitts oder eines bestimmten
Containers: 

\osppagebreak

\begin{ospcode}
<div id="Seite">
  <div class="abschnitt">
    <p>Mein erster Abschnitt.</p>
  </div>
  
  <div class="abschnitt">
    <p>Mein zweiter Abschnitt.</p>
  </div>
  
  <div class="fusszeile">
    <p>Seitenende.</p>
  </div>
</div>
\end{ospcode}

Anhand dieser Struktur sieht man, dass die Absätze (\cmd{p}-Tags) zwar in
derselben Tiefe (immer als dritte Ebene) verwendet werden, aber jeweils einen
unterschiedlichen Kontext besitzen: Einmal ist der Absatz Teil eines Abschnitts,
aber am Ende ist ein Absatz innerhalb einer Fußzeile gesetzt.

Erst die grafische Umsetzung der HTML-Struktur über ein Stylesheet kann diesen
strukturellen Unterschied sichtbar machen. Denn jeder Formatierungsblock, der
das zu formatierende Element vor der geschweiften Klammer angibt, kann die
hierarchische Einordnung des HTML-Elements wiedergeben:

\begin{ospcode}
#Seite \{
  background-color: white;
\}

.abschnitt \{
  border: 1px solid black;
\}

p \{
  font-size: 0.8em;
\}

.fusszeile p \{
  font-weight: bold;
\}
\end{ospcode}



Wenn man sich jeden Block dieser Formatierungen einzeln ansieht, kann man
die gewünschte Formatierung ablesen:

Der erste Block sorgt dafür, dass der \cmd{<div
id="{}Seite"{}>\ldots</div>}"=Container der HTML-Struktur mit einer weißen
Hintergrundfarbe gestaltet werden soll. Jeder Stylesheet-Formatierungsblock kann
über das Symbol \cmd{\#} eine Formatierung direkt auf einen beliebigen Container
anwenden, der in der HTML-Datei über das Attribut \cmd{id="{}\ldots{}"{}} benannt
wurde, in unserem Fall also \cmd{Seite}. Der zweite Block zeigt eine
Formatierung, die auf einen Container angewendet werden soll, der über das
Attribut \cmd{class="{}abschnitt"{}} benannt wurde.

Eine CSS-Datei kann eine Formatierung auf ein HTML-Element also auf dreierlei
Weise festlegen:


\begin{osplist}
\item \cmd{p \{ \ldots \}} formatiert ein HTML-Tag anhand des Tag-Namens.
\item \cmd{.klasse \{\ldots \}} formatiert ein HTML-Tag anhand des
\cmd{class}-Attributes (\cmd{<div class="{}klasse"{}>}).
\item \cmd{\#bezeichner \{ \ldots \}} formatiert ein HTML-Tag anhand des
\cmd{id}"=Attributes (\cmd{<div id="{}klasse"{}>}).
\end{osplist}

Der Unterschied zwischen \cmd{id} und \cmd{class} liegt lediglich darin, dass
eine ID nur einmalig vergeben werden darf, eine Klasse aber beliebig häufig
Verwendung finden darf.

Das \cmd{id}- und \cmd{class}-Attribut lassen sich innerhalb der HTML-Struktur 
nicht nur einem \cmd{<div>}-Container zuweisen, sondern auch direkt einem
\cmd{<p>} oder auch \cmd{<img>}-Element. Man kann es also immer dann verwenden,
wenn man ein beliebiges HTML-Element eindeutig auszeichnen möchte.

Diese eindeutige Auszeichnung ist innerhalb des Stylesheets wichtig, damit man
Formatierungen gezielt auf ein Element zuweisen kann. Dabei ist es nicht
unbedingt erforderlich, dass man jedes zu formatierende Element mit einer
speziellen Klasse benennt, da die Stylesheets wie angesprochen die
\emph{Vererbung} bzw. \emph{Verschachtelung} einer Struktur berücksichtigen
können. Dies verdeutlicht das obige Beispiel im vierten Formatierungsblock:

\begin{ospcode}
.fusszeile p \{
  font-weight: bold;
\}
\end{ospcode}

Diese Formatierung sagt dem Browser: "`Mache die Schriftart eines Absatzes
fett, wenn der Absatz innerhalb einer Fußzeile eingesetzt wird"'.

Jeder Formatierungsblock kann einzelne HTML-Elemente (entweder über deren
Tag-Namen, die Klasse oder die ID) mit einem Leerzeichen voneinander getrennt
angeben und entspricht dabei der Verschachtelung, wie sie später im Dokument
vorzufinden ist. 

Wenn also folgende HTML-Struktur gegeben ist:

\begin{ospcode}
<div class="seite">
  <div class="abschnitt">
     <p class="absatz">
       Mein <em>Einsatz</em>.
     </p>
  </div>
</div>
\end{ospcode}

dann könnte man gezielt das Wort \emph{Einsatz} über folgende CSS-Anweisung
formatieren: 

\begin{ospcode}
.seite .abschnitt .absatz em \{
  font-weight: bold;
\}
\end{ospcode}
 
Anhand dieses Beispiels kann man auch gut verdeutlichen, dass eine
derart komplexe Formatierungskette gar nicht unbedingt notwendig wäre. 
Denn die CSS-Anweisung: 

\begin{ospcode}
em \{
  font-weight: bold;
\}
\end{ospcode}

würde das obige Beispiel exakt gleich formatieren. Achten Sie also später beim
Einsatz von CSS immer darauf, es nicht unnötig kompliziert zu machen. Überlegen
Sie sich, anhand welcher Struktur Sie das zu formatierende Element bereits
gezielt \emph{herauspicken} können.

Mittels CSS-Anweisungen können Sie Elemente auch beliebig oft formatieren, da
der Browser ein Element anhand aller zutreffenden Formatierungsanweisungen
darstellt. Gegeben sei folgender HTML-Code:

\begin{ospcode}
<div class="Seite">
  <p>Mein Absatz.</p>
</div>
\end{ospcode}

sowie folgende CSS-Anweisungen:

\begin{ospcode}
.Seite \{
  color: red;
\}

p \{
  font-size: 1.2em;
\}
\end{ospcode}

Obwohl Sie die Farbe Rot nur dem Container \cmd{.Seite} zugewiesen haben,
wird diese Farbe auch auf den Absatz angewendet, da dieser Teil des
Seiten-Containers ist. Sie müssen also die Farbe nicht extra der
Formatierungsanweisung für den Absatz zuweisen.

Abgesehen von diesen grundsätzlichen Strukturen bietet CSS noch einige spezielle
Möglichkeiten an, die den Rahmen dieses Buches deutlich sprengen würden.\footnote{Wenn
Sie diese Thematik interessiert, sollten Sie sich mit Büchern wie
\emph{Webdesign mit
CSS} von Vladimir Simovic und Jan Heinicke
oder Online-Werken wie SelfHTML (\cmd{http://de.selfhtml.org/css/}) vertraut
machen.}


\subsection{CSS-Anweisungen in Serendipity-Templates}

CSS-Formatierungen sind auch bei Serendipity ein integraler Bestandteil von
Templates. In der Datei \cmd{style.css} eines jeden Template"=Verzeichnisses
liegen alle notwendigen CSS-Anweisungen, die auf die HTML-Ausgabe des Blogs
angewendet werden. Diese CSS-Datei können Sie natürlich bearbeiten, um
individuelle Formatierungen zu erreichen.

Die meisten Serendipity-Templates sind von einem Standard-Template abgeleitet,
so dass die meisten Klassennamen der HTML-Elemente trotz unterschiedlicher
Templates gleich benannt sind. Die meisten dieser Klassennamen sind über das
Präfix \cmd{serendipity\_} eindeutig benannt, so dass Sie über CSS-Anweisungen
gezielt die Ausgabe eines Templates oder Plugins beeinflussen können.

Jedes Plugin der Seitenleiste ist üblicherweise in einen selbständig benannten
HTML-Container eingebunden, damit Sie jedes Seitenleisten-Plugin individuell
formatieren können:

\begin{ospcode}
<div id="serendipityLeftSideBar">
  <div class="serendipitySideBarItem  
   container\_serendipity\_categories\_plugin"> 
    <h3 class="serendipitySideBarTitel 
     serendipity\_categories\_plugin">Titel</h3>
    <div class="serendipitySideBarContent">\ldots</div>
  </div>
</div>
\end{ospcode}

\index{Seitenleisten-Plugins!Layout anpassen}%
Wenn Sie beispielsweise alle Links der Kategorien-Ausgabe in der Seitenleiste
grün einfärben wollen, könnten Sie dies mit der folgenden CSS-Regel erreichen:

\begin{ospcode}
.container\_serendipity\_categories\_plugin a \{
  color: green;
\}
\end{ospcode}

Eine Auflistung aller CSS-Klassen ist an dieser Stelle leider nicht möglich, da
diese Klassen abhängig vom eingesetzten Template und dessen HTML-Ausgabe sind.
Wenn Sie also eine Anpassung vornehmen wollen, müssen Sie die entsprechenden
eingesetzten HTML-Klassen im Quelltext des jeweiligen Templates nachschlagen.

\index{Firebug}%
Dabei hilft z.\,B.\ die Extension
\cmd{firebug}\footnote{\cmd{http://www.getfirebug.com}} für den Firefox-Browser
enorm, da Sie per Cursor die HTML-Elemente einer Seite auswählen und
direkt alle CSS-Anweisungen zu diesem Element sehen können.

Dennoch hier eine kleine Übersicht über CSS-Klassen, die in vielen Templates
Verwendung finden:

\index{CSS-Variablen}%
\begin{ospdescription}

\index{CSS-Variablen!.mainpane@\#mainpane}%
\index{CSS-Variablen!.content@\#content}%
\ospitem{\cmd{\#mainpane, \#content}}
Enthält in den meisten Templates das Grundgerüst der Seite.

\index{CSS-Variablen!.serendipity\_banner@\#serendipity\_banner}%
\ospitem{\cmd{\#serendipity\_banner}}
Enthält den Seitenkopfbereich, meist mit einem Hintergrundbild.

\index{CSS-Variablen!.homelink1}%
\index{CSS-Variablen!.homelink2}%
\ospitem{\cmd{.homelink1, .homelink2}}
Enthält innerhalb des Seitenkopfbereichs die Links zu der aktuellen Blog-Seite
bzw. Blog-Übersicht.

\index{CSS-Variablen!.serendipity\_LeftSideBar@\#serendipityLeftSideBar}%
\index{CSS-Variablen!.serendipity\_RightSideBar@\#serendipityRightSideBar}%
\ospitem{\cmd{\#serendipityLeftSideBar, \#serendipityRightSideBar}}
Bezeichnet den Container, der jeweils die Elemente der Seitenleiste(n) enthält.

\label{sidebar-css}%
\index{CSS-Variablen!.serendipity\_SideBarItem@.serendipitySideBarItem}%
\ospitem{\cmd{.serendipitySideBarItem}}
Für jedes Element der Seitenleiste kapselt die Klasse
den jeweiligen Inhalt des Plugins mitsamt dem Titel.

\index{CSS-Variablen!.serendipity\_SideBarTitle@.serendipitySideBarTitle}%
\ospitem{\cmd{.serendipitySideBarTitle}}
Enthält den Titel des jeweiligen Seitenleisten-Plugins.

\index{CSS-Variablen!.serendipity\_SideBarContent@.serendipitySideBarContent}%
\ospitem{\cmd{.serendipitySideBarContent}}
Enthält den Inhalt des jeweiligen Seitenleisten-Plugins.

\index{CSS-Variablen!.serendipity\_Entry\_Date}%
\ospitem{\cmd{.serendipity\_Entry\_Date}}
Alle Blog-Einträge sind nach Veröffentlichungsdatum gruppiert, so dass
mehrere Einträge eines Tages unter derselben Überschrift zusammengefasst werden
und nicht jedesmal das Datum wiederholt wird. Der Container
\cmd{.serendipity\_Entry\_Date} umfasst dabei jeweils einen Veröffentlichungstag.

\index{CSS-Variablen!.serendipity\_date}%
\ospitem{\cmd{.serendipity\_date}}
Das jeweilige Datum der Gruppe \cmd{.serendipity\_Entry\_Date} wird in der
HTML-Klasse \cmd{serendipity\_date} ausgegeben (meist ein \cmd{h3}-HTML-Tag).

\index{CSS-Variablen!.serendipity\_title}%
\index{CSS-Variablen!.serendipity\_entry}%
\ospitem{\cmd{.serendipity\_title, .serendipity\_entry}}
Jeder einzelne Blog-Artikel der Klasse
\cmd{.serendipity\_Entry\_Date} wird innerhalb dieses Containers noch weiter
separiert. Der Titel wird jeweils über die Klasse \cmd{.serendipity\_title}
ausgegeben, der Inhalt des jeweiligen Artikels (mitsamt seiner
Meta-Informationen wie Autorname, Kategoriezuordnung und Plugin-Ausgabe) wird
innerhalb der Klasse \cmd{.serendipity\_entry} ausgegeben.

\index{CSS-Variablen!.serendipity\_entry\_body}%
\index{CSS-Variablen!.serendipity\_entry\_extended}%
\ospitem{\cmd{serendipity\_entry\_body, .serendipity\_entry\_extended}}
Enthält den Text der jeweiligen Blog-Einträge.

\index{CSS-Variablen!.serendipity\_imageComment\_left}%
\index{CSS-Variablen!.serendipity\_imageComment\_center}%
\index{CSS-Variablen!.serendipity\_imageComment\_right}%
\index{CSS-Variablen!.serendipity\_image\_link}%
\ospitem{\cmd{.serendipity\_imageComment\_left,}}
\ospadditem{\cmd{.serendipity\_imageComment\_center,}}
\ospadditem{\cmd{.serendipity\_imageComment\_right, .serendipity\_image\_link}}
Falls Bilder mit Bildunterschriften in einen Blog-Artikel eingebunden worden
sind, werden diese Klassen eingesetzt.

\index{CSS-Variablen!.serendipity\_entryFooter}%
\ospitem{\cmd{.serendipity\_entryFooter}}
Enthält die jeweiligen Meta-Informationen eines Blog-Artikels.

\index{CSS-Variablen!.serendipity\_entry\_author\_self}%
\ospitem{\cmd{.serendipity\_entry\_author\_self}}
Diese Klasse wird bei allen Blog-Einträgen vergeben, die vom aktuell eingeloggten
Besucher geschrieben wurden.
 
\index{CSS-Variablen!.serendipity\_entryIcon}%
\ospitem{\cmd{.serendipity\_entryIcon}}
Etwaige Kategorie- oder Autorenbilder werden innerhalb dieser Klasse ausgegeben.

\index{CSS-Variablen!.serendipity\_comments}%
\ospitem{\cmd{.serendipity\_comments}}
Enthält den Container für Kommentare und Trackbacks zu einem Blog-Artikel.

\index{CSS-Variablen!.serendipity\_comment\_author\_self}%
\ospitem{\cmd{.serendipity\_comment\_author\_self}}
Falls vom Autor des Blog-Artikels ein Kommentar geschrieben wurde, wird
diese CSS-Klasse eingebunden.

\index{CSS-Variablen!.serendipity\_commentsTitle}%
\ospitem{\cmd{.serendipity\_commentsTitle}}
Enthält den Titel für den jeweiligen Kommentarabschnitt ("`Kommentare"' oder
"`Trackbacks"').

\index{CSS-Variablen!.serendipity\_comment}%
\ospitem{\cmd{.serendipity\_comment}}
Kapselt jeden einzelnen Kommentar zu einem Blog-Artikel.

\index{CSS-Variablen!.serendipity\_commentForm}%
\ospitem{\cmd{.serendipity\_commentForm}}
Enthält das Kommentarformular.

\index{CSS-Variablen!.serendipity\_commentsLabel}%
\ospitem{\cmd{.serendipity\_commentsLabel}}
Enthält die Überschriften zu den jeweiligen Eingabebereichen des Kommentarformulars.

\index{CSS-Variablen!.serendipity\_commentsValue}%
\ospitem{\cmd{.serendipity\_commentsValue}}
Enthält die Eingabeboxen der jeweiligen Eingabebereiche des Kommentarformulars.

\index{CSS-Variablen!.serendipity\_pageFooter}%
\ospitem{\cmd{.serendipity\_pageFooter}}
Enthält die Blätter-Anzeige für die Archivseiten der Blog-Übersichten.

\index{CSS-Variablen!.serendipity\_center}%
\ospitem{\cmd{.serendipity\_center}}
Etwaige Bildschirmmeldungen von Serendipity (z.\,B.\ bei Kommentarübermittlung oder
Fehlern) werden mit dieser Klasse ausgezeichnet.

\index{CSS-Variablen!.serendipity\_msg\_important}%
\index{CSS-Variablen!.serendipity\_msg\_notice}%
\index{CSS-Variablen!.serendipity\_content\_message}%
\ospitem{\cmd{.serendipity\_msg\_important, .serendipity\_msg\_notice,}}
\ospadditem{\cmd{.serendipity\_content\_message}}
Die jeweiligen Bildschirmmeldungen werden entsprechend ihrer Gewichtung
(\cmd{notice} = Hinweis, \cmd{important} = Wichtige Information) mit den
entsprechenden Klassen ausgezeichnet.

\index{CSS-Variablen!.serendipity\_search}%
\ospitem{\cmd{.serendipity\_search}}
Wenn der Besucher eine Volltextsuche ausgeführt hat, werden die Such\-ergebnisse
innerhalb dieser Klasse ausgegeben.

\end{ospdescription}

\index{CSS-Anweisungen!von Serendipity-Plugins}%
\index{Plugins!CSS-Anweisungen}%
\subsection{CSS-Anweisungen von Serendipity-Plugins}

Einige Plugins (wie \emph{Freie Artikel-Tags}) beinhalten eigenständige
CSS"=Anweisungen. Diese Anweisungen werden nicht in die zentrale
\cmd{style.css}-Datei Ihres Templates aufgenommen, sondern durch das Plugin
dynamisch ausgegeben.

Dies hat den Vorteil, dass Sie Ihre CSS-Datei nicht manuell anpassen müssen,
wenn Sie ein beliebiges Serendipity-Plugin installieren. Auch wird so die
Notwendigkeit umgangen, dass alle Templates für die Benutzung mit Plugins
speziell erweitert werden müssen.

Alle Serendipity-Plugins sind so programmiert, dass Sie die CSS"=Anweisungen der
Plugins \emph{überschreiben} können. Dazu müssen Sie die Plugin-Datei nicht
anfassen, sondern nur die Stylesheet-Datei Ihres Templates mit der CSS-Regel
erweitern, die die Vorgaben des Plugins überschreibt.

Konkret heißt das, wenn das Plugin \emph{Freie Artikel-Tags} eine CSS-Regel wie

\begin{ospcode}
.serendipity\_freeTag \{
  \ldots
\}
\end{ospcode}

ausgibt, müssen Sie diesen CSS-Code einfach in die eigene \cmd{style.css}-Datei
überführen und dort beliebig anpassen. Das Plugin findet daraufhin den Code in
Ihrer eigenen Datei und weiß, dass es selbst keine CSS-Anweisungen mehr
ausgeben soll.

Sollte dies einmal nicht verlässlich klappen (wenn z.\,B. die
HTML"=Elementnamen nicht übereinstimmen), können Sie in Ihrer
\cmd{style.css}-Datei die CSS-Regeln eines Plugins immer noch überschreiben,
indem Sie eine Regel wie:

\begin{ospcode}
.serendipity\_freeTag \{
  color: red !important;
\}
\end{ospcode}

in Ihr Stylesheet übernehmen. Die Anweisung \cmd{!important} sorgt dafür, dass
diese Zeile immer Vorrang vor anderen Anweisungen haben wird.

\index{CSS!Tools}%
\index{Tools!CSS}%
\subsection{CSS-Hilfen}

Beim Bearbeiten von CSS-Dateien brauchen Sie in der Regel immer zwei Dinge: Zum
einen müssen Sie das zu formatierende HTML-Element innerhalb des Quelltextes
ausfindig machen. Als Zweites müssen Sie dann den benötigten Element-Pfad
bzw. Klassennamen mit einer entsprechenden Formatierungsanweisung in Ihre
Stylesheet-Datei einfügen.

Dieser Prozess kann ziemlich müßig werden. Daher haben findige Köpfe für den
Firefox-Browser ein Modul namens
\cmd{Firebug}\footnote{\cmd{http://www.getfirebug.com/}, ähnliche Tools für
andere Browser bzw. JavaScript-basierte Tools sind ebenfalls verfügbar.} erfunden.
Dieses Programm ermöglicht es, mit einem einfachen Mausklick das benötigte
Element ausfindig zu machen und direkt zu sehen, welche CSS-Anweisungen für
dieses Element bereits belegt sind.

\index{Smarty}%
\index{Template-S@Templates!Smarty}%
\section{Smarty-Templates}
\label{Smarty-Templates}%

Nachdem Sie nun gelernt haben, wie Sie CSS-Anweisungen überarbeiten können,
wundern Sie sich möglicherweise bereits, wo Sie denn Einfluss auf die
HTML-Ausgabe Serendipitys nehmen können.

Da Serendipity ein dynamisches System ist, das auf verschiedenen Seiten
unterschiedliche Inhalte, Plugins und Artikellisten darstellen kann, muss auch
die Ausgabe des HTML-Codes dynamisch erfolgen.

\index{Template-Framework}%
Dazu bedient sich Serendipity eines sogenannten Template-Frameworks. Die
Hauptaufgabe eines Template-Frameworks ist es, Variablen zu interpretieren,
abzufragen und auszugeben. 

Einfach gesprochen, wollen Sie Serendipity gerne sagen, wo es einen Blog-Titel
ausgeben soll, wo der Artikeltext hinkommt und wo die Seitenleisten platziert
werden. Alle diese Inhalte werden durch Platzhalter (\emph{Variablen}) markiert,
über diese Platzhalter im Template eingebunden und später bei der Ausgabe automatisch 
durch die echten Inhalte ersetzt.

Außerdem soll ein Serendipity-Template erkennen können, ob der Besucher
gerade die Detailansicht eines Artikels betrachtet oder die Liste aller
Blog-Artikel zu einem gewissen Zeitpunkt. Abhängig von diesen Variablen muss Ihr
Template unterschiedliche Dinge tun, dies nennt man \emph{Darstellungslogik}.

Beides könnte man mit HTML alleine nicht erreichen, da HTML eine
\emph{statische} Beschreibungssprache ist, keine Programmiersprache. Mit
PHP"=Programmieranweisungen könnte man eine derartige Darstellungslogik
ausdrücken, jedoch ist dies für viele Anwender viel zu kompliziert. Daher
vertraut Serendipity auf eine Software-Bibliothek namens Smarty\footnote{\cmd{http://smarty.php.net/}}. 

Smarty ist das Bindeglied zwischen Serendipity und Ihnen als Template-Bauer.
Eine Smarty-Datei ist eine einfache Ansammlung von HTML"=Elementen, Variablen und
Darstellungslogik. Dabei greift Smarty auf übliche Programmiermuster zurück,
eine Variablenabfrage erfolgt beispielsweise mit:

\begin{ospcode}
<div class="Absatz">
\{if \$is\_single\_entry\}
 \ldots
\{/if\}
</div>
\end{ospcode}

Smarty-spezifischer Code wird dabei immer in geschweiften Klammern eingebunden.
Folgt in einer geschweiften Klammer ein Dollar-Zeichen, gefolgt von einem Namen,
so bezieht sich dies auf eine Variable. In obigem Beispiel wird geprüft, ob die
Variable \cmd{\$is\_single\_entry} gesetzt ist. Serendipity setzt diese
Variable, und innerhalb eines Smarty-Templates können Sie diese Variable
entweder ausgeben oder abfragen.

Das ist bis auf einige Sonderfälle bereits die ganze Magie: Smarty versteckt die
Komplexität von PHP hinter einer eigenen Syntax, die von HTML"=kundigen Benutzern
leichter eingesetzt werden kann. PHP-Fans können für Serendipity dennoch
PHP-Templates basteln, was ab Seite \pageref{templateapi} eingehender beschrieben
wird. Im Hintergrund arbeitet Smarty eine Template-Datei ab und wandelt sie in
maschinenlesbaren PHP-Code um. Diesen Vorgang nennt man \cmd{kompilieren}, 
das Ergebnis des Kompilierens landet als temporäre Datei im Verzeichnis \cmd{templates\_c}.
\index{Kompilieren}%
\index{Template-Sc@templates\_c}%

Smarty verfügt über eine große Anzahl an eigenen Funktionen, die in der
offiziellen Dokumentation auf \cmd{http://smarty.php.net/} ausführlich
beschrieben sind. Der folgende kurze Einblick in die Smarty-Syntax soll daher
nur als Einstiegspunkt in die Materie dienen. Tiefergehende Möglichkeiten durch
Erweiterung von Smarty finden Sie ab Seite \pageref{Templates bearbeiten}.

\index{Smarty!Variablen}%
\index{Smarty!Modifier}%
\subsection{Variablen und Modifiers}

Eine Variable kann in einem Smarty-Template einfach über \ospsmarty{variable}
ausgegeben werden. Der Inhalt der Variable erscheint dann später bei der
HTML-Ausgabe anstelle des Platzhalters.

Häufig möchte man den Inhalt einer Variablen jedoch weiterverarbeiten. Wenn
beispielsweise der Inhalt eines Blog-Artikels in der Variable \ospsmarty{entry}
gespeichert wird, möchte man davon nur die ersten 20 Zeichen ausgeben.

Für diesen Zweck kennt Smarty das Konzept der \cmd{Variable Modifiers}. Ein
Modifier ist eine Funktion, die auf eine Variable angewendet wird und deren
Inhalt modifiziert zurückliefert. In obigem Beispiel würde man die Kürzung auf 20
Zeichen wie folgt erreichen:

\begin{ospcode}
\{\$entry|truncate:20\}
\end{ospcode}

\index{Pipe}%
Einen Modifier wendet man an, indem man das Pipe-Symbol (\cmd{|}) hinter 
die Variable schreibt, und danach den Namen des Variable
Modifiers, in diesem Fall \cmd{truncate} zum Beschneiden. Ein Variable Modifier
kann Parameter entgegennehmen, in diesem Fall die Zahl \cmd{20} zur Angabe der
Menge von Zeichen, die ausgegeben werden sollen. Mehrere Parameter können
mit \cmd{:} voneinander getrennt werden. Die vollständige Dokumentation der
verfügbaren Parameter einer Funktion können Sie in der Smarty-Dokumentation
unter \cmd{http://smarty.php.net/} nachschlagen. \cmd{truncate} verfügt
z.\,B.\osplinebreak{} über eine zweite Option, mit der man die Kürzung eines Textes
durch das Anhängen einer Zeichenkette wie \cmd{\ldots} verdeutlichen kann:
 
\begin{ospcode}
\{\$entry|truncate:20:'\ldots'\}
\end{ospcode}

Des Weiteren sind Variable Modifiers schachtelbar, man kann also mehrere
Modifier nacheinander (in der gewünschten Reihenfolge) ausführen. Wenn Sie
beispielsweise den gekürzten Text noch so umwandeln wollen, dass
jeder erste Buchstabe eines Wortes großgeschrieben wird, erreichen Sie dies
mittels: 

\begin{ospcode}
\{\$entry|truncate:20:'\ldots'|capitalize\}
\end{ospcode}

Anstelle eines Parameters wie \cmd{:20} kann man an dieser Stelle auch immer auf
im Template gesetzte Variablen zugreifen.

\subsection{Arrays}
\index{Array}
\label{Arrays}

Arrays sind eine besondere Form von Variablen, die in beinahe jeder
Programmiersprache existieren. Während eine Variable wie
\ospsmarty{entry} nur einen einzelnen Artikeltext enthalten kann, ist es manchmal
wichtig, eine Variable zu besitzen, die mehrere Inhalte speichern kann.

Serendipity weist beispielsweise die Liste aller Blog-Artikel einer 
Smarty-Variable namens \ospsmarty{entries} zu. Diese Variable stellt eine
Gruppierung von einzelnen Artikeln dar, wobei jeder einzelne Artikel Attribute
wie \cmd{title}, \cmd{body}, \cmd{author} und Weiteres enthält. Solche Gruppierungen nennt
man \emph{Array}, sie können beliebig verschachtelt sein.

Ein Array ist so aufgebaut, dass es immer einen Schlüssel (\emph{Key}) und
einen Wert (\emph{Value}) geben muss. Um den abstrakten Begriff eines Arrays
besser zu verstehen, stellen Sie sich einen großen Schrank vor.
Der Name des Schranks entspricht dem Namen des Arrays. In unserem Fall stellen
wir uns die Beschriftung \ospsmarty{entries} auf dem Schrank vor. Dieser soll unsere
Einträge beinhalten. In jede einzelne Schublade haben wir einen Eintrag
hineingelegt. Jede Schublade besitzt eine eindeutige Beschriftung, wie
\emph{Artikel1}, \emph{Artikel2} und so weiter. Einen Tick komplexer wird es,
wenn wir nun in jeder einzelnen Schublade nochmal eine Fächerunterteilung haben.
In einem Fach liegt die Beschreibung des Artikels, in einem anderen Fach der
Name des Autors und in noch einem weiteren Fach der Titel des Artikels. Jedes
einzelne Fach beschreibt eindeutig, was darin liegt: \emph{author}, \emph{title}
und \emph{body}.

Anhand dieser Beschriftungen kann nun der Inhalt jeder Schublade präzise
adressiert werden. Wenn wir den Titel des zweiten Artikels herausholen wollen,
würden wir sagen: Ich öffne den Schrank \ospsmarty{entries}, ziehe die Schublade
\cmd{Artikel2} heraus und gucke dort in das Fach \cmd{title}. Diesen Vorgang
kann man mittels Smarty-Syntax wie folgt ausdrücken:

\begin{ospcode}
\{\$entries.Artikel2.title\}
\end{ospcode}  

Diese Syntax trennt mittels Punkten die unterschiedlichen Ebenen des Arrays
untereinander auf. Von links nach rechts gelesen steht zuerst der \emph{gröbste}
Name des Arrays, dann geht es mit immer detaillierteren Fächerbezeichnungen in die
Tiefe. 

Das Beispiel mit dem Schrank mag zunächst trivial klingen, gewinnt aber an
Komplexität, wenn man sich vorstellt, dass jede Schublade entweder einen
endgültigen Wert besitzen kann oder sich darin ein weiteres Fach (ein weiterer
Schrank, im Endeffekt) befindet. So kann man unendliche Verschachtelungen
erreichen, die man später anhand der Schlüssel"=Bezeichnungen (\emph{keys}) 
adressieren kann.

Während bei JavaScript solche Arrays ebenfalls der \emph{Punkt-Notation} folgen
und so angesprochen werden können, formatiert man den Zugriff auf ein Array
innerhalb von PHP-Code leicht unterschiedlich. Dort schreibt man 
anstelle von \ospsmarty{entries.Artikel2.title} die Syntax
\cmd{\{\$entries['Arti\-kel2']['title']\}}, setzt also jeden einzelnen
Array-Schlüssel in eckige Klammern. Bei Smarty können Sie diese
Notation meist nicht einsetzen, lediglich in einigen Sonderfällen
(IF-Abfragen) wird dies von Smarty akzeptiert.

\subsection{Schleifen, IF-Abfragen}

\index{Schleifen}%
\index{foreach}%
Natürlich möchte man später eine Liste von Artikeln dynamisch ausgeben können.
Die Abarbeitung eines Arrays, in der man dynamisch alle Inhalte ausgibt, nennt
man \emph{Schleife}.
Schleifen werden in Smarty mittels der Funktionen \cmd{\{foreach \ldots\}} und
\cmd{\{/foreach\}} erzeugt. Alles zwischen diesen beiden Aufrufen stellt den
eigentlichen Inhalt der Schleife dar und bestimmt, was mit jedem Element eines
Arrays passiert.

\osppagebreak

Greifen wir dazu erneut auf obiges Beispiel des Artikel-Schranks zurück. Um die
Inhalte dynamisch auzulesen, müssten wir dies einem Roboter wie folgt erklären:

\emph{Öffne den Schrank mit dem Titel} \cmd{entries}. \emph{Gehe nacheinander alle
Schubladen durch, und pro geöffneter Schublade machst Du Folgendes: \ldots}

In Smarty-Syntax formuliert sieht dies wie folgt aus:

\begin{ospcode}
\{foreach from=\$entries item="schublade"\}
  <p>In dieser Schublade liegt der Artikel mit Titel
<strong>\cmd{\{\$schublade.title\}}</strong>.</p> 
\{/foreach\}
\end{ospcode}

Wenn dieses Smarty-Template nun später kompiliert und ausgeführt wird, würde man
folgende HTML-Ausgabe erhalten:

\begin{ospcode}
<p>In dieser Schublade liegt der Artikel mit Titel <strong>Artikel 1 
  Titel</strong>.</p>
<p>In dieser Schublade liegt der Artikel mit Titel <strong>Artikel 2 
  Titel</strong>.</p>
<p>In dieser Schublade liegt der Artikel mit Titel <strong>Artikel 3 
  Titel</strong>.</p>
\end{ospcode}

Für jeden im Schrank enthaltenen Artikel wurde die Schleife also einmal
durchwandert, und die Inhalte wurden der Variable zugewiesen.

\index{Iteration}%
\index{Array!Schlüssel}%
\index{Array!Value}%
Ein besonders wichtiges Merkmal von Schleifen ist, dass bei jedem Durchgang
(\emph{Iteration}) einer Schleife durch ein Array das jeweilige Element immer
einem Schlüssel (\cmd{key}) und einem Wert (\cmd{value}) zugewiesen wird. Ein
Schlüssel ist dabei \emph{immer} entweder ein numerischer Index oder eine
Zeichenkette, er kann niemals ein weiteres Array enthalten. Jedoch kann der
\emph{Wert} entweder ein Array oder eine einfache Zeichenkette enthalten.

Beim Durchwandern eines Arrays muss Smarty (bzw. jede Programmiersprache) eine
temporäre Variable benennen, mit der man auf das "`aktuelle Element"' zugreifen
kann. In obigem Beispiel ist dies die Variable \cmd{schub\-la\-de}. Diese
Bezeichnung haben wir nirgendwo auf dem Schrank angebracht, sie ist also ein
komplett frei wählbares Konstrukt innerhalb der Programmierung. Sie könnten der
Foreach-Schleife auch den Elementnamen \cmd{pusemuckel} zuweisen.

Wenn später der Zugriff auf \ospsmarty{schublade.title} erfolgt, ist der
Unter-Array-Schlüssel (\cmd{title}) nicht frei wählbar. Denn dieser entspricht
der Bezeichnung, die wir vorher auf dem Schrank fest angebracht haben. Der
Begriff ist essentiell wichtig, damit auf den richtigen Wert zugegriffen werden
kann. 

Obige Foreach-Schleife ist leicht vereinfacht angewendet. Wie Sie vielleicht
festgestellt haben, wird nur der \cmd{Wert} eines Array-Elementes
weiterverwendet (als \ospsmarty{schublade}). Der Array-Schlüssel scheint irrelevant
und wird nicht weiter benutzt. Manchmal wird für Sie aber der Schlüssel von
Interesse sein, und in diesem Fall müssen Sie den Inhalt ebenfalls einer
Übergangsvariable zuweisen:

\begin{ospcode}
\{foreach from=\$entries key="schluessel" item="schublade"\}
  <p>In dieser Schublade liegt der Artikel mit Titel
<strong>\cmd{\{\$schublade.title\}}</strong>.</p> 
\{/foreach\}
\end{ospcode}

Neu hinzugekommen ist das Attribt \cmd{key='\ldots'}, das den Titel der Variable
enthält. Beachten Sie hier, niemals Sonderzeichen wie Umlaute zu benutzen.
Innerhalb der Foreach-Schleife können Sie nun \ospsmarty{schluessel} an
beliebiger Stelle ausgeben. In unserem Beispiel würde dann 
\emph{Artikel1} und \emph{Artikel2} als Inhalt der Variable ausgegeben.

Nicht zu verwechseln mit einer Schleife ist eine \cmd{IF-Abfrage}. Mit dieser
prüft man, ob eine Variable einen bestimmten Wert hat -- nur wenn diese Abfrage
nicht scheitert, wird ein dahinterliegender Code-Teil ausgeführt:

\begin{ospcode}
<div class="Absatz">
\{if \$is\_single\_entry\}
 \ldots
\{/if\}
</div>
\end{ospcode}

Nur wenn man sich beim Betrachten eines Artikels in der Detailansicht befindet,
würde man die Ausgabe

\begin{ospcode}
<div class="Absatz">
 \ldots
</div>
\end{ospcode}

erhalten, andernfalls würde man nur

\begin{ospcode}
<div class="Absatz">
</div>
\end{ospcode}

sehen.

\index{Smarty!Funktionen}%
\index{Template-Funktionen}%
\subsection{Funktionsaufrufe}

Während Variablen durch Serendipity fest zugewiesen und an Ihre Smarty-Templates
weitergereicht werden, können Funktionen einen beliebigen Algorithmus
durchführen und dessen Rückgabewert darstellen.

Ein Beispiel für einen Funktionsaufruf wäre die Addition zweier Variablen. Wenn
Sie die Anzahl von Kommentaren und Trackbacks für einen Blog-Artikel addieren
wollen, können Sie nicht einfach Folgendes schreiben:

\begin{ospcode}
Gesamt: \{\$entry.comments\}+\{\$entry.trackbacks\}
\end{ospcode}

denn dadurch würden Sie lediglich eine Ausgabe wie

\begin{ospcode}
Gesamt: 2+3
\end{ospcode}

erhalten. Stattdessen müssen Sie folgenden Smarty-Funktionsaufruf bemühen:

\begin{ospcode}
Gesamt: \{math equation="x+y" x=\$entry.comments y=\$entry.trackbacks\}
\end{ospcode}

Man muss also erst eine mathematische Formel mit Platzhaltern aufbauen und dann
die substituierenden Werte als Attribute der Funktion übermitteln.
Weitere gängige Smarty-Funktionen sind z.\,B.\ der Einsatz eines Zählers
(\cmd{\{counter\}}) oder das beliebige Zuweisen von Variablen mittels
\cmd{\{assign\}}. 

Darüber hinaus werden von Serendipity zahlreiche Smarty-Funktionen zur Verfügung
gestellt, diese sind ab Seite \pageref{smartyfunctions} erläutert.

\index{Sicherheitsmodus}%
Smarty-Templates werden bei Serendipity grundsätzlich im \menu{Sicherheits"=Modus}
ausgeführt. Dieser verhindert, dass man innerhalb einer Smarty-Datei beliebige
PHP-Funktionen aufrufen kann. Dies macht Templates weitaus sicherer im Einsatz,
und wenn dies nicht gewollt ist, kann man es über die Template-Datei
\cmd{config.inc.php} auch gezielt übergehen (siehe Seite \pageref{smartysecurity}).

\index{Fehler!Smarty}%
\index{Fehler!Escaping}%
\index{Fehler!JavaScript}%
\subsection{Kommentare, Escaping, JavaScript}

Grundsätzlich können Sie innerhalb einer Smarty-Template-Datei beliebigen
HTML-Code und auch beliebiges JavaScript einfügen.

Da Smarty jedoch auf die Zeichen \cmd{\{} und \cmd{\}} speziell reagiert, können
Sie diese Sonderzeichen nicht einfach innerhalb eines JavaScripts einsetzen, wo
diese Zeichen häufig vorkommen.
Stattdessen müssen Sie diese Zeichen als \cmd{\{ldelim\}} und \cmd{\{rdelim\}}
platzieren. Alternativ können Sie einen Block mit JavaScript aber auch in einen
\cmd{\{literal\}\ldots\{/literal\}}-Funktionsblock setzen.

Kommentare, die später in der HTML-Ausgabe nicht sichtbar sein sollen, können Sie
mittels \cmd{\{* \ldots Kommentar \ldots *\}} in der Smarty-Template-Datei
einfügen. 

\index{Smarty!Include}%
\subsection{Einbindung von Dateien}

Smarty ermöglicht es mittels der Funktionen \cmd{include}, \cmd{include\_php},
\cmd{in\-sert} und \cmd{capture}, externe HTML-Dateien oder
PHP-Dateien einzubinden. Dies ist jedoch bereits durch andere
Serendipity-Plugins abgedeckt und auch aufgrund der aktivierten
Smarty-Sicherheitsfunktionen standardmäßig nicht nutzbar. Ab Seite \pageref{embedding} wird
genauer beschrieben, wie man externe Inhalte mit Serendipity am besten
einbindet.

\index{Template-Dateien}%
\section{Template-Dateien}

Ein Serendipity-Template besteht aus zahlreichen Dateien: Stylesheet,
Info-Datei, Grafiken und Smarty-Templates.
Damit Sie diese bearbeiten können, müssen Sie zunächst Ihr eigenes
Template-Verzeichnis ausfindig machen.

Den Namen Ihres Template-Verzeichnisses finden Sie, indem Sie mit einem
FTP-Programm (oder Ähnlichem) einen Blick in das Verzeichnis \cmd{templates}
werfen. Dort sehen Sie Unterverzeichnisse, deren Namen meist einen Rückschluss
auf das jeweilige Template zulassen. Der Verzeichnisname muss jedoch nicht
zwingend dem entsprechen, den Sie im Backend im Menüpunkt \cmd{Styles
verwalten} sehen. Daher müssen Sie ggf. die Datei \cmd{info.txt} im jeweiligen
Template-Verzeichnis öffnen, darin ist der angezeigte Name des Templates enthalten.

\index{Template-Dateien!info.txt}%
Ein Serendipity-Template besteht also mindestens aus einem Verzeichnis,
der angesprochenen \cmd{info.txt}-Datei und einer beliebigen Anzahl weiterer
Dateien. Findet Serendipity eine Datei nicht in Ihrem Template-Verzeichnis,
benutzt es automatisch die Standarddatei.

Um ein eigenes Template zu erstellen, benötigen Sie als Erstes ein neues
Verzeichnis für Ihre Dateien. Nehmen wir an, Sie wollen Ihr Template
\cmd{nir\-vana} nennen. Erstellen Sie dazu ein neues Verzeichnis
\cmd{templates/nirva\-na/}. In diesem Verzeichnis müssen Sie nun eine
\cmd{info.txt}-Datei erstellen, beispielsweise mit folgendem Inhalt:

\begin{ospcode}
Name: Nirvana
Author: Ich
Date: 2007
\end{ospcode}

Die jeweiligen Bezeichner \cmd{Name, Author, Date} müssen Sie exakt so
übernehmen. Alles was hinter dem Doppelpunkt steht, bleibt Ihrer Kreativität
überlassen. 

Nachdem diese Datei erstellt wurde, können Sie Ihr Template im Backend über den
Menüpunkt \cmd{Styles verwalten} bereits auswählen. Da ansonsten noch keine
Dateien vorhanden sind, bezieht Serendipity diese automatisch aus dem
Standard-Template, \cmd{/templates/default} und \cmd{/templates/carl""\_contest/}.

Das \cmd{carl\_contest}-Verzeichnis wurde mit Veröffentlichung von Serendipity
1.0 zum Standardverzeichnis, während \cmd{default} noch
einige ältere Standarddateien enthält. Somit ergänzen sich beide Verzeichnisse,
was für Template"=Anpassungen manchmal verwirrend scheinen mag.

Wenn Serendipity in Ihrem Template-Verzeichnis eine angeforderte Datei wie
\cmd{index.tpl} nicht findet, sucht es erst im \cmd{carl\_contest}-Verzeichnis
und danach im \cmd{default}-Verzeichnis. Wenn Sie eine Datei wie
\cmd{index.tpl}, \cmd{style.css} oder \cmd{entries.tpl} anpassen wollen, müssen Sie
diese Datei erst in Ihr eigenes Template-Verzeichnis kopieren und dort anpassen.

Niemals sollten Sie Dateien außerhalb eines eigenen
Template"=Verzeichnisses bearbeiten. Obwohl es verlockend scheinen mag, einfach
die Datei \cmd{templates/default/style.css} direkt zu ändern, sollten Sie darauf
unbedingt verzichten. Andernfalls würden Ihre Änderungen an solchen Dateien bei
einem Serendipity-Update unweigerlich überschrieben werden, und Ihre Änderungen
wären verloren. 

Damit Sie später bei Serendipity-Aktualisierungen etwaige Verbesserungen der
Standard-Templates automatisch auch in Ihrem Template sehen können, ist es sehr
empfehlenswert, wirklich nur die Dateien in Ihr Template-Verzeichnis zu
kopieren, die Sie anpassen wollen. Wenn Sie \cmd{index.tpl} niemals
verändern, sollten Sie sie der besseren Übersichtlichkeit und Kompatibilität
wegen aus Ihrem eigenen Template-Verzeichnis löschen.

Grundsätzlich können Sie in einem Template-Verzeichnis beliebige Dateien
speichern, also auch Bilddateien, JavaScripts, Flash-Videos oder eigene PHP-Codeschnipsel. Einige
Serendipity-Plugins können ebenfalls über angepasste Template-Dateien ausgegeben
werden, diese Template-Dateien (z.\,B.\ \cmd{plugin\_staticpage.tpl}) können Sie
auch in Ihr eigenes Template-Verzeichnis übernehmen -- dieses Verzeichnis hat
immer Vorrang vor dem Standard-Plugin-Verzeichnis.

Es folgt eine Liste aller Dateien, die Serendipity in einem
Template"=Verzeichnis ansprechen kann.

\subsection{CSS-Dateien}

Die aufgeführten Cascading-Stylesheet-Dateien enthalten Anweisungen zur
Formatierung. Innerhalb der Datei \cmd{style.css} kann der Platzhalter
\ospsmarty{TEM\-PLATE\_PATH} eingesetzt werden, der später durch den vollständigen
Pfad zum gewählten Template ersetzt wird. Da das Stylesheet vom Stammordner und
nicht vom jeweiligen Template-Ordner aus vom Browser aufgerufen wird, müssen die
Pfadverweise jeweils mit absoluter Angabe erfolgen. Eine relative Angabe müsste
sich stets auf den Stammpfad beziehen. Eine Anweisung wie

\begin{ospcode}
.banner \{
  background-image: url(pic.jpg);
\}
\end{ospcode}

würde nach der Datei \cmd{http://www.example.com/serendipity/pic.jpg} suchen, da
das Stylesheet über \cmd{http://www.example.com/serendipity/""serendipity.css}
virtuell aufgerufen wird. Um aber auf die Template-Datei
\cmd{http://www.example.com/serendipity/templates/nirvana/pic.jpg} zuzugreifen,
wäre folgende CSS-Anweisung korrekt:

\begin{ospcode}
.banner \{
  background-image: url(\{TEMPLATE\_PATH\}pic.jpg);
\}
\end{ospcode}


\begin{ospdescription}
\index{Template-Dateien!style.css}%
\ospitem{\cmd{style.css}}
Enthält die zentralen CSS-Regeln für den gesamten Frontend-Bereich eines
Templates.

\index{Template-Dateien!admin/style.css}%
\ospitem{\cmd{admin/style.css}}
Enthält die CSS-Regeln für den Backend-Bereich eines Templates.

\index{Template-Dateien!admin/imgedit.css}%
\ospitem{\cmd{admin/imgedit.css}}
Enthält die CSS-Regeln für den (derzeit noch nicht verwendeten) Bild-Editor der
Mediendatenbank. 

\index{Template-Dateien!admin/pluginmanager.css}%
\ospitem{\cmd{admin/pluginmanager.css}}
Enthält CSS-Regeln für die Darstellung der Plugin-Übersicht im Backend. Diese
CSS-Regeln werden zusätzlich zum zentralen Admin"=Style\-sheet eingelesen.

\index{Template-Dateien!atom.css}%
\ospitem{\cmd{atom.css}}
Enthält CSS-Regeln, die bei der Darstellung eines Atom-Feeds angewandt werden
können. Üblicherweise wird ein Atom-Feed nur innerhalb eines Feedreaders
eingebunden, das Stylesheet wird nur dann angewendet, wenn ein Besucher den
Atom-Feed innerhalb eines normalen Browsers anzeigt.

\index{Template-Dateien!htmlarea.css}%
\ospitem{\cmd{htmlarea.css}}
Enthält CSS-Regeln für Serendipitys integrierten WYSIWYG-Editor.

\end{ospdescription}


\index{Template-Dateien!Smarty-Templates}%
\subsection{TPL-Dateien (Frontend)}
\label{frontend-tpl}%
Die Dateien mit der Endung \cmd{.tpl} stellen Smarty-Templates dar. Sie
enthalten die jeweiligen Anweisungen, um die von Serendipity gelieferten
Variablen korrekt in eine HTML-Ausgabe einzubinden.

Innerhalb jeder Datei sind spezielle Smarty-Variablen verfügbar (siehe Seite \pageref{smartyvariablen}).
Für einen vollständigen Seitenaufruf können mehrere einzelne Template"=Dateien
involviert sein, die am Ende von Serendipity vor der Ausgabe automatisch 
miteinander verbunden werden.

\label{templatefiles}%
\begin{ospdescription}
\index{Template-Dateien!Uebersicht@Übersicht}%
\index{Template-Dateien!index.tpl}%
\label{templatefiles-index}
\ospitem{\cmd{index.tpl}}
Enthält das Grundgerüst (HTML-Kopf, -Fuß und Seitenleisten"=Einbindung) jeder
Serendipity-Seite. Hier können Sie sämtliche statischen Inhalte einbinden, wie
zum Beispiel eigene Navigationsleisten, JavaScripts oder Banner und Footer.

\index{Template-Dateien!content.tpl}%
\ospitem{\cmd{content.tpl}}
Enthält den grundsätzlichen Inhaltsbereich, der in der \cmd{index.tpl}-Datei
über die Variable \ospsmarty{CONTENT} eingebunden wird. Der Inhaltsbereich
entscheidet, ob etwaige Meldungen an den Besucher weitergereicht werden und ob
z.\,B.\ eine Volltextsuche ausgeführt wurde.

\index{Template-Dateien!entries.tpl}%
\ospitem{\cmd{entries.tpl}}
Stellt einen oder mehrere Blog-Artikel dar. Innerhalb dieser Datei können die
Blog-Artikel (\ospsmarty{entries}) in einer Schleife abgearbeitet werden. 
Abhängig von weiteren Variablen wird entschieden, ob eine Übersicht oder eine
Einzel-Artikel-Darstellung gewünscht ist.

\index{Template-Dateien!sidebar.tpl}%
\ospitem{\cmd{sidebar.tpl}}
Enthält die Ausgaben für die Elemente einer Seitenleiste. Diese Datei wird über
den Smarty-Funktionsaufruf \cmd{serendipity\_printSidebar} innerhalb des
\cmd{index.tpl}-Templates ausgegeben und jeweils einzeln für die linke,
rechte und etwaige weitere Seitenleisten durchlaufen.

\index{Template-Dateien!commentform.tpl}%
\ospitem{\cmd{commentform.tpl}}
Enthält das Kommentarformular, mit dem Besucher Kommentare zu einem Blog-Artikel
hinterlassen können.

\index{Template-Dateien!commentpopup.tpl}%
\ospitem{\cmd{commentpopup.tpl}}
Falls Kommentare in einem Popup-Fenster dargestellt werden sollen, wird diese
Template-Datei verwendet, um das HTML-Grundgerüst für dieses Popup-Fenster
auszugeben. 

\index{Template-Dateien!comments.tpl}%
\index{Template-Dateien!trackbacks.tpl}%
\ospitem{\cmd{comments.tpl, trackbacks.tpl}}
Stellt eine Liste von Kommentaren oder Trackbacks dar.

\index{Template-Dateien!comments\_by\_author.tpl}%
\ospitem{\cmd{comments\_by\_author.tpl}}
Stellt eine Liste aller Kommentare eines gewünschten Blog"=Kommentators im
Inhaltsbereich dar.

\index{Template-Dateien!entries\_archives.tpl}%
\ospitem{\cmd{entries\_archives.tpl}}
Stellt eine Archiv-Übersicht der Blog-Artikel (im Inhaltsbereich) dar.

\index{Template-Dateien!entries\_summary.tpl}%
\ospitem{\cmd{entries\_summary.tpl}}
Stellt eine zusammengefasste Archiv-Übersicht der Blog-Artikel im Inhaltsbereich
dar.

\label{customfeeds}%
\index{Template-Dateien!feed\_0.91.tpl}%
\index{Template-Dateien!feed\_1.0.tpl}%
\index{Template-Dateien!feed\_2.0.tpl}%
\index{Template-Dateien!feed\_atom0.3.tpl}%
\index{Template-Dateien!feed\_atom1.0.tpl}%
\index{Template-Dateien!feed\_opml1.0.tpl}%
\ospitem{\cmd{feed\_0.91.tpl}, \cmd{feed\_1.0.tpl}, \cmd{feed\_2.0.tpl}, 
\cmd{feed\_atom0.3.tpl},}
\ospadditem{\cmd{feed\_atom1.0.tpl}, \cmd{feed\_opml1.0.tpl}}
Für jeden RSS-Feed bestimmt eine nach dem jeweiligen Feed-Typen benannte
Template-Datei die Darstellung. So können gewünschte Änderungen am Layout
und den eingesetzten Elementen der RSS-Feeds template-basiert durchgeführt
werden. 

Eigene RSS-Typen können ebenfalls hinzugefügt werden. Diese werden nach dem
Schema \cmd{http://www.example.com/serendipity/""rss.php?version=nirvana}
aufgerufen und sprechen die Template-Datei nach dem Schema
\cmd{feed\_nirvana.tpl} an.

\index{Template-Dateien!plugin\_calendar.tpl}%
\ospitem{\cmd{plugin\_calendar.tpl}}
Die Ausgabe des Kalenders in der Seitenleiste wird über die Datei
\cmd{plugin\_calendar.tpl} kontrolliert. Diese Template-Datei enthält\osplinebreak{} mehrere
Schleifen zur Darstellung des jeweiligen Monats bzw. Jahres.

\index{Template-Dateien!plugin\_remoterss.tpl}%
\ospitem{\cmd{plugin\_remoterss.tpl}}
Das Seitenleisten-Plugin \emph{Fremder RSS/OPML-Blogroll Feed} (siehe Seite
\pageref{remoterss}) macht seine Ausgaben via Smarty-Template-Datei
\cmd{plugin\_""remoterss.tpl}, wenn es entsprechend konfiguriert wurde.
Andernfalls nutzt das Plugin die fest einprogrammierte HTML-Ausgabe, um die
Performance zu steigern.

\index{Template-Dateien!plugin\_categories.tpl}%
\ospitem{\cmd{plugin\_categories.tpl}}
Das Seitenleisten-Plugin \emph{Kategorien} kann so konfiguriert werden, dass
es die Smarty-Template-Datei \cmd{plugin\_categories.tpl} zur Ausgabe
anspricht. Andernfalls nutzt das Plugin die fest einprogrammierte HTML-Ausgabe, 
um die Performance zu steigern. 

Innerhalb dieser Template-Datei können Dinge wie die Darstellung der RSS-Symbole
pro Kategorie wie auch die Verschachtelung von Unterkategorien individualisiert
werden. 

\index{Template-Dateien!preview\_iframe.tpl}%
\ospitem{\cmd{preview\_iframe.tpl}}
\index{iframe}%
Wird im Backend die Vorschau für einen Blog-Artikel ausgeführt, stellt der
Browser diese Vorschau in einem eigenen \emph{iframe} dar. Dieser \emph{iframe}
simuliert die Darstellung des Artikels im Frontend, indem die dafür benötigten
Stylesheets eingebunden werden.

Die Art und Weise der Darstellung des iframe wird über die Template-Datei
\cmd{preview\_iframe.tpl} kontrolliert. In dieser Datei sind
Java\-Script-Anweisungen vorhanden, die dynamisch die korrekte Höhe der
Darstellung des Blog-Artikels ermitteln. Falls das gewählte Template den
zentralen Blog-Inhaltsbereich individuell formatiert, kann es notwendig sein,
diese \cmd{preview\_iframe.tpl}-Datei an die HTML-Struktur des Frontends
anzugleichen.
\end{ospdescription}


\index{Template-Dateien!Backend}%
\subsection{TPL-Dateien (Backend)}

Der HTML-Code des Serendipity-Backends ist größtenteils fest im Quellcode von
Serendipity verdrahtet. Dies geschieht, damit neue Serendipity-Versionen
problemlos neue Features einbauen können, für die andernfalls jedes Mal eine
Anpassung Ihres Templates notwendig wäre.
Zudem ist die Darstellung mit Verzicht auf Smarty etwas schneller, und da der
Backend-Bereich selten von Benutzern angepasst wird, ist dieser Kompromiss meist
problemlos.

Damit Sie jedoch dennoch Teile des Backends zu eigenen Zwecken und für eigene
Templates anpassen können, sind das grundlegende Seitenlayout, die Oberfläche der
Mediendatenbank sowie der Artikel-Editor von Serendipity über Template-Dateien
zugänglich. Zusammen mit der Stylesheet-Datei des Backends können so beinahe
alle Aspekte des Backends verändert werden.

\begin{ospdescription}

\index{Template-Dateien!admin/index.tpl}%
\ospitem{\cmd{admin/index.tpl}}
Enthält die Grundstruktur des Serendipity-Backends, mit Positionierung des
Inhaltsbereichs, der Überschrift und der Menüpunkte.

\index{Template-Dateien!admin/entries.tpl}%
\ospitem{\cmd{admin/entries.tpl}}
Enthält die Oberfläche zum Bearbeiten bzw. Erstellen eines Blog"=Artikels. In
dieser Datei können die Eingabefelder für den Titel des Beitrags, das Datum, die
Kategorieauswahl, die erweiterten Optionen und alle weiteren Felder beliebig
platziert werden.
 
\label{mediatemplates}
\index{Template-Dateien!admin/media\_choose.tpl}%
\ospitem{\cmd{admin/media\_choose.tpl}}
Enthält das Grundgerüst der Mediendatenbank-Oberfläche, die über ein Popup-Fenster
ausgegeben wird. Innerhalb dieser Datei werden mehrere Framesets verwaltet und
die Inhalte des Verzeichnis-Frames ausgegeben. Somit dient die Datei als eine
Art zentrale Anlaufstelle für alle Aktionen, die in der Mediendatenbank
ausgeführt werden können (Verzeichnisverwaltung, Rechteverwaltung, Darstellung
der Übersicht, Darstellung einer einzelnen Datei, Auswahl einer Datei).

\index{Template-Dateien!admin/media\_imgedit.tpl}%
\index{Template-Dateien!admin/media\_imgedit\_done.tpl}%
\ospitem{\cmd{admin/media\_imgedit.tpl, admin/media\_imgedit\_done.tpl}}
Enthält einen rudimentären Bildeditor der Mediendatenbank, der von Serendipity
derzeit noch nicht genutzt wird.

\index{Template-Dateien!admin/media\_pane.tpl}%
\ospitem{\cmd{admin/media\_pane.tpl}}
Dieses Template gibt das Gerüst für die Ansicht der Mediendatenbank aus und
stellt den Kopf- und Fußbereich für die Verzeichnisinhalte dar (Filter,
Blättern, Suche \ldots).

Der Inhaltsbereich wird über die Variable \ospsmarty{MEDIA\_ITEMS} aus der Datei
\cmd{media\_items.tpl} bezogen.
 
\index{Template-Dateien!admin/media\_items.tpl}%
\ospitem{\cmd{admin/media\_items.tpl}}
Diese Datei regelt die Darstellung der Liste von Dateien in der Mediendatenbank.
Sowohl die Übersicht als auch die Darstellung einer einzelnen Datei wird
innerhalb dieses Templates ausgegeben.

Die Liste wird mittels der Variable \ospsmarty{MEDIA\_ITEMS} in der Datei
\cmd{media\_pane.tpl} oder \cmd{media\_properties.tpl} eingebunden und\osplinebreak{}
ausgegeben.

\index{Template-Dateien!admin/media\_properties.tpl}%
\ospitem{\cmd{admin/media\_properties.tpl}}
Stellt die Eigenschaften einer gewählten Datei der Mediendatenbank dar. Die
Datei \cmd{media\_properties.tpl} regelt dabei den umgebenden Rahmen, die
eigentlichen Detailinformationen werden über die Variable
\ospsmarty{MEDIA\_ITEMS} aus der Datei \cmd{media\_items.tpl} bezogen.

\index{Template-Dateien!admin/media\_upload.tpl}%
\ospitem{\cmd{admin/media\_upload.tpl}}
Dieses Template enthält das Formular zum Hochladen einer neuen Datei in die Mediendatenbank.

\index{Template-Dateien!admin/media\_showitem.tpl}%
\ospitem{\cmd{admin/media\_showitem.tpl}}
Falls die Mediendatenbank benutzt wird, um im Frontend eine einzelne Datei
darzustellen, dient das Template \cmd{media\_showitem.tpl} dazu, das Grundgerüst
zu den Informationen der Datei zu formatieren. Diese Datei kann somit unabhängig
von der Backend"=Darstellung der Mediendatenbank angepasst werden.
\end{ospdescription}

\subsection{PHP-Dateien}
\begin{ospdescription}
\index{Template-Dateien!config.inc.php}%
\ospitem{\cmd{config.inc.php}}
Jedes Template kann eine \cmd{config.inc.php}-Datei benutzen, um darin beliebige
PHP-Befehle einzubinden.

\index{Serendipity-Variablen!\$serendipity['smarty']}
Diese Datei wird stets geladen, wenn Serendipity eine Seite im Frontend
einbindet. Kurz nach Initialisierung des Smarty"=Frameworks wird die
\cmd{config.inc.php} aufgerufen, so dass Sie innerhalb dieser Datei bereits auf
das Objekt \cmd{\$serendipity['smarty']} zugreifen können, 
beispielsweise um eigene Modifiers oder Functions zu registrieren.

Auch die Einbindung von PHP-Zugriffszählern oder Ähnlichem bietet sich in dieser
Datei an. Die \cmd{config.inc.php} kann dabei jedoch keine Ereignis-Plugins
ersetzen, sondern dient ergänzend dazu.

\index{Smarty!Security}%
\index{Smarty!Sicherheitsmodus}%
\index{Fehler!Smarty Security}%
\label{smartysecurity}
Ein häufiger Einsatzzweck für diese Datei ist es, die Smarty"=Sicherheitsfunktion zu
deaktivieren. Dazu tragen Sie in der \cmd{config.inc.""php}-Datei folgenden Code
ein:

\begin{ospcode}
<?php
\$serendipity['smarty']->security = false;
?>
\end{ospcode}

Dies bewirkt, dass Sie nun auch auf die potenziell gefährlichen Smarty"=Befehle
wie \cmd{include} und \cmd{include\_php} zugreifen können. Sie sollten diese
Sicherheitsfunktion nur dann deaktivieren, wenn nur vertrauenswürdige Personen
FTP- oder Dateizugriff zu Ihrem Server haben.

Abgesehen von beliebigem PHP-Code dient \cmd{config.inc.php} auch zur
Festlegung der Optionen eines Templates, die im Backend im Menüpunkt \menu{Styles
verwalten} angezeigt werden können. So macht beispielsweise das Template
\emph{Bulletproof} intensiven Gebrauch von solchen Optionen, um dem Benutzer
die Wahl des Header-Bildes zu lassen, eine Farbwahl zu treffen oder
Navigationslinks einzubinden.

Die Syntax zur Festlegung und Benutzung von Template-Optionen finden Sie ab
Seite \pageref{templateoptionen}.

\index{Template-Dateien!lang\_*.php}%
\label{api-lang2}
\ospitem{\cmd{lang\_*.php, UTF-8/lang\_*.php}}
Falls das Template mittels der \cmd{config.inc.php}-Datei eigene
Template"=Optionen einbindet, sind die Beschreibungen dieser Optionen für die
Darstellung im Backend meist in eigenständige Sprachdateien ausgelagert. Diese
entsprechen dem Schema \cmd{lang\_de.inc.php} (deutsche Sprache) und können
anhand des Sprachkürzels später von Serendipity abhängig von der vom Benutzer
gewählten Sprache geladen werden.

Diese Dateien befinden sich nochmals im Unterverzeichnis \cmd{UTF-8}, dort
liegen sie im UTF-8-Zeichensatz gespeichert. Im Hauptverzeichnis hingegen liegen
die Dateien immer im nativen Zeichensatz, meist \cmd{ISO-8859-1}.
\end{ospdescription}

\subsection{Bilder, Metadaten}

Jedes Template liefert meist auch eine Fülle an Grafikdateien. Sie können
innerhalb Ihres Templates beliebige Grafikdateien ansprechen, aber zusätzlich
greift Serendipity zur Darstellung einiger Objekte auf feste Dateinamen zurück.

Wenn Ihr Template eine Datei gleichen Namens besitzt, wird diese von Serendipity 
anstelle der Standarddatei ausgegeben. Zur Gestaltung dieser Dateien können
Sie sich nach Vorlagen im Verzeichnis \cmd{templates/default/} richten.

\begin{ospdescription}
\index{Template-Dateien!preview.png}%
\index{Template-Vorschaugrafik}%
\ospitem{\cmd{preview.png}}
Diese Datei enthält eine Vorschaugrafik des Aussehens des jeweiligen Templates.
Den Screenshot müssen Sie manuell erstellen, damit man Ihr Template 
anhand der Vorschaugrafik identifizieren kann.

Die Vorschaugrafik wird in der Oberfläche \cmd{Styles verwalten} angezeigt. Die
Grafik sollte genau 100 Pixel breit sein, die Höhe ist beliebig.

\index{Template-Dateien!preview\_fullsize.jpg}%
\ospitem{\cmd{preview\_fullsize.jpg}}
Die große Variante der Vorschaugrafik kann unter dem Namen
\cmd{pre\-view\_fullsize.jpg} gespeichert werden und einen Screenshot Ihres
Templates in voller Pracht enthalten. Die Größe der Grafik kann beliebig
gewählt werden, mindestens 800 x 600 Pixel werden empfohlen.

\index{Template-Dateien!treeview/*.gif}%
\index{Template-Dateien!treeview/*.css}%
\ospitem{\cmd{treeview/*.gif, treeview/*.css}}
Wenn ein Redakteur ein Bild in einen Blog-Artikel einfügen möchte, stellt die
Verzeichnisliste der Mediendatenbank, die in einem Popup-Fenster angezeigt
wird, einige Grafiken dar, damit die Verschachtelung der Verzeichnisstruktur gut
erkennbar ist. Dazu greift Serendipity auf das YahooUI-Element \cmd{treeview}
zurück, dessen Grafikdateien im Ordner \cmd{templates/default/treeview} liegen.
Sie können diese Dateien durch eigene Grafiken ersetzen und in Ihrem jeweiligen
Template abspeichern. Die Stylesheet-Datei im gleichen Verzeichnis kontrolliert
die weitere grafische Gestaltung der Verzeichnisliste.

\index{Template-Dateien!img/emoticons}%
\ospitem{\cmd{img/emoticons/}}
Die Smilies des gleichnamigen Textformatierungs-Plugins (siehe Seite
\pageref{emoticate}) werden im Verzeichnis \cmd{img/emoticons/} gespeichert und
können in Ihrem eigenen Template-Verzeichnis beliebig ersetzt werden. Sie können
beispielsweise die Smilie-Grafiken Ihres Lieblingsforums in dieses Verzeichnis
einstellen, die Dateinamen der jeweiligen Smilies sind selbsterklärend.

\index{Template-Dateien!img/back.png}%
\index{Template-Dateien!img/forward.png}%
\index{Template-Dateien!img/down.png}%
\index{Template-Dateien!img/up.png}%
\ospitem{\cmd{img/back.png}, \cmd{img/forward.png}, \cmd{img/down.png}, \cmd{img/up.png}}
Diese Grafiken stellen einen Pfeil dar und werden zum Vor- und Zurückblättern des
Kalenders in der Seitenleiste eingebunden.

\index{Template-Dateien!img/delete.png}%
\index{Template-Dateien!img/rename.png}%
\index{Template-Dateien!img/scale.png}%
\index{Template-Dateien!img/zoom.png}%
\ospitem{\cmd{img/delete.png}, \cmd{img/rename.png}, \cmd{img/scale.png}, \cmd{img/zoom.png}}
Enthält Symbole für Elemente der Mediendatenbank (Bild löschen, Bild umbenennen,
Beschneiden, Vergrößern).

\index{Template-Dateien!img/img\_align\_left.png}%
\index{Template-Dateien!img/img\_align\_right.png}%
\index{Template-Dateien!img/img\_align\_top.png.png}%
\ospitem{\cmd{img/img\_align\_left.png}, \cmd{img/img\_align\_right.png},}
\ospadditem{\cmd{img/img\_align\_top.png}}
Wenn ein Redakteur in einem Blog-Artikel ein Bild aus der Mediendatenbank einbindet,
kann er in einem Auswahldialog bestimmen, wie diese Bilder ausgerichtet sein
sollen. Dazu werden kleine Vorschaugrafiken zur Ausrichtung angezeigt, die der
jeweiligen Grafikdatei wie \cmd{img\_align\_left.png} entsprechen. Wenn Sie das
Aussehen dieser Ausrichtungsoption stärker an das tatsächliche Design Ihres Blogs
anpassen wollen, können Sie diese Vorschaugrafiken austauschen.

\index{Template-Dateien!img/minus.png}%
\index{Template-Dateien!img/plus.png}%
\ospitem{\cmd{img/minus.png, img/plus.png}}
Enthält Grafiken zum Ein- und Ausklappen von Elementen, wie beispielsweise in
der Oberfläche zur Konfiguration von Serendipity.

\index{Template-Dateien!s9y\_banner\_small.png}%
\ospitem{\cmd{img/s9y\_banner\_small.png}}
Zeigt ein kleines Werbebanner für Serendipity, das vom Plugin \emph{Powered
by} (siehe Seite \pageref{plugplugin}) in der Seitenleiste dargestellt werden kann.
 
\index{Template-Dateien!xml.gif}%
\ospitem{\cmd{img/xml.gif}}
An mehreren Stellen des Frontends stellt Serendipity eine kleine Grafik für
RSS-Feeds dar, die typischerweise einem XML-Button ähnelt. Wenn Sie diese Grafik
austauschen wollen, können Sie dies über die Datei \cmd{xml.gif} erreichen.
\end{ospdescription}

\subsection{Bilder im Backend}

Besonders im Backend setzt Serendipity einige Bilder und Symbole ein, die abhängig
vom gewählten Template sein können. Diese Grafiken enthalten oft spezielle Symbole,
die Sie aber problemlos durch andere bevorzugte Symbole austauschen können.

\begin{ospdescription}
\index{Template-Dateien!admin/img/accept.png}%
\index{Template-Dateien!admin/img/admin\_msg\_success.png}%
\ospitem{\cmd{admin/img/accept.png, admin/img/admin\_msg\_success.png}}
Stellt ein grünes Häkchen dar, wenn eine Aktion
erfolgreich war oder bestätigt wurde.

\index{Template-Dateien!admin/img/admin\_msg\_error.png}%
\ospitem{\cmd{admin/img/admin\_msg\_error.png}}
Stellt ein Warndreieck dar, wenn eine Serendipity-Aktion nicht erfolgreich war.

\index{Template-Dateien!admin/img/admin\_msg\_note.png}%
\ospitem{\cmd{admin/img/admin\_msg\_note.png}}
Stellt eine Informationsgrafik dar, wenn eine Serendipity-Aktion einen Hinweis
ausgibt. 

\index{Template-Dateien!admin/img/background.jpg}%
\ospitem{\cmd{admin/img/background.jpg}}
Wird im Standard-Stylesheet als Hintergrundgrafik des Backends eingesetzt.

\index{Template-Dateien!admin/img/banner\_background.png}%
\ospitem{\cmd{admin/img/banner\_background.png}}
Wird im Standard-Stylesheet als Hintergrundgrafik der Überschrift im Backend
eingesetzt. 

\index{Template-Dateien!admin/img/infobar\_background.png}%
\ospitem{\cmd{admin/img/infobar\_background.png}}
Wird im Standard-Stylesheet als Hintergrundgrafik für den Login"=Bereich des
Backends eingesetzt.

\osppagebreak

\index{Template-Dateien!admin/img/big\_delete.png}%
\index{Template-Dateien!admin/img/big\_rename.png}%
\index{Template-Dateien!admin/img/big\_resize.png}%
\index{Template-Dateien!admin/img/big\_rotate\_ccw.png}%
\index{Template-Dateien!admin/img/big\_rotate\_cw.png}%
\index{Template-Dateien!admin/img/bug\_zoom.png}%
\index{Template-Dateien!admin/img/rotate.png}%
\index{Template-Dateien!admin/img/zoom.png}%
\ospitem{\cmd{admin/img/big\_delete.png, admin/img/big\_rename.png,}}
\ospadditem{\cmd{admin/img/big\_resize.png, admin/img/big\_rotate\_ccw.png,}}
\ospadditem{\cmd{admin/img/big\_rotate\_cw.png, admin/img/big\_zoom.png,}}
\ospadditem{\cmd{admin/img/rotate.png, admin/img/zoom.png}}
Mehrere Symbole der Mediendatenbank zum Löschen, Umbenennen, Beschneiden,
Rotieren und Vergrößern.

\index{Template-Dateien!admin/img/button\_background.png}%
\ospitem{\cmd{admin/img/button\_background.png}}
Hintergrundgrafik für Aktions-Buttons im Serendipity-Backend.

\index{Template-Dateien!admin/img/clock.png}%
\ospitem{\cmd{admin/img/clock.png}}
Symbol für die Uhrzeit beim Erstellen/Bearbeiten eines Blog-Artikels.

\index{Template-Dateien!admin/img/clock\_future.png}%
\ospitem{\cmd{admin/img/clock\_future.png}}
Eingefärbtes Symbol für die Uhrzeit, das bei einem Blog-Artikel in der
Backend-Übersicht erscheint, wenn der Artikel noch nicht veröffentlicht wurde.

\index{Template-Dateien!admin/img/configure.png}%
\index{Template-Dateien!admin/img/unconfigure.png}%
\ospitem{\cmd{admin/img/configure.png, admin/img/unconfigure.png}}
Symbol zum Konfigurieren eines Elements (aktiv/inaktiv).

\index{Template-Dateien!admin/img/delete.png}%
\ospitem{\cmd{admin/img/delete.png}}
Symbol zum Löschen eines Elements (Beiträge, Kategorien, Verzeichnisse \ldots).

\index{Template-Dateien!admin/img/downarrow.png}%
\index{Template-Dateien!admin/img/uparrow.png}%
\ospitem{\cmd{admin/img/downarrow.png, admin/img/uparrow.png}}
Symbole zum Verschieben (höher/tiefer) eines Elements.

\index{Template-Dateien!admin/img/edit.png}%
\ospitem{\cmd{admin/img/edit.png}}
Symbol zum Bearbeiten eines Elements.

\index{Template-Dateien!admin/img/folder.png}%
\ospitem{\cmd{admin/img/folder.png}}
Symbol zur Darstellung eines Verzeichnisses.

\index{Template-Dateien!admin/img/grablet.gif}%
\index{Template-Dateien!admin/img/grablet\_over.gif}%
\ospitem{\cmd{admin/img/grablet.gif, admin/img/grablet\_over.gif}}
Symbole zur Darstellung in der Plugin-Verwaltung, um den Maus-Anfassbereich eines
Plugins zu markieren.

\index{Template-Dateien!admin/img/imgedit\_*.gif}%
\ospitem{\cmd{admin/img/imgedit\_\*.gif}}
Mehrere Bilder für den rudimentären Bildeditor von Serendipity, der noch nicht
verwendet wird.

\index{Template-Dateien!admin/img/install.png}%
\ospitem{\cmd{admin/img/install.png}}
Symbol zum Aktivieren eines Plugins oder Templates.
 
\index{Template-Dateien!admin/img/install\_now.png}%
\ospitem{\cmd{admin/img/install\_now.png}}
Symbol zum Installieren eines Plugins oder Templates.

\index{Template-Dateien!admin/img/install\_now\_spartacus.png}%
\ospitem{\cmd{admin/img/install\_now\_spartacus.png}}
Symbol zum Download eines Plugins oder Templates (mittels Spartacus"=Plugin).

\index{Template-Dateien!admin/img/install\_template.png}%
\ospitem{\cmd{admin/img/install\_template.png}}
Symbol zum Aktivieren eines Templates.

\index{Template-Dateien!admin/img/upgrade\_now.png}%
\ospitem{\cmd{admin/img/upgrade\_now.png}}
Symbol zum Aktualisieren eines Plugins/Templates.

\index{Template-Dateien!admin/img/menu\_background.png}%
\index{Template-Dateien!admin/img/menuheader\_background.png}%
\index{Template-Dateien!admin/img/menuitem.png}%
\ospitem{\cmd{admin/img/menu\_background.png,}}
\ospadditem{\cmd{admin/img/menuheader\_background.png,}}
\ospadditem{\cmd{admin/img/menuitem.png}}
Grafiken zur Darstellung des Menüs im Backend-Bereich.

\index{Template-Dateien!admin/img/mime\_unknown.png}%
\ospitem{\cmd{admin/img/mime\_unknown.png}}
Symbol für unbekannte Dateitypen der Mediendatenbank.

\index{Template-Dateien!admin/img/next.png}%
\index{Template-Dateien!admin/img/previous.png}%
\ospitem{\cmd{admin/img/next.png, admin/img/previous.png}}
Symbole zum Vor- und Zurückblättern einer Seite.

\index{Template-Dateien!admin/img/thumbnail.png}%
\ospitem{\cmd{admin/img/thumbnail.png}}
Symbol für die Voransicht einer Grafikdatei.

\index{Template-Dateien!admin/img/user\_admin.png}%
\index{Template-Dateien!admin/img/user\_chief.png}%
\index{Template-Dateien!admin/img/user\_editor.png}%
\ospitem{\cmd{admin/img/user\_admin.png, admin/img/user\_chief.png,}}
\ospadditem{\cmd{admin/img/user\_editor.png}}
Symbole für Benutzergruppen der Redakteure.
\end{ospdescription}

\subsection{JavaScripts}

Jedes Template kann zudem eine kleine Menge von JavaScripts liefern. Diese
werden von Templates jedoch meist selten angepasst und greifen üblicherweise auf
das Standard-Template zurück.

\begin{ospdescription}
\index{Template-Dateien!dragdrop.js}%
\ospitem{\cmd{dragdrop.js}}
JavaScript für die Drag\&Drop-Funktionalitäten in Serendipity, beispielsweise
bei der Plugin-Verwaltung.

\index{Template-Dateien!imgedit.js}%
\ospitem{\cmd{imgedit.js}}
JavaScript für Aktionen des rudimentären Bildeditors, der noch nicht
verwendet wird.

\index{Template-Dateien!YahooUI/treeview/*.js}%
\ospitem{\cmd{YahooUI/treeview/*.js}}
YahooUI JavaScripts zur Darstellung von Verzeichnishierarchien der Mediendatenbank.

\index{Template-Dateien!admin/category\_selector.js}%
\ospitem{\cmd{admin/category\_selector.js}}
JavaScript zum Erweitern der Kategorie-Auswahl beim Bearbeiten eines Blog-Artikels.
\end{ospdescription}



%revised
\index{Bulletproof}%
\index{Template-S@Templates!Bulletproof}%
\index{Template-Variablen!\$freie Optionen@freie Optionen}%
\index{Template-Variablen!\$Bulletproof@Bulletproof}%
\section{Template-Optionen und Bulletproof}
\label{templateoptionen}

Seit Serendipity 1.2 ist ein Template namens \emph{Bulletproof} Bestandteil des
Serendipity-Pakets. Dieses ist auf Seite \pageref{bpdesc} detaillierter
beschrieben und zielt darauf ab, nach Art eines Baukasten-Prinzips dem
Blog-Administrator die Anpassung seines Layouts zu ermöglichen.

Dieses Baukasten-Prinzip wird mittels Template-Optionen umgesetzt. Sobald das
\emph{Bulletproof}-Template aktiviert ist, können Sie im Backend im Me\-nüpunkt
\menu{Aussehen\sm Styles verwalten} die einzelnen Optionen einstellen. Diese
werden ähnlich wie Konfigurationsoptionen eines Plugins dargestellt, pro Zeile
stellen Sie eine Option ein.

\ospfigure{0.98}{img/bulletproof.eps}{Ausschnitt der Template-Optionen des
Bulletproof-Themes}{fig:img/bulletproof.eps}%

Wie auf dem Screenshot (Abbildung \figref{fig:img/bulletproof.eps}) zu erkennen, 
ist beinahe jeder Aspekt des Templates
einstellbar: Wie viele Spalten soll der Inhaltsbereich anbieten, welche
Header-Grafik wird eingebunden, wie werden die Datumsangaben formatiert, wo
erscheinen Artikelfußzeilen und weitere Angaben.

\subsection{Farbwahl}

Eine Besonderheit stellt das Ausklappfeld für die Option \menu{Farbwahl} dar. Im
Hintergrund verwaltet das Bulletproof-Template alle globalen Layout"=Optionen
über eine zentrale Stylesheet-Datei, die \cmd{style.css}. Mittels eines zweiten
Stylesheets können separat die Farben und Gestaltungen einiger Elemente
detaillierter bestimmt werden. Das \cmd{base.css}-Stylesheet wird eingesetzt,
um die grundlegende Formatierung des \emph{kugelsicheren} Layouts jeweils
kompatibel zu allen Browsern festzulegen. Für einige Problembrowser werden
individuelle Stylesheets wie \cmd{ie5.css} und \cmd{ie6.css} mitgeliefert, die
die technischen Besonderheiten für Layout-Umsetzungen abdecken.

Dies hat den großen Vorteil, dass, wenn Sie dem Bulletproof-Framework Ihr eigenes
Design aufsetzen wollen, Sie sich nur um die Erstellung eines eigenen
Farb-Stylesheets kümmern müssen. In dieser Datei legen Sie Ihre eigenen Farben
(und Dinge wie Rahmenstärke und Grafiken) fest, und da Ihre Stylesheet-Datei
unabhängig vom Rest des Bulletproof-Frameworks nachgeladen werden kann, können Sie später
das komplette Bulletproof-Template aktualisieren, ohne Ihre Anpassungen zu
verlieren. 

Ihre eigenen Stylesheet-Dateien speichern Sie einfach unter dem Namen
\cmd{\cmdvar{stylename}\_style.css} im Verzeichnis 
\cmd{templates/bulletproof/}. Der\osplinebreak{} Teil des Dateinamens 
\cmd{stylename} wird daraufhin automatisch als neue Auswahloption 
in dem Ausklappfeld \menu{Farbwahl} der Template-Optionen angeboten.

\subsection{Template-Optionen mittels config.inc.php}
\label{configinc}

Welche Optionen des Weiteren angeboten werden, wird durch die Template"=Datei
\cmd{config.inc.php} festgelegt. In dieser Datei wird eine PHP"=Variable
\cmd{\$template\_config} definiert. Diese Variable stellt ein mehrdimensionales,
verschachteltes Array\footnote{Siehe Seite \pageref{Arrays}.} dar.
Für jede Konfigurationsoption wird ein eigenes Unter-Array in der zweiten Ebene
definiert, das einige fest vorgeschriebene Array-Schlüssel mit Werten füllt.

Ein Beispiel:

\begin{ospcode}
<?php
\$template\_config = array(
  array(
    'var'     => 'name',
    'name'    => 'Ihr Name',
    'type'    => 'string',
    'default' => 'Milla Jovovich'
  ),

  array(
    'var'     => 'ort',
    'name'    => 'Ihr Wohnort',
    'type'    => 'string',
    'default' => 'Remagen'
  )
);
\end{ospcode}

Wenn Sie in einem eigenen Template die Konfigurationsoptionen mittels dieser
PHP-Variable festlegen, müssen Sie dringend darauf achten, dass die Datei
gültigen (\emph{validen, syntaxfehlerfreien}) PHP-Code enthält. Wenn Sie an
einer Stelle andere Anführungszeichen verwenden oder ein Komma vergessen, kann
dies dazu führen, dass Ihr gesamtes Template nicht angezeigt wird. 
Lesen Sie daher, falls nötig, die PHP-Syntax-Anweisungen unter
\cmd{http://de2.php.net/types.array} und \cmd{http://de2.php.net/manual/""en/language.basic-syntax.php}.

Das Array \cmd{\$template\_config} kann beliebig viele Konfigurationsoptionen
deklarieren. Auf diese können Sie später innerhalb jeder Smarty-Template-Datei
wie der \cmd{index.tpl} über die Smarty-Array-Variable
\ospsmarty{\$template\_""option.\cmdvar{optionsname}} zugreifen. Der
\cmd{optionsname} entspricht dabei dem Namen, den Sie der jeweiligen Option im
Array-Schlüssel \cmd{var} gegeben haben (z.\,B.\ \ospsmarty{template\_option.name} 
oder \ospsmarty{template\_option.ort}).

Bei der \cmd{config.inc.php}-Datei des Bulletproof-Frameworks werden für die
Beschreibungen der Konfigurationsoptionen jeweils Sprachkonstanten eingesetzt.
Diese werden in den Dateien wie \cmd{lang\_de.inc.php} festgelegt. Durch deren
Verwendung kann die Template-Konfiguration später in beliebigen Übersetzungen
eingebunden werden, daher ist der Einsatz von Sprachkonstanten sehr zu
empfehlen. Es ist aber auch grundsätzlich möglich, die Beschriftungen 
direkt in den jeweiligen Array-Wert einzufügen, wie es in den Beispielen dieses
Buches zur Vereinfachung auch gemacht wurde. 

Bei der Verwendung von Sprachkonstanten sollte man darauf achten, nur
notwendige Begriffe zu abstrahieren. Häufig gibt es bereits in der zentralen
Serendipity-Sprachdatei (z.\,B.\ \cmd{lang/serendipity\_lang\_de.inc.php})
Konstanten mit ähnlichem Inhalt, auf die Sie auch innerhalb eines Templates
zugreifen können. 

\index{Template-Variablen!\$template\_config}%
\subsection{Aufbau des Arrays \$template\_config}

\label{apiconfigfield2}
Jedes Unter-Array muss folgende Array-Schlüssel definieren\footnote{Diese
Schlüssel entsprechen demselben Schema wie beim Einsatz von
Konfigurationsoptionen eines Plugins mittels der
\cmd{introspect\_config\_item()}-Methode der Plugin-API.}:

\osppagebreak

\begin{ospdescription}
\ospitem{\cmd{var}}
Legt den Namen einer Konfigurationsoption fest. Mit diesem Namen wird der
Konfigurationswert in der Datenbank gespeichert, und zugleich wird hier der Name der
Option festgelegt, wenn in einem Smar\-ty-Template mittels
\ospsmarty{template\_option.\cmdvar{var}} darauf zugegriffen wird.

\ospitem{\cmd{name}}
Enthält die Beschriftung einer Template-Option, die in der
Konfigurationsoberfläche angezeigt wird.

\ospitem{\cmd{type}}
Definiert den Typ einer Konfigurationsoption. Mögliche Typen sind:

\begin{ospdescription}
\ospitem{\cmd{radio}}
Stellt mehrere Radio-Buttons dar. Die möglichen Optionen werden über den
Array-Schlüssel \cmd{radio} angegeben. Die Anzahl der Radio-Buttons pro Zeile
wird über den Array-Schlüssel \cmd{radio\_""per\_row} angegeben. Beispiel:
\begin{ospcode}
array(
  'var'           => 'count',
  'name'          => 'Anzahl der Grafiken',
  'type'          => 'radio',
  'radio'         => array('value' => array('5', '10'),
                           'desc'  => array('Fünf', 'Zehn')),
  'radio\_per\_row' => 2
);
\end{ospcode}

\ospitem{\cmd{boolean}}
Ein Sonderfall der Radio-Button-Konfiguration. Hierbei werden zwei
Standardoptionen (\cmd{Ja=true} und \cmd{Nein=false}) dargestellt. Beispiel:

\begin{ospcode}
array(
  'var'           => 'showcomments',
  'name'          => 'Kommentare anzeigen',
  'type'          => 'boolean',
  'default'       => 'true',
);
\end{ospcode}

\ospitem{\cmd{tristate}}
Ein Sonderfall der Radio-Button-Konfiguration. Hierbei werden drei fest
definierte Felder ausgegeben: \cmd{Ja}, \cmd{Nein} und \cmd{Standard verwenden}.
Beispiel:

\begin{ospcode}
array(
  'var'           => 'popups',
  'name'          => 'Popups verwenden',
  'type'          => 'tristate',
  'default'       => 'default',
);
\end{ospcode}

\ospitem{\cmd{select}}
Stellt ein Auswahlfeld dar. Die möglichen Optionen werden über den
Array-Schlüssel \cmd{select\_values} angegeben. Beispiel:

\begin{ospcode}
array(
  'var'            => 'color',
  'name'           => 'Farbauswahl',
  'type'           => 'select',
  'default'        => 'ff0000',
  'select\_values' => array(
                         'ff0000' => 'Rot', 
                         '00ff00' => 'Grün', 
                         '0000ff' => 'Blau'
                      )
);
\end{ospcode}

\ospitem{\cmd{multiselect}}
Sonderfall des \cmd{select}-Typs. Hier wird statt eines Ausklappfelds ein
Mehrfach-Ausklappfeld ausgegeben. Alle gewählten Menüfelder werden in der
Datenbank als eine Zeichenkette gespeichert, wobei die jeweiligen Werte mit dem
Sonderzeichen \cmd{\^{}} voneinander getrennt sind. Wenn diese Variable später
ausgegeben wird, muss der Inhalt eventuell vorher separiert werden, beispielsweise 
mittels PHP \cmd{explode()}-Funktion. Da dies sehr komplex werden kann, sollte
anstelle einer Mehrfach"=Auswahlbox eher der Einsatz anderer Konfigurationstypen
in Betracht gezogen werden.

Die Größe des Mehrfach-Ausklappfeldes wird über den Array-Schlüssel
\cmd{select\_size} bestimmt. Beispiel:

\begin{ospcode}
array(
  'var'             => 'color',
  'name'            => 'Farbauswahl',
  'type'            => 'select',
  'default'         => 'ff0000',
  'select\_values'  => array(
                         'ff0000' => 'Rot', 
                         '00ff00' => 'Grün', 
                         '0000ff' => 'Blau'
                       ),
  'select\_size'    => '2'
);
\end{ospcode}

\ospitem{\cmd{string}}
Stellt ein einfaches, einzeiliges Text-Eingabefeld dar, in das der Benutzer
beliebige Inhalte eintragen kann. Beispiel:

\begin{ospcode}
array(
  'var'          => 'name',
  'name'         => 'Ihre große Liebe heißt\ldots',
  'type'         => 'string',
  'default'      => 'Emba',
);
\end{ospcode}

\ospitem{\cmd{text}}
Stellt eine große, mehrzeilige Text-Eingabebox dar, in die der Benutzer beliebige
Inhalte eintragen kann. Beispiel: 

\begin{ospcode}
array(
  'var'          => 'biographie',
  'name'         => 'Tragen Sie hier Ihren Lebenslauf ein',
  'type'         => 'string',
  'default'      => "Lorem ipsum, und davon 'ne große Menge.",
);
\end{ospcode}

\ospitem{\cmd{html}}
Stellt eine große, mehrzeilige Text-Eingabebox dar, in die der Benutzer beliebige
Inhalte eintragen kann. Im Gegensatz zum \cmd{text}-Typen wird für dieses
Eingabefeld der WYSIWYG-Editor (falls vom Benutzer aktiviert) eingebunden. Beispiel: 

\begin{ospcode}
array(
  'var'       => 'lovesong',
  'name'      => 'Songtext ihres Lieblingsliedes 
                  (HTML erlaubt)',
  'type'      => 'string',
  'default'   => '<strong>Wir sind gekommen, um zu bleiben, 
                  und bloggen hier nichts mehr weg</strong>'
);
\end{ospcode}

\ospitem{\cmd{content}}
Eine Option des Typs \cmd{content} stellt keine direkte Eingabemöglichkeit
dar, sondern ermöglicht es, in der Konfigurationsmaske des Serendipity-Backends
beliebigen HTML-Code auszugeben. Dies kann helfen, um beispielsweise die
Darstellung der Template-Optionen mit eigener HTML-Formatierung anzureichern und
optisch ansprechend darzustellen. Da diese Option später keinen vom Benutzer
eintragbaren Inhalt enthält, entfällt die Angabe der meisten erforderlichen
Array-Schlüssel. Beispiel:

\begin{ospcode}
array(
  'type'     => 'content',
  'default'  => '<table><tr><th colspan="2">Hinweis</th></tr>
                   <tr><td><img src="/pic.jpg" /></td><td>
                   Isotopp-Sturm voraus.</td></tr></table>'
);
\end{ospcode}

\ospitem{\cmd{custom}}
Falls das Template eine eigene Darstellung der HTML"=Formularelemente erreichen
will, können Sie den Typ \cmd{custom} verwenden und das notwendige
HTML-Konstrukt manuell über den Array-Schlüssel \cmd{custom} ausgeben.
Serendipity trägt dabei automatisch den gespeicherten Inhalt der
Konfigurationsoption (anhand \cmd{var}-Schlüssel benannt) in ein
\cmd{hidden}-Formularfeld ein. Auf dieses Formularfeld kann z.\,B.\ mittels 
JavaScript-Code in Ihrer individuellen Ausgabe über 
\cmd{document.getElementById(""'config\_template\_\cmdvar{var}')} zugegriffen
werden. Beispiel:
 
\begin{ospcode}
array(
  'type'     => 'custom',
  'var'      => 'mycustom',
  'custom'   => '<script type="text/javascript">
                 \$ajax = new AjaxForm();
                 \$ajax.onUpdateField =
                 document.getElementById("config\_template\_myc
ustom").value;
                 \$ajax.generate();
                        </script>'
);
\end{ospcode}

\ospitem{\cmd{hidden}}
Stellt ein verstecktes Formularfeld dar. Dieses kann der Benutzer nicht
selbständig ändern, daher kann diese Variante gewählt werden, wenn man eine
Variable mit fest definiertem Inhalt über Smarty aufrufen möchte. Der Wert wird
dabei über den Array-Schlüssel \cmd{value} übergeben, im Gegensatz zum sonst
üblichen \cmd{default}. Beispiel:

\begin{ospcode}
array(
  'type'            => 'hidden',
  'var'             => 'fixedVar',
  'value'           => \$\_SERVER['HTTP_HOST']
);
\end{ospcode}

\ospitem{\cmd{media}}
Stellt ein Eingabefeld dar, das der Benutzer mit der URL einer Datei aus der
Serendipity-Mediendatenbank ausfüllen kann. Dies ist z.\,B.\ sehr hilfreich, wenn für
ein Template eine Header-Grafik aus dem Pool der Mediendatenbank gewählt werden
soll, ohne dass der Benutzer eine URL eingeben muss. Ein Klick auf einen
zusätzlichen Button öffnet dabei die Mediendatenbank. 

Zusätzlich zu dem Button wird ein Vorschaubild eingebunden, das das ausgewählte
Bild in einem kleinen Bereich darstellt. Die beiden Array-Schlüssel \cmd{preview\_width}
und \cmd{preview\_height} geben dabei an, wie groß dieses Vorschaubild maximal 
sein soll (standardmäßig 400 Pixel breit und 100 Pixel hoch). Beispiel:

\begin{ospcode}
array(
  'type'           => 'media',
  'var'            => 'headerbild',
  'preview\_width'  => '200px',
  'preview\_height' => '50px',
  'default'      => serendipity\_getTemplateFile('header.jpg')
);
\end{ospcode}

Hinweis: Als Standardwert wird eine Serendipity-API-Funktion aufgerufen, die
den vollständigen Pfad zu der Datei \cmd{header.jpg} im aktuellen
Template-Verzeichnis zurückliefert.

\ospitem{\cmd{seperator}}
Gibt lediglich einen Trennbereich ohne Inhalt aus.
\end{ospdescription}

%GH:Vielleicht sieht diese verschachtelte Darstellung nacher im Buch total
%GH:dumm aus, und man versteht nicht, in welcher Einrückungsebene die
%GH:folgenden Listenpunkte stehen?
%FM@Satz: bitte Einrückungsebene beachten

\ospitem{\cmd{default}}
Enthält die Standardbelegung einer Variable, wenn der Benutzer noch keinen
eigenen Wert eingegeben hat.

\ospitem{\cmd{select\_values}}
Enthält ein Array mit möglichen Werten zur Befüllung einer Konfigurationsoption
vom Typ \cmd{select} oder \cmd{multiselect}. Der Schlüssel dieses Arrays enthält
den Wert, der für das \cmd{<option value="{}\cmdvar{\ldots}"{}>}-HTML-Feld
ausgegeben wird. Der Wert des Arrays enthält die Beschreibung des
\cmd{<option>\cmdvar{\ldots}</option>}-Feldes.

\ospitem{\cmd{select\_size}}
Bestimmt die Größe eines Mehrfach-Auswahlfeldes, falls \cmd{type=mul\-tiselect}.
Standardwert: 1
 
\ospitem{\cmd{radio}}
Enthält ein Array mit möglichen Werten zur Befüllung einer Konfigurationsoption
vom Typ \cmd{radio}. Abweichend von der Angabe der \cmd{select\_values} werden
hier zwei Array-Schlüssel namens \cmd{value} und \cmd{desc} vorgegeben, die
jeweils ein Array als Wert besitzen müssen. Das Array für den Schlüssel
\cmd{value} enthält die Werte eines Radio-Buttons, das Array \cmd{desc}
enthält die Beschriftungen der Radio-Buttons.

\ospitem{\cmd{radio\_per\_row}}
Legt die Anzahl der Radio-Buttons pro Zeile fest, wenn die jeweilige
Konfigurationsoption vom Typ \cmd{radio} ist. Standardwert: 2.

\ospitem{\cmd{preview\_width, preview\_height}}
Enthält die Vorschaugröße bei der Ausgabe einer Konfigurationsoption
vom Typ \cmd{media}. Die Angabe erfolgt in einem CSS-kompatiblen Wert wie
\cmd{400px} oder \cmd{1.2em}. Standardwert: \cmd{400px} Breite und \cmd{100px}
Höhe.
\end{ospdescription}

Wenn für den Array-Schlüssel \cmd{type} keiner der oben aufgeführten Werte
eingetragen wurde, wird eine derartige Konfigurationsoption an die
Plugin-Schnittstelle weitergegeben. So können eigene Plugins
über einen eigenen Event-Hook (\cmd{backend\_pluginconfig\_\cmdvar{typwert}}
zugreifen\footnote{Als Werte für \cmd{\$eventData} wird ein Array mit allen
Schlüsseln des jeweiligen Konfigurations-Unter-Arrays übergeben.} und die Ausgabe des
notwendigen HTML-Codes für die Konfigurationsoption übernehmen.

\subsection{Dynamische Template-Optionen}

Am Ende der \cmd{config.inc.php} benutzt das Bulletproof-Template einen kleinen
Trick, um abhängig von den vorher getätigten Konfigurationsoptionen weitere
Optionen einzufügen. Konkret werden dabei abhängig von der Option \menu{Anzahl
der Links in der Navigationsleiste} jeweils Eingabeboxen für die Beschreibung
und URL des jeweiligen Links als Template-Option dargestellt.

Der Trick besteht darin, dass mittels PHP-Code die bisherige Konfiguration des
Benutzers eingelesen wird:

\begin{ospcode}
\$template\_loaded\_config = serendipity\_loadThemeOptions(\$template\_config,
\$serendipity['smarty\_vars']['template\_option']);
\end{ospcode}

Diese Zeile liest die aktuellen Konfigurationswerte in das PHP-Array
\cmd{\$tem\-plate\_loaded\_config} ein. Kurz darauf werden mittels einer
\cmd{for}-Schleife abhängig von der Anzahl der Navigationslinks pro Link zwei
weitere Konfigurationsoptionen in das Array \cmd{template\_config} eingefügt:

\begin{ospcode}
\$navlinks = array();
for (\$i = 0; \$i < \$template\_loaded\_config['amount']; \$i++) \{
    \$navlinks[] = array(
        'title' => \$template\_loaded\_config['navlink' . \$i . 'text'],
        'href'  => \$template\_loaded\_config['navlink' . \$i . 'url']
    );
    \$template\_config[] = array(
        'var'           => 'navlink' . \$i . 'text',
        'name'          => NAV\_LINK\_TEXT . ' #' . \$i,
        'type'          => 'string',
        'default'       => 'Link #' . \$i,
        );
    \$template\_config[] = array(
        'var'           => 'navlink' . \$i . 'url',
        'name'          => NAV\_LINK\_URL . ' #' . \$i,
        'type'          => 'string',
        'default'       => '#',
    );
\}

\$serendipity['smarty']->assign\_by\_ref('navlinks', \$navlinks);
\end{ospcode} 

Die Variable \cmd{\$navlinks} liest die bereits konfigurierten Navigationslinks
aus und wird am Ende direkt als Smarty-Variable durchgereicht, damit
sie innerhalb der \cmd{index.tpl}-Datei leicht
durchlaufen und ausgegeben werden kann. Der Platzhalter \cmd{\$i} wird innerhalb
der Schleife als fortlaufender Index (beginnend mit der 0) behandelt.

Die Liste aller Bulletproof-Template-Optionen wird innerhalb der
Konfigurationsoberfläche ausführlich beschrieben und ist 
größtenteils bereits selbsterklärend.

\index{Seitenleisten!frei definierbare}%
\subsection{Frei definierbare Seitenleisten}
\label{customsidebars}

In der Plugin-Verwaltung Serendipitys sehen Sie standardmäßig Bereiche für eine
linke, eine rechte und eine \emph{versteckte} Seitenleiste. Die meisten
Serendipity-Templates unterstützen diese drei Seitenleisten, einige Templates
stellen die linke und rechte Seitenleiste jedoch direkt untereinander dar.

Innerhalb der \cmd{config.inc.php}-Datei eines Templates kann festgelegt werden,
welche und wie viele Seitenleisten-Bereiche das Design anbietet. Danach richtet
sich auch die Darstellung der Plugin-Verwaltungsoberfläche. Wenn ein Template
vier Seitenleisten (links, rechts, oben, unten) unterstützt, würden in der
Oberfläche zum Installieren und Verschieben der Seitenleisten"=Plugins auch diese
vier Bereiche angezeigt.

Wenn Sie einmal Plugins auf zusätzliche Seitenleisten wie \cmd{oben} und
\cmd{unten} verteilt haben und Ihr Blog später auf ein Template umstellen, das
nur die üblichen Seitenleisten unterstützt, wird Serendipity die nicht mehr
zugeordneten Seitenleisten-Plugins in einem eigenständigen Container anzeigen.
Von dort müssen Sie die Plugins dann wieder in die vorhandenen Seitenleisten
einordnen. 

Das Template muss die Namen der jeweiligen Seitenleisten über die Variable
\index{Template-Variablen!\$sidebars}%
\cmd{\$sidebars} in der \cmd{config.inc.php} angeben:

\begin{ospcode}
<?php
\$sidebars = 'left,right,hide,oben,unten';
?>
\end{ospcode}

An welcher Stelle die jeweiligen Plugins eines Seitenleistenbereichs ausgegeben
werden, kontrolliert die Smarty-Template-Datei \cmd{index.tpl} wie folgt:

\begin{ospcode}
<div id="serendipityLeftSideBar">
  \{serendipity\_printSidebar side="left"\}
</div>
<div id="serendipityObenSideBar">
  \{serendipity\_printSidebar side="oben"\}
</div>
\end{ospcode}

Die Dokumentation der Smarty-Funktion
\ospsmarty{serendipity\_printSidebar} finden Sie auf Seite \pageref{printsidebar}.

Der Name einer Seitenleiste darf keine Leer- oder Sonderzeichen enthalten und
darf maximal 6 Zeichen lang sein.

Falls die Liste der Seitenleisten-Elemente über eine
Template"=Konfigurationsoption bestimmt werden soll, kann dies anstatt mit der
\cmd{\$sidebars}-Variable auch wie folgt erreicht werden:

\begin{ospcode}
array(
  'var'            => 'sidebars',
  'name'           => 'Seitenleisten',
  'type'           => 'select',
  'select\_values' => array(
                        'left,right,hide' => 'Standard',
                        'oben,unten' => 'Nur oben, unten',
                        'left,right,hide,oben,unten' => 'Vollständig'
                      )
);
\end{ospcode}

Innerhalb der Templates kann \ospsmarty{template\_option.sidebars}
abgefragt werden:

\begin{ospcode}
\{if \$template\_option.sidebars == 'left,right,hide'\}
\ldots
\{/if\}

\{if \$template\_option.sidebars == 'left,right,hide,oben,unten'\}
\ldots
\{/if\}
\end{ospcode}



%revised
\index{Template-S@Templates!bearbeiten}%
\index{Smarty!Variablen}%
\section{Template-Variablen}
\label{Templates bearbeiten}

Innerhalb der Smarty-Template-Dateien können Sie auf zahlreiche Variablen
zugreifen, die im jeweiligen Kontext von Serendipity belegt werden.
Diese Variablen sind unterteilt in globale Variablen, die Sie innerhalb jeder
Smarty-Template-Datei verwenden können, und in Variablen, die nur innerhalb einer
speziellen Datei wie z.\,B.\ der \cmd{commentform.tpl} verfügbar sind.

Abgesehen von den Variablen stehen Ihnen in allen Smarty-Template"=Dateien auch
besondere, von Serendipity eingebundene Funktionen und Modifier zur Verfügung.

\index{Boolean}%
Im Folgenden finden Sie eine detaillierte Übersicht dieser Objekte. Jeder
Variable ist zugeordnet, an welcher Stelle im PHP-Code sie zugewiesen wird, von
welchem Typ die Variable ist (Zeichenkette, Zahl, eindimensionales Array,
mehrdimensionales Array, Objekt oder  
Boolean\footnote{Boolesche Werte
stehen für \cmd{true} (\emph{Ja}) oder \cmd{false} (\emph{Nein}).}) und ob die
Variable nur in einer bestimmten Datei abgerufen werden kann.
%FM@GH auf Deutsch Boolesche, lt. Duden

\index{Mehrdimensionale Arrays}%
\index{Array!Schlüssel}%
Wenn die Schlüsselpaare eines mehrdimensionalen Arrays dokumentiert werden, wird
die erste Dimension eines Arrays meist beispielhaft erwähnt, z.\,B.\ mittels
\ospsmarty{entries.X.timestamp}. Üblicherweise werden solche verschachtelten
Arrays niemals mit einem festen Index (\cmd{X}) aufgerufen, sondern immer
innerhalb einer Schleife, die dynamisch den Inhalt des Schlüssels \cmd{X} einer
Variable wie \cmd{\$index} zuweist. Das heißt, dass man auf eine derartige
Variable eher wie folgt zugreifen würde:

\begin{ospcode}
\{foreach from=\$entries item=\$entry key=\$index\}
  Datum: \{\$entry.timestamp\}
\{/foreach\}
\end{ospcode}

Somit wird das durchnummerierte Unter-Array der Variable \ospsmarty{entry}
zugewiesen und der laufende Index \cmd{X} würde durch die Variable
\cmd{\$index} abgedeckt. Auf den eigentlichen Unterschlüssel \cmd{timestamp}
wird so nur über das zugewiesene Array mittels \ospsmarty{entry.timestamp} zugegriffen. 


%revised
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------
\index{Template-Variablen!\$globale@globale}%
\subsection{Globale Variablen}
\label{smartyvariablen}
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------

Die Liste der folgenden Variablen gilt für alle Template-Dateien. Die Ausgabe
der Templates erfolgt ausgehend von der \cmd{index.tpl}. Weiterführende Inhalte
werden mittels der Variable \ospsmarty{CONTENT} über die Datei \cmd{content.""tpl}
eingebunden. Innerhalb des \cmd{content.tpl}-Templates werden Artikellisten über
die Variable \ospsmarty{ENTRIES} mittels der Datei \cmd{entries.tpl} geparst.

\begin{ospdescription}
\ospitem{\ospismarty{admin\_view}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{admin/entries.tpl, admin/index.tpl}
\ospsmartydoc{include/functions\_entries\_admin.inc.php}
Für die Template-Dateien des Backends ist diese Variable auf einen Wert gesetzt,
der den Bereich angibt, innerhalb dessen das Template ausgegeben wird. Derzeit
wird nur der Wert \cmd{entryform} (für die Ausgabe des Artikel-Editors)
unterstützt, zukünftige können folgen, sobald weitere Bereiche des
Backends auf Smarty-Templates umgesetzt werden.

\ospitem{\ospismarty{admin\_vars}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{admin/entries.tpl, admin/index.tpl}
\ospsmartydoc{serendipity\_admin.php}
Enthält einige Variablen mit Werten, die für das Backend benötigt werden.
Folgende Array-Schlüssel sind verfügbar:

\begin{ospdescription}
\ospitem{\ospismarty{admin\_vars.out}}
\ospsmartytyp{Eindimensionales Array}
Kann zusätzliche HTML-Ausgaben von Plugins enthalten, die bei der Darstellung
des Login-Fensters zum Backend-Bereich eingebunden werden können.

\ospitem{\ospismarty{admin\_vars.no\_create}}
\ospsmartytyp{Boolean}
Bei eingeloggten Benutzern, die keine Rechte haben, Einträge zu erstellen (siehe
Seite \pageref{no-create}), enthält diese Variable den Wert \cmd{true}. 
In diesem Fall werden viele der Menüpunkte des Backends ausgeblendet.

\ospitem{\ospismarty{admin\_vars.version\_info}}
\ospsmartytyp{Zeichenkette}
Enthält die HTML-Ausgabe der aktuellen Serendipity- und PHP-Version für den
Footer des Backends.

\ospitem{\ospismarty{admin\_vars.css\_file}}
\ospsmartytyp{Zeichenkette}
Enthält die URL zu der CSS-Datei (\cmd{style.css}), die das Style\-sheet für das Backend einbindet.

\ospitem{\ospismarty{admin\_vars.admin\_css\_file}}
\ospsmartytyp{Zeichenkette}
Enthält die URL zu der CSS-Datei (\cmd{pluginmanager.css}), die ein 
Stylesheet für die Plugin-Verwaltung des Backends einbindet.

\ospitem{\ospismarty{admin\_vars.main\_content}}
\ospsmartytyp{Zeichenkette}
Enthält den HTML-Code für den Inhaltsbereich des Backends. Der Inhalt aller
Funktionen bis auf die Erstellung/Bearbeitung eines Artikels erfolgt nicht
mittels Smarty-Templates, sondern mit fest eingebautem PHP-Code, und kann daher nur
als zentrale Variable in das Grundgerüst der \cmd{admin/index.tpl}-Datei
eingebunden werden.

\ospitem{\ospismarty{admin\_vars.no\_banner}}
\ospsmartytyp{Boolean}
Gibt an, ob das Kopfbild im Backend-Bereich eingebunden werden soll. Mittels der
URL-Variable \cmd{serendipity\_admin.php?""serendipity[noBanner]=true} können
Plugins oder andere\osplinebreak{} Teile des Backends bestimmen, ob dieser Bereich
aktiviert oder deaktiviert werden soll. Wenn \ospsmarty{admin\_vars.no\_banner}
den Wert \cmd{true} enthält, wird das Kopfbild nicht eingebunden.

\ospitem{\ospismarty{admin\_vars.no\_sidebar}}
\ospsmartytyp{Boolean}
Gibt an, ob das Menü der Seitenleiste im Backend-Bereich eingebunden werden
soll. Mittels der URL-Variable
\cmd{serendipity\_""admin.php?serendipity[noBanner]=true} können
Plugins\osplinebreak{} oder andere Bestandteile des Backends bestimmen, ob dieses Menü
aktiviert oder deaktiviert werden soll. Enthält \ospsmarty{admin\_""vars.no\_sidebar}
den Wert \cmd{true}, werden alle Menüpunkte versteckt.

\ospitem{\ospismarty{admin\_vars.post\_action}}
\ospsmartytyp{Zeichenkette}
Enthält die URL-Variable \cmd{\$serendipity['POST']['action']}, um dessen Inhalt
innerhalb des Templates prüfen zu können. Diese Variable enthält Anweisungen,
welche Aktion im Backend gerade ausgeführt wird.

\ospitem{\ospismarty{admin\_vars.is\_logged\_in}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn der aktuelle Benutzer bereits eingeloggt ist.

\ospitem{\ospismarty{admin\_vars.admin\_installed},}
\ospadditem{\ospismarty{admin\_vars.use\_installer}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn Serendipity bereits installiert wurde. Ist
dieser Wert nicht gesetzt, wird die Installationsroutine Serendipitys aufgerufen.

\ospitem{\ospismarty{admin\_vars.self\_info}}
\ospsmartytyp{Zeichenkette}
Enthält eine HTML-Ausgabe, die angibt, welchen Benutzerrang und Namen der
aktuell eingeloggte Benutzer hat.

\end{ospdescription}

\ospitem{\ospismarty{is\_preview}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/functions\_config.inc.php, serendi\-pity\_iframe()}
Enthält den Wert \cmd{true}, falls die Vorschau eines einzelnen Artikels im
Design des Frontends angezeigt werden soll. Die Vorschau wird im Backend eingebettet.


\index{Konstanten}%
\index{Sprachkonstanten}%
\ospitem{\ospismarty{CONST}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{*.tpl}
\ospsmartydoc{lang/(UTF-8/)serendipity\_lang\_XX.inc.php}
Das Smarty-Array \ospsmarty{CONST} ist nur eine Umleitung, um den Zugriff auf
Sprachkonstanten zu ermöglichen. Diese kapselt Smarty sonst üblicherweise in
einem \ospsmarty{smarty.const}-Array. Um Tipparbeit zu vermeiden (und aus
Gründen der Rückwärtskompatibilität) nutzt Serendipity stattdessen nur
\ospsmarty{CONST}. Die Array-Schlüssel entsprechen dabei dem jeweiligen Namen
der Sprachkonstante, der in einer Sprachdatei wie
\cmd{lang/serendipity\_lang\_de.inc.php} festgelegt wird.
Dargestellte Meldungen sollten in einer Smarty-Template-Datei niemals direkt
eingebunden werden, sondern immer über das Einfügen von Sprachkonstanten
(notfalls mittels eigener \cmd{lang\_de.""inc.php}-Datei, wie auf 
Seite \pageref{api-lang} und \pageref{api-lang2} beschrieben).

\ospitem{\ospismarty{startpage}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Enthält den Wert \cmd{true}, wenn Serendipity die Startseite des Blogs darstellt.

\ospitem{\ospismarty{uriargs}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Enthält eine Liste der URL-Pfadkomponenten der aktuellen Seite.

\ospitem{\ospismarty{head\_link\_stylesheet}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält die URL zur zentralen Stylesheet-Datei.

\ospitem{\ospismarty{head\_charset}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den aktuell konfigurierten Zeichensatz der HTML-Ausgabe (meist
\cmd{UTF-8} oder \cmd{ISO-8859-1}).

\ospitem{\ospismarty{head\_version}, \ospismarty{serendipityVersion}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält die Serendipity-Versionsnummer.

\ospitem{\ospismarty{head\_title}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Text, der im Titelbereich des Blogs angezeigt wird. Dieser kann vom
konfigurierten Titel des Blogs abweichen, wenn beispielsweise die Detailansicht
eines Artikels angezeigt wird.

\ospitem{\ospismarty{head\_subtitle}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Text, der im Untertitelbereich des Blogs angezeigt wird. Dieser kann vom
konfigurierten Untertitel des Blogs abweichen, wenn beispielsweise die Detailansicht
eines Artikels angezeigt wird. In diesem Fall wird der Titel des Blogs
standardmäßig als Untertitel eingebunden.

\ospitem{\ospismarty{blogTitle}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Titel des Blogs, wie er in der Konfiguration angegeben wurde.

\ospitem{\ospismarty{blogSubTitle}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Untertitel des Blogs, wie er in der Konfiguration angegeben wurde.

\ospitem{\ospismarty{blogDescription}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält die Beschreibung des Blogs, wie sie in der Konfiguration
angegeben wurde.

\ospitem{\ospismarty{is\_xhtml}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn Serendipity XHTML-Ausgaben produzieren soll. In
älteren Serendipity-Versionen war diese Variable konfigurierbar, mittlerweile
ist sie immer fest auf \cmd{true} gesetzt.

\ospitem{\ospismarty{use\_popups}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn in der Serendipity-Konfiguration die Benutzung
von Popups erlaubt wurde.

\ospitem{\ospismarty{is\_embedded}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn in der Serendipity-Konfiguration die
eingebettete Nutzung aktiviert wurde. In so einem Fall geben Templates keinen
HTML-Kopf- und -Fußbereich aus.

\ospitem{\ospismarty{is\_raw\_mode}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn ein altes Serendipity-Template (mit
\cmd{layout"".php}-Datei) verwendet wird und keine Smarty-Dateien ausgewertet
werden müssen.

\ospitem{\ospismarty{is\_logged\_in}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn ein eingeloggter Redakteur das Frontend aufruft.

\ospitem{\ospismarty{entry\_id}}
\ospsmartytyp{Zahl}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Kann die ID eines Blog-Artikels enthalten, wenn gerade die Detailansicht eines
Artikels aufgerufen wird.

\ospitem{\ospismarty{is\_single\_entry}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Ist auf \cmd{true} gesetzt, wenn die Detailansicht eines Artikels aufgerufen wird.

\ospitem{\ospismarty{serendipityHTTPPath}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den HTTP-Pfad zum Serendipity-Blog.

\ospitem{\ospismarty{serendipityBaseURL}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält die vollständige URL zum Serendipity-Blog.

\ospitem{\ospismarty{serendipityRewritePrefix}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Falls im Blog keine URL-Umformung (siehe Seite \pageref{urlformung})
verfügbar ist, enthält diese Variable ein Präfix (\cmd{index.php?/}), das vor
jede URL gesetzt wird, um aussagekräftige URLs zu imitieren.
 
\ospitem{\ospismarty{serendipityIndexFile}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Namen der Index-Datei zur Darstellung des Blogs, wie in der
Serendipity-Konfiguration festgelegt. Beim Einsatz der eingebetteten Nutzung 
(siehe Seite \pageref{embedding})
zeigt diese Variable meist auf eine eigene Wrapper-Datei.

\ospitem{\ospismarty{lang}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält das Kürzel der aktuell gewählten Sprachdatei (z.\,B.\ \cmd{de}, \cmd{en} usw.).

\ospitem{\ospismarty{category}}
\ospsmartytyp{Zahl}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Falls eine Kategorie-Übersicht dargestellt wird, enthält diese Variable die ID
dieser Kategorie.

\ospitem{\ospismarty{category\_info}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Falls eine Kategorie-Übersicht dargestellt wird, enthält diese Variable ein
Array mit den Metadaten der Kategorie. Die möglichen Arrayschlüssel sind in der
Liste auf Seite \pageref{db-categories} aufgeführt.

\ospitem{\ospismarty{template}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Namen des Template-Verzeichnisses, das zur Darstellung verwendet wird.

\ospitem{\ospismarty{dateRange}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Enthält den Wert der \cmd{\$serendipity['range]}-Variable. Diese legt den
Zeitraum fest, der für die Auswahl der dargestellten Artikel ausgewertet wird.

\ospitem{\ospismarty{template\_option}}
\index{Template-Optionen!Variablen}%
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl}
\ospsmartydoc{include/functions\_smarty.inc.php}
Falls das aktuell gewählte Template über Konfigurationsoptionen verfügt, sind
die gespeicherten Werte über die Variable \ospsmarty{template\_""option}
zugänglich. Die jeweils vorhandenen Arrayschlüssel müssen der
\cmd{config.inc.php}-Datei des Templates entnommen werden; 
siehe auch Seite \pageref{templateoptionen}.

\label{global-view}%
\ospitem{\ospismarty{view}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Gibt an, welchen Seiteninhalt der Benutzer angefordert hat. Abhängig davon
werden unterschiedliche Template-Dateien eingelesen. Die Template-Dateien können
diese Variable prüfen, um festzustellen, welche Art Ausgaben angefordert werden.

Mögliche Werte sind:

\begin{ospdescription}
\ospitem{\cmd{404}} für die Ausgabe einer Übersicht, wenn die aktuelle URL ungültig ist.
\ospitem{\cmd{plugin}} wenn ein Ereignis-Plugin (wie z.\,B.\ die \emph{statischen
Seiten}) die Ausgabe übernimmt.
\ospitem{\cmd{feed}} wenn die RSS-Feeds dargestellt werden.
\ospitem{\cmd{archives}} wenn Übersichtsseiten zu bestimmten Monaten, Tagen, Jahren
dargestellt werden.
\ospitem{\cmd{archive}} wenn die kurzen Übersichtsseiten für Monate oder Jahre
dargestellt werden.
\ospitem{\cmd{entry}} wenn eine Artikel-Detailseite dargestellt wird.
\ospitem{\cmd{admin}} wenn das Backend dargestellt wird.
\ospitem{\cmd{categories}} wenn Übersichtsseiten zu einer Kategorie angezeigt werden.
\ospitem{\cmd{authors}} wenn Übersichtsseiten zu einem speziellen Autor angezeigt werden.
\ospitem{\cmd{search}} wenn Ergebnisse der Volltextsuche angezeigt werden.
\ospitem{\cmd{css}} wenn das Stylesheet ausgegeben wird.
\ospitem{\cmd{comments}} wenn Übersichtsseiten von Kommentaren dargestellt werden.
\ospitem{\cmd{start}} wenn die Startseite dargestellt wird.
\end{ospdescription}

\ospitem{\ospismarty{content\_message}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Enthält etwaige Meldungen (inklusive HTML-Code), die auf der Übersichtsseite dargestellt
werden, wenn z.\,B.\ die Volltextsuche ausgeführt wurde.

\ospitem{\ospismarty{searchresult\_error}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Wenn die Volltextsuche nicht ausgeführt werden konnte, enthält diese Variable
den Wert \cmd{true}.

\ospitem{\ospismarty{searchresult\_noEntries}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Wenn die Volltextsuche ausgeführt wurde, aber keine Ergebnisse gefunden wurden, 
enthält diese Variable den Wert \cmd{true}.

\ospitem{\ospismarty{searchresult\_results}}
\ospsmartytyp{Boolean}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Wenn die Volltextsuche ausgeführt wurde und mindestens ein Ergebnis vorliegt, 
enthält diese Variable den Wert \cmd{true}.

\ospitem{\ospismarty{raw\_data}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{index.php}
Standardmäßig werden alle Serendipity-Inhalte mittels Smarty"=Funktionen und
Smarty-Templates zusammen gebündelt und dann als vollständige HTML-Seite
ausgegeben. Dennoch kann es passieren, dass einige Ereignis-Plugins rohe
HTML-Ausgaben innerhalb ihrer PHP-Struktur ausgeben. Diese sind zur
Smarty-Ausgabe inkompatibel; sie werden daher mittels PHP
\emph{Output-Buffering}-Funktionalität zusammen gebündelt und letztendlich
innerhalb der Smarty-Variable \ospsmarty{raw\_data} gespeichert und ausgegeben.

\ospitem{\ospismarty{leftSideBarElements}, \ospismarty{rightSideBarElements}}
\ospsmartytyp{Zahl}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Enthält die Anzahl an Seitenleisten-Plugins für die linke und rechte Seitenleiste.

\ospitem{\ospismarty{CONTENT}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{*.tpl (Frontend)}
\ospsmartydoc{include/genpage.inc.php}
Enthält den geparsten HTML-Code des \cmd{content.tpl}-Templates.

\end{ospdescription}


%revised
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------
\subsection{Dateispezifische Variablen}
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------

In dieser Liste werden nur die vom Serendipity-Kern verwendeten Variablen
ausgeführt. Zusätzlich können in den einzelnen Template-Dateien auch abhängig
von den eingesetzten Ereignis-Plugins weitere Variablen zur Verfügung stehen.
Falls ein Plugin weitere Variablen einbindet, wird darauf separat in der
Beschreibung der einzelnen Ereignis-Plugins hingewiesen, wie beispielsweise beim
\emph{Freie Artikel-Tags}-Plugin auf Seite \pageref{freetag}.


%revised
%---------------------------------------------------------------------------
\index{Template-Dateien!entries.tpl}%
\index{Template-Dateien!entries\_summary.tpl}%
\subsubsection{entries.tpl, entries\_summary.tpl}
\label{entries.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{entries.tpl} ist die zentralste Datei für die
Darstellung von Blog-Artikeln im Frontend. Alle für diese Datei aufgeführten
Variablen sind zwar grundsätzlich auch innerhalb anderer Template-Dateien
(\cmd{index.tpl, content.tpl}) verfügbar, machen aber üblicherweise nur im
Kontext der Datei \cmd{entries.tpl} Sinn.

\begin{ospdescription}
\ospitem{\ospismarty{footer\_prev\_page}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Enthält die URL zur vorigen Seite innerhalb einer Artikelübersicht. Wird
innerhalb der Fußzeile dargestellt.

\ospitem{\ospismarty{footer\_next\_page}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Enthält die URL zur nächsten Seite innerhalb einer Artikelübersicht. Wird
innerhalb der Fußzeile dargestellt.

\ospitem{\ospismarty{footer\_totalEntries}}
\ospsmartytyp{Zahl}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Bei Archivübersichten, die sich über mehr als eine Seite erstrecken, enthält
diese Variable die Anzahl der insgesamt blätterbaren Einträge.

\ospitem{\ospismarty{footer\_totalPages}}
\ospsmartytyp{Zahl}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Bei Archivübersichten, die sich über mehr als eine Seite erstrecken, enthält
diese Variable die Anzahl der insgesamt verfügbaren Seiten.

\ospitem{\ospismarty{footer\_currentPage}}
\ospsmartytyp{Zahl}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Bei Archivübersichten, die sich über mehr als eine Seite erstrecken, enthält
diese Variable die aktuelle Seitennummer.

\ospitem{\ospismarty{footer\_pageLink}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Enthält eine generische URL, die verwendet werden kann, um Links zu beliebigen
Folgeseiten zu formatieren. Die URL enthält einen Platzhalter \cmd{\%s}, der
durch die gewünschte Zielseitennummer ersetzt werden kann.

\ospitem{\ospismarty{footer\_info}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntryFooter()}
Bei Archivübersichten, die sich über mehr als eine Seite erstrecken, enthält
diese Variable einen Satz, der darüber informiert, wie viele Ergebnisse und Seiten
es insgesamt gibt, z.\,B.: \menu{Seite 1 von 10, insgesamt 20 Einträge}.

\ospitem{\ospismarty{plugin\_clean\_page}}
\ospsmartytyp{Boolean}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntries()}
Ereignis-Plugins können für die Ausgabe das Layout der Artikelübersicht
übernehmen und darin ihre eigenen Inhalte einbinden. Die Variable
\ospsmarty{plugin\_clean\_page} enthält den Wert \cmd{true}, wenn ein Plugin
sozusagen eine \emph{saubere Seite} ohne Artikel ausgeben möchte.

\ospitem{\ospismarty{comments\_messagestack}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntries()}
Enthält ein Array mit etwaigen Fehlermeldungen, die bei der Erstellung eines
Kommentars auftreten können (fehlende Angaben, Spam-Erkennung). Pro
Array-Schlüssel ist eine Fehlermeldung aufgeführt, die HTML-Code enthalten kann.

\ospitem{\ospismarty{is\_comment\_added}}
\ospsmartytyp{Boolean}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntries()}
Enthält den Wert \cmd{true}, wenn ein Kommentar innerhalb des Seitenaufrufs
erfolgreich hinzugefügt wurde.

\ospitem{\ospismarty{is\_comment\_moderate}}
\ospsmartytyp{Boolean}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntries()}
Enthält den Wert \cmd{true}, wenn ein Kommentar innerhalb des Seitenaufrufs
erfolgreich hinzugefügt wurde, aber aufgrund der aktivierten Kommentarmoderation
nicht direkt freigeschaltet wird.

\ospitem{\ospismarty{entries}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartydoc{include/functions\_entries.inc.php, serendi\-pity\_printEntries()}
Enthält das Array mit den Metadaten und Eigenschaften eines Artikels. Die erste
Dimension des Arrays enthält das gruppierende Datum, so dass im Wert des
Arrays für einen Tag mehrere Artikel enthalten sein können. Dies ermöglicht
später bei der Ausgabe der Variable \ospsmarty{entries}, dass dasselbe Datum
nur einmal ausgegeben wird und darunter mehrere Artikel erscheinen können.

\index{Template-Variablen!\$entry.title}
Der Array-Schlüssel enthält das Datum dabei in Form eines Unix-Timestamps (bzw.
den Wert \cmd{sticky} für dauerhafte Einträge). Die Unter-Arrays enthalten die
im Folgenden aufgeführten Schlüssel.\osplinebreak{} Standardmäßig werden diese Unter-Arrays über die 
Template-Datei \cmd{entries.tpl} mittels einer \cmd{\{foreach\}}-Schleife der
Smarty-Variable \ospsmarty{entry} zugewiesen, so dass Sie darauf nicht mittels
\ospsmarty{entries.X.""entries.title} zugreifen, sondern mit \ospsmarty{entry.title}.

\begin{ospdescription}
\ospitem{\ospismarty{entries.X.date}}
\ospsmartytyp{Zahl}
Enthält das Datum des ältesten Artikels für eine Datumsgruppe (einen Tag).

\ospitem{\ospismarty{entries.X.is\_sticky}}
\ospsmartytyp{Boolean}
Falls ein Eintrag \emph{dauerhaft} (siehe Plugin-Beschreibung Seite \pageref{stickyentries})
ist, wird er im Array \ospsmarty{entries.sticky} abgelegt; für alle Einträge
dieser Gruppe ist \ospsmarty{entries.sticky.is\_sticky} auf \cmd{true}
gesetzt. Die Artikel anderer Datumsgruppen besitzen für diese Variable den Wert
\cmd{false}. 

\label{template-entries}
\ospitem{\ospismarty{entries.X.entries}}
\ospsmartytyp{Mehrdimensionales Array}
Dieses Array enthält die Daten der eigentlichen Blog-Artikel. Der Schlüssel
dieses Arrays ist durchnummeriert, jeder Wert enthält ein weiteres Unter-Array
mit den Inhalten der Datenbank-Spalten und folgenden Schlüsseln. 

\ospitem{\ospismarty{entries.X.entries.Y.id}}
\ospsmartytyp{Zahl}
Enthält die eindeutige ID eines Artikels.

\ospitem{\ospismarty{entries.X.entries.Y.title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Artikels. Sonderzeichen wie Umlaute und spitze Klammern
sind in ihre jeweiligen HTML-Sonderzeichen konvertiert.

\ospitem{\ospismarty{entries.X.entries.Y.html\_title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Artikels. Etwaige Sonderzeichen werden im Gegensatz zu
\ospsmarty{entries.X.entries.Y.title} nicht konvertiert.

\ospitem{\ospismarty{entries.X.entries.Y.body}}
\ospsmartytyp{Zeichenkette}
Enthält den Artikeltext.

\ospitem{\ospismarty{entries.X.entries.Y.extended}}
\ospsmartytyp{Zeichenkette}
Enthält den erweiterten Artikeltext.

\ospitem{\ospismarty{entries.X.entries.Y.timestamp}}
\ospsmartytyp{Zahl}
Enthält das Veröffentlichungsdatum des Artikels (in Unix"=Sekunden).

\ospitem{\ospismarty{entries.X.entries.Y.last\_modified}}
\ospsmartytyp{Zahl}
Enthält das Datum der letzten Bearbeitung des Artikels (in Unix-Sekunden).

\ospitem{\ospismarty{entries.X.entries.Y.isdraft}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, falls der Artikel ein Entwurf ist. Hinweis:
Entwürfe können nur als Vorschau angesehen werden, da sie niemals im Frontend
eingebunden werden.

\ospitem{\ospismarty{entries.X.entries.Y.is\_cached}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn der Inhalt eines Artikels aus dem Cache geholt
wird. Dies ist nur dann der Fall, wenn das Plugin \menu{Erweiterte Eigenschaften von
Artikeln} verwendet wird und die Caching-Option aktiviert wurde (siehe Seite \pageref{entryproperties}).

\ospitem{\ospismarty{entries.X.entries.Y.is\_entry\_owner}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Autor des Artikels dem aktuell eingeloggten
Besucher des Frontends entspricht. Ist dies der Fall, können Links zum direkten
Bearbeiten eines Artikels im Frontend eingeblendet werden.

\ospitem{\ospismarty{entries.X.entries.Y.plugin\_display\_dat}}
\ospsmartytyp{Zeichenkette}
Enthält etwaigen HTML-Code, der durch Ereignis-Plugins dem Eintrag hinzugefügt
werden soll. Mehrere Plugins können ihre individuellen Inhalte nacheinander in
diese Variable speichern. Die Reihenfolge der Ausgabe entspricht dabei der
Reihenfolge der Ereignis-Plugins.

\ospitem{\ospismarty{entries.X.entries.Y.has\_extended},}
\ospadditem{\ospismarty{entries.X.entries.Y.exflag}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Artikel über einen erweiterten Eintrag
verfügt. 

\ospitem{\ospismarty{entries.X.entries.Y.is\_extended}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Besucher die Detailansicht eines Artikels
aufgerufen hat.

\ospitem{\ospismarty{entries.X.entries.Y.viewmode}}
\ospsmartytyp{Zeichenkette}
Die Art der Darstellung von Kommentaren zu einem Artikel ist abhängig davon, ob
der Besucher auf den Link zur \menu{Linearen} oder \menu{Verschachtelten}
Ansicht geklickt hat. Standardmäßig wird eine verschachtelte Ansicht
dargestellt, bei der Kommentare, die sich auf einen vorhergehenden 
beziehen, direkt untereinander verschachtelt dargestellt werden. Die lineare
Ansicht zeigt die Kommentare in ihrer Eingangsreihenfolge.

Die Variable enthält entweder den Wert
der Konstante \cmd{VIEWMODE""\_LINEAR} oder \cmd{VIEWMODE\_THREADED}, je nach
Entscheidung des Besuchers.

\ospitem{\ospismarty{entries.X.entries.Y.comments}}
\ospsmartytyp{Zahl}
Enthält die Anzahl von Kommentaren zu einem Artikel.

\ospitem{\ospismarty{entries.X.entries.Y.trackbacks}}
\ospsmartytyp{Zahl}
Enthält die Anzahl von Trackbacks zu einem Artikel.

\ospitem{\ospismarty{entries.X.entries.Y.allow\_comments}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Autor eines Artikels die Option aktiviert
hat, dass Kommentare hinterlassen werden können.
 
\ospitem{\ospismarty{entries.X.entries.Y.moderate\_comments}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Autor eines Artikels die Option aktiviert
hat, dass Kommentare vor deren Darstellung freigeschaltet werden müssen.

\ospitem{\ospismarty{entries.X.entries.Y.has\_comments}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn ein Artikel mindestens einen Kommentar besitzt.

\ospitem{\ospismarty{entries.X.entries.Y.has\_trackbacks}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn ein Artikel mindestens einen Trackback besitzt.

\ospitem{\ospismarty{entries.X.entries.Y.label\_comments}}
\ospsmartytyp{Zeichenkette}
Enthält jeweils die zugehörige Bezeichnung, die neben der Anzahl von
Kommentaren dargestellt wird. Wenn ein Artikel nur einen Kommentar besitzt, ist der Wert
der Variable \cmd{Kommentar}, andernfalls immer \cmd{Kommentare}.
Der tatsächliche Wert dieser Variable richtet sich nach der eingerichteten
Sprache des Blogs und verwendet die Sprachkonstante \cmd{COMMENT} bzw. \cmd{COMMENTS}.

\ospitem{\ospismarty{entries.X.entries.Y.label\_trackbacks}}
\ospsmartytyp{Zeichenkette}
Enthält jeweils die zugehörige Bezeichnung, die neben der Anzahl von
Trackbacks dargestellt wird. Wenn ein Artikel nur einen Trackback besitzt, ist der Wert
dieser Variable 
%\cmd{Tracbkack} FM@GH: !! ;)
\cmd{Trackback}, andernfalls immer \cmd{Trackbacks}.
Der tatsächliche Wert dieser Variable richtet sich nach der
Sprache des Blogs und verwendet die Sprachkonstante \cmd{TRACKBACK} bzw. \cmd{TRACKBACKS}.

\ospitem{\ospismarty{entries.X.entries.Y.author}}
\ospsmartytyp{Zeichenkette}
Enthält den Namen des Autors eines Artikels.

\ospitem{\ospismarty{entries.X.entries.Y.loginname}}
\ospsmartytyp{Zeichenkette}
Enthält den Login-Namen des Autors eines Artikels. Aus Sicherheitsgründen
sollte dieser nicht öffentlich dargestellt werden.

\ospitem{\ospismarty{entries.X.entries.Y.email}}
\ospsmartytyp{Zeichenkette}
Enthält die E-Mail-Adresse des Autors eines Artikels.

\ospitem{\ospismarty{entries.X.entries.Y.authorid}}
\ospsmartytyp{Zahl}
Enthält die ID des Autors eines Artikels.

\ospitem{\ospismarty{entries.X.entries.Y.title\_rdf}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Artikels (mit konvertierten Sonderzeichen), bei dem jedoch etwaige
doppelte Bindestriche durch einen einzelnen Bindestrich
ersetzt werden, damit der Inhalt dieser Variable für XML-RDF-Metadaten verwendet werden kann.

\ospitem{\ospismarty{entries.X.entries.Y.rdf\_ident}}
\ospsmartytyp{Zeichenkette}
Enthält einen eindeutigen Permalink des Artikels, dessen URL vollständig mit
HTTP-Hostname angegeben wird.

\ospitem{\ospismarty{entries.X.entries.Y.link}}
\ospsmartytyp{Zeichenkette}
Enthält die relative URL zu der Detailseite eines 
Artikels (z.\,B.\ \cmd{/serendipity/archives/1-Titel.html}).

\ospitem{\ospismarty{entries.X.entries.Y.commURL}}
\ospsmartytyp{Zeichenkette}
Enthält die vollständige URL zu der Detailseite eines Artikels, inklusive
HTTP-Hostname (z.\,B.\ \cmd{http://www.example.com/se\-rendipity/archives/1-Titel.html}).

\ospitem{\ospismarty{entries.X.entries.Y.link\_rdf}}
\ospsmartytyp{Zeichenkette}
Enthält einen eindeutigen, gekürzten Permalink des Artikels für die
Identifikation innerhalb eines XML-RDF-Metadatenblocks.

\ospitem{\ospismarty{entries.X.entries.Y.link\_deny\_comments}}
\ospsmartytyp{Zeichenkette}
Enthält die URL, damit der Autor eines Artikels auf der Detailseite das
Hinzufügen von Kommentaren zukünftig verbieten kann.

\ospitem{\ospismarty{entries.X.entries.Y.link\_allow\_comments}}
\ospsmartytyp{Zeichenkette}
Enthält die URL, damit der Autor eines Artikels auf der Detailseite das
Hinzufügen von Kommentaren wieder erlauben kann.

\ospitem{\ospismarty{entries.X.entries.Y.link\_popup\_comments}}
\ospsmartytyp{Zeichenkette}
Enthält eine URL, unter der die Kommentare eines Artikels separat (z.\,B.\ als
Popup) angezeigt werden können.

\ospitem{\ospismarty{entries.X.entries.Y.link\_popup\_trackbacks}}
\ospsmartytyp{Zeichenkette}
Enthält eine URL, unter der die Trackbacks eines Artikels separat (z.\,B.\ als
Popup) angezeigt werden können.

\ospitem{\ospismarty{entries.X.entries.Y.link\_edit}}
\ospsmartytyp{Zeichenkette}
Enthält eine URL, mit der der Autor eines Artikels direkt ins Backend gelangen
kann, um den jeweiligen Artikel dort zu bearbeiten.

\ospitem{\ospismarty{entries.X.entries.Y.link\_trackback}}
\ospsmartytyp{Zeichenkette}
Enthält die Trackback-URL zu einem Artikel. An diese Ziel-URL müssen fremde
Blogsysteme ihr Trackback senden. Diese URL ist nicht zum üblichen Aufruf
innerhalb des Browsers konzipiert. 

\ospitem{\ospismarty{entries.X.entries.Y.link\_viewmode\_threaded}}
\ospsmartytyp{Zeichenkette}
Enthält den Link zur Detailseite eines Artikels, um die Kommentare in
verschachtelter Ansicht darzustellen.

\ospitem{\ospismarty{entries.X.entries.Y.link\_viewmode\_linear}}
\ospsmartytyp{Zeichenkette}
Enthält den Link zur Detailseite eines Artikels, um die Kommentare in
linearer (chronologischer) Ansicht darzustellen.

\ospitem{\ospismarty{entries.X.entries.Y.link\_author}}
\ospsmartytyp{Zeichenkette}
Enthält eine URL zur Übersichtsseite aller Beiträge des Autors, der den
aktuellen Artikel verfasst hat.

\ospitem{\ospismarty{entries.X.entries.Y.categories}}
\ospsmartytyp{Mehrdimensionales Array}
Enthält ein Array mit allen dem Artikel zugewiesenen Kategorien. Die Schlüssel
der durchnummerierten Unter-Arrays entsprechen denen, die auf Seite
\pageref{db-categories} aufgeführt sind. Hinzu kommt der Array-Schlüssel
\ospsmarty{entries.X.entries.Y.categories.Z.ca\-tegory\_link}, der eine URL zu
einer Übersichtsseite enthält, auf der alle Artikel der jeweiligen Kategorie
aufgeführt sind.
 
\ospitem{\ospismarty{entries.X.entries.Y.properties}}
\ospsmartytyp{Mehrdimensionales Array}
Das Array \ospsmarty{entries.X.entries.Y.properties} enthält alle
\menu{Erweiterten Eigenschaften}, die mittels diverser Plugins einem Artikel
zugeschrieben werden können. Die zusätzlich verfügbaren Schlüssel können Sie in
der Dokumentation der jeweiligen Plugins nachschlagen, beispielsweise für das Plugin
\menu{Erweiterte Eigenschaften für Artikel} auf Seite \pageref{entryproperties}.
Unter anderem können auch beliebige selbstdefinierte Array-Schlüssel in diesem
Unter-Array aufgeführt werden, wobei der jeweilige Schlüssel wie
\ospsmarty{entries.X.entries.Y.properties.ep\_meinSchlues\-sel} (bzw.
\ospsmarty{entry.properties.ep\_meinSchluessel}) eingebunden wird.

\end{ospdescription}
\end{ospdescription}
%revised
%---------------------------------------------------------------------------
\index{Template-Dateien!feed\_*.tpl}%
\subsubsection{feed\_*.tpl}
%---------------------------------------------------------------------------

Die Darstellung der RSS-Feeds erfolgt über die Smarty-Template-Dateien wie
\cmd{feed\_2.0.tpl}. Folgende Variablen sind dort verfügbar:

\begin{ospdescription}
\ospitem{\ospismarty{metadata}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartydoc{rss.php}
Enthält eine Liste von Metadaten, die den Typ des RSS-Feeds sowie globale
Blog-Daten angibt. Folgende Array-Schlüssel sind verfügbar:

\begin{ospdescription}
\ospitem{\ospismarty{metadata.title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des RSS-Feeds (setzt sich aus gewählter Kategorie, Autoren und
Name des Blogs zusammen).

\ospitem{\ospismarty{metadata.description}}
\ospsmartytyp{Zeichenkette}
Enthält eine Beschreibung des RSS-Feeds (abhängig von gewählter Kategorie,
Autoren und Beschreibung des Blogs).

\ospitem{\ospismarty{metadata.language}}
\ospsmartytyp{Zeichenkette}
Enthält die Sprache des Blogs, z.\,B.\ \cmd{de} für ein
deutschsprachiges Blog.

\ospitem{\ospismarty{metadata.link}}
\ospsmartytyp{Zeichenkette}
Enthält die URL zum Blog.

\ospitem{\ospismarty{metadata.email}}
\ospsmartytyp{Zeichenkette}
Enthält die konfigurierte E-Mail-Adresse des Blogs.

\ospitem{\ospismarty{metadata.fullFeed}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der RSS-Feed Artikel vollständig einbinden
soll. Wird beeinflusst durch das Plugin \emph{Blog abonnieren} (siehe Seite \pageref{syndication}).

\ospitem{\ospismarty{metadata.showMail}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn E-Mail-Adressen gültig eingebunden werden
sollen. Steht der Wert auf \cmd{false}, werden E-Mail"=Adressen verschleiert.
Diese Variable wird beeinflusst durch die Konfiguration des
Anti-Spam-Plugins (siehe Seite \pageref{spamblock}).

\ospitem{\ospismarty{metadata.version}}
\ospsmartytyp{Zeichenkette}
Enthält die Versionsnummer des angeforderten Typs (z.\,B.\ \cmd{2.0} für RSS 2.0,
oder \cmd{atom1.0} für Atom 1.0).

\ospitem{\ospismarty{metadata.template\_file}}
\ospsmartytyp{Zeichenkette}
Enthält den Namen der Smarty-Template-Datei, die für den jeweiligen Feed
verwendet wurde.

\ospitem{\ospismarty{metadata.additional\_fields}}
\ospsmartytyp{Eindimensionales Array}
Enthält etwaige Zusatzfelder, die durch Plugins hinzugefügt werden. Das
Plugin \emph{Blog abonnieren} bindet Werte für folgende Array"=Schlüssel ein:\\
\ospismarty{metadata.additional\_fields.image},\\
\ospismarty{metadata.additional\_fields.image\_atom1.0},\\
\ospismarty{metadata.additional\_fields.image\_rss1.0\_channel},\\
\ospismarty{metadata.additional\_fields.image\_rss1.0\_rdf} (Feed"=Bilder
für die unterschiedlichen Versionen der Feed-Typen) und\\ 
\ospismarty{metadata.additional\_fields.channel} (Liste zusätzlicher XML-Elemente
wie \cmd{webMaster}, \cmd{ttl}, \cmd{pubDate}).
\end{ospdescription}

\ospitem{\ospismarty{entries}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartydoc{rss.php; include/functions\_rss.inc.php, se\-ren\-di\-pity\_printEntries\_rss()}
Enthält Informationen für die darzustellenden Daten des Feeds. Dies können entweder
Kommentare oder Blog-Artikel sein, abhängig vom gewählten Feed. 

Für beide Feed-Arten gelten folgende Schlüssel:
\begin{ospdescription}
\ospitem{\ospismarty{entries.X.feed\_id}}
\ospsmartytyp{Zahl}
Enthält die ID des Blog-Artikels, auf die sich ein Feed-Objekt (Kommentar oder
Blog-Eintrag) bezieht.

\ospitem{\ospismarty{entries.X.feed\_guid}}
\ospsmartytyp{Zeichenkette}
Enthält eine eindeutige ID für ein Feed-Objekt. Diese ID entspricht einer URL
(verkürzter Permalink), unter der sich das Feed-Objekt jederzeit aufrufen
lässt.

\ospitem{\ospismarty{entries.X.feed\_entryLink}}
\ospsmartytyp{Zeichenkette}
Enthält den Permalink des Blog-Eintrags, auf den sich ein Feed-Objekt bezieht.

\ospitem{\ospismarty{entries.X.feed\_title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel eines Feed-Objekts. Sonderzeichen werden in 
UTF-8 umgewandelt, etwaiger HTML-Code wird maskiert.

\ospitem{\ospismarty{entries.X.feed\_blogTitle}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Blogs. Sonderzeichen werden in 
UTF-8 umgewandelt, etwaiger HTML-Code wird maskiert.

\ospitem{\ospismarty{entries.X.feed\_author}}
\ospsmartytyp{Zeichenkette}
Enthält den Autorennamen eines Feed-Objekts. Sonderzeichen werden
in UTF-8 umgewandelt, etwaiger HTML-Code wird maskiert.

\ospitem{\ospismarty{entries.X.feed\_email}}
\ospsmartytyp{Zeichenkette}
Enthält die E-Mail-Adresse des Autors eines Feed-Objekts. Sonderzeichen
werden in UTF-8 umgewandelt, HTML-Code wird ggf. maskiert.

\ospitem{\ospismarty{entries.X.feed\_timestamp}}
\ospsmartytyp{Zeichenkette}
Enthält das Veröffentlichungsdatum eines Feed-Objekts im Format
\emph{Jahr-Monat-Tag Stunde:Minute:Sekunde Zeitzone}.

\ospitem{\ospismarty{entries.X.feed\_last\_modified}}
\ospsmartytyp{Zeichenkette}
Enthält das Datum der letzten Aktualisierung eines Feed"=Objekts im Format
\emph{Jahr-Monat-Tag Stunde:Minute:Sekunde Zeitzone}.

\ospitem{\ospismarty{entries.X.feed\_timestamp\_r}}
\ospsmartytyp{Zeichenkette}
Enthält das Veröffentlichungsdatum eines Feed-Objekts im RFC-2822-Format\footnote{\cmd{http://www.faqs.org/rfcs/rfc2822}}.

\ospitem{\ospismarty{entries.X.feed\_body}}
\ospsmartytyp{Zeichenkette}
Enthält den Inhalt des Feed-Objekts. Sonderzeichen
werden in den UTF-8-Zeichensatz umgewandelt, HTML-Code wird ggf.\osplinebreak{} maskiert. 

\ospitem{\ospismarty{entries.X.feed\_ext}}
\ospsmartytyp{Zeichenkette}
Falls ein Blog-Artikel nur ausschnittweise im Feed enthalten ist, wird in
der Variable \ospismarty{entries.X.feed\_ext} ein HTML-Code für 
einen Link zur detaillierten Ansicht des Artikels gespeichert. Sonderzeichen
werden in den UTF-8-Zeichensatz umgewandelt, etwaiger HTML-Code wird maskiert.

\ospitem{\ospismarty{entries.X.per\_entry\_display\_dat}}
\ospsmartytyp{Zeichenkette}
Enthält etwaige zusätzliche HTML/XML-Ausgaben von Ereignis-Plugins.

\end{ospdescription}

Für Kommentar-Feeds ist das Array mit denselben Schlüsseln ausgestattet wie das
Array für die Darstellung der Kommentare (siehe Seite
\pageref{commenttemplates}). Abweichend sind einzig die beiden Schlüssel
\ospsmarty{entries.X.au\-thor} (dieser wird automatisch bei der Darstellung eines
Trackbacks um den Titel des Trackbacks erweitert) und \ospsmarty{entries.X.title}
(dieser enthält zusätzlich den Autorennamen vorangestellt, um innerhalb des
RSS-Feeds eine eindeutigere Überschrift zu erhalten).

Normale Artikel-Feeds enthalten ein Array mit den Schlüsseln, die auf Seite
\pageref{template-entries} aufgeführt sind.

\ospitem{\ospismarty{namespace\_display\_dat}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{rss.php}
Enthält etwaige XML-Ausgaben von zusätzlichen Ereignis-Plugins, die sich in die
Ausgabe des Feeds (im \cmd{namespace}-Bereich) einklinken können.

\ospitem{\ospismarty{once\_display\_dat}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{rss.php}
Enthält etwaige XML-Ausgaben von zusätzlichen Ereignis-Plugins, die sich in die
Ausgabe des Feeds (Inhaltsbereich) einklinken können.

\ospitem{\ospismarty{is\_comments}}
\ospsmartytyp{Boolean}
\ospsmartydoc{rss.php}
Enthält den Wert \cmd{true}, falls der RSS-Feed Kommentare zu Artikeln anstelle
der Artikel selbst darstellt.

\ospitem{\ospismarty{last\_modified}}
\ospsmartytyp{Zahl}
\ospsmartydoc{rss.php}
Enthält das Datum (in Unix-Sekunden) des aktuellsten Artikels. Dieses Datum wird
von RSS-Clients benutzt, um Bandbreite sparend herauszufinden, ob neue Artikel vorliegen (siehe
Seite \pageref{Caching von RSS-Feeds}).

\ospitem{\ospismarty{self\_url}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{rss.php}
Enthält die vollständige URL, die zum Aufruf des RSS-Feeds benutzt wurde.
\end{ospdescription}


%revised
\index{Template-Dateien!admin/entries.tpl}%
%---------------------------------------------------------------------------
\subsubsection{admin/entries.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{admin/entries.tpl} ist verantwortlich für die Darstellung
der Oberfläche zum Erstellen eines Blog-Artikels.

\begin{ospdescription}
\index{Template-Variablen!\$entry\_vars}%
\ospitem{\ospsmarty{entry\_vars}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{admin/entries.tpl}
\ospsmartydoc{include/functions\_entries\_admin.inc.php,\osplinebreak{} serendipity\_printEntryForm()}
Enthält alle für den Eintragseditor notwendigen Variablen sowie die Daten des
zu bearbeitenden Blog-Artikels.

\begin{ospdescription}
\index{Template-Variablen!\$entry\_vars.draf\_mode}%
\ospitem{\ospsmarty{entry\_vars.draft\_mode}}
\ospsmartytyp{Zeichenkette}
Gibt an, ob anhand der Voreinstellung des Redakteurs ein neuer Blog-Artikel als
\emph{Veröffentlichung} (Wert \cmd{publish}) oder \emph{Entwurf} (Wert
\cmd{draft}) erstellt werden soll.

\index{Template-Variablen!\$entry\_vars.moderate\_comments}%
\ospitem{\ospsmarty{entry\_vars.moderate\_comments}}
\ospsmartytyp{Boolean}
Gibt an, ob anhand der Voreinstellung des Redakteurs neue\osplinebreak{} Kommentare zu dem
erstellenden Blog-Artikel moderiert werden sollen (Wert \cmd{true}) oder nicht
(Wert \cmd{false}).

\index{Template-Variablen!\$entry\_vars.allow\_comments}%
\ospitem{\ospsmarty{entry\_vars.allow\_comments}}
\ospsmartytyp{Boolean}
Gibt an, ob anhand der Voreinstellung des Redakteurs Kommentare zu dem
erstellenden Blog-Artikel erstellt werden dürfen (Wert
\cmd{true}) oder nicht (Wert \cmd{false}).

\index{Template-Variablen!\$entry\_vars.category\_options}%
\ospitem{\ospsmarty{entry\_vars.category\_options}}
\ospsmartytyp{Mehrdimensionales Array}
Enthält eine Liste aller dem Blog-Artikel zuweisbaren Kategorien. Jedes
Unter-Array enthält alle Eigenschaften der Kategorie-Datenbanktabelle sowie
einige zusätzliche Werte:

\label{db-categories}
\begin{ospdescription}
\ospitem{\ospsmarty{entry\_vars.category\_options.X.categoryid}}
\ospsmartytyp{Zahl}
ID der aktuellen Kategorie.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.category\_name}}
\ospsmartytyp{Zeichenkette}
Name der aktuellen Kategorie.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.category\_icon}}
\ospsmartytyp{Zeichenkette}
URL für ein repräsentatives Bild der Kategorie.

\ospitem{\cmd{\{\$entry\_vars.category\_options.X.category\_}}
\ospadditem{\cmd{description\}}}
\ospsmartytyp{Zeichenkette}
Beschreibung der aktuellen Kategorie.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.category\_left},}
\ospadditem{\ospsmarty{entry\_vars.category\_options.X.category\_left}}
\ospsmartytyp{Zahl}
Verweist auf die jeweils davor und dahinter liegende Kategorie"=ID und wird
verwendet, um eine Baumstruktur für Kategorien herzustellen.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.parentid}}
\ospsmartytyp{Zahl}
Verweist auf die in der Hierarchie übergeordnete Kategorie der aktuellen
Kategorie. 

\ospitem{\ospsmarty{entry\_vars.category\_options.X.authorid}}
\ospsmartytyp{Zahl}
ID des Autors, der die Kategorie erstellt hat.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.username},}
\ospadditem{\ospsmarty{entry\_vars.category\_options.X.realname}}
\ospsmartytyp{Zeichenkette}
Name des Autors, der die Kategorie erstellt hat.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.loginname}}
\ospsmartytyp{Zeichenkette}
Login-Name des Autors, der die Kategorie erstellt hat.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.is\_selected}}
\ospsmartytyp{Boolean}
Falls die aktuelle Kategorie dem neu zu erstellenden bzw. zu bearbeitenden
Blog-Artikel zugewiesen ist, ist der Wert dieser Variable \cmd{true},
andernfalls \cmd{false}.

\ospitem{\ospsmarty{entry\_vars.category\_options.X.depth\_pad}}
\ospsmartytyp{Zeichenkette}
Enthält den benötigten HTML-Code, um die Einrückung der Kategorie-Hierarchie
darzustellen. Für jede tiefer liegende Ebene wird ein geschütztes Leerzeichen
(\cmd{\&nbsp;})\osplinebreak{} dargestellt.
\end{ospdescription}
%End entry_vars.category_options

\index{Template-Variablen!\$entry\_vars.allowDateManipulation}%
\ospitem{\ospsmarty{entry\_vars.allowDateManipulation}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn in der Blog-Konfiguration die
Vor-/""Rückdatierung von Einträgen erlaubt wird
(\cmd{\$serendipity['al\-lowDateManipulation']}, siehe Seite \pageref{allowdatemanipulation}).

\index{Template-Variablen!\$entry\_vars.show\_wysiwyg}%
\ospitem{\ospsmarty{entry\_vars.show\_wysiwyg}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Redakteur die Benutzung des WYSIWYG-Editors
aktiviert hat (siehe Seite \pageref{wysiwyg}).

\index{Template-Variablen!\$entry\_vars.wysiwyg\_advanced}%
\ospitem{\ospsmarty{entry\_vars.wysiwyg\_advanced}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Redakteur einen Browser einsetzt, der einen
WYSIWYG-Editor darstellen kann (Microsoft Internet Explorer, Mozilla Firefox, Opera).

\index{Template-Variablen!\$entry\_vars.timestamp}%
\ospitem{\ospsmarty{entry\_vars.timestamp}}
\ospsmartytyp{Zahl}
Enthält das aktuelle Datum oder, falls ein Blog-Artikel bearbeitet wird, das
Datum des Artikels (in Unix-Sekunden).
%FM@GH wurde bereits mehrfach erklärt 

\index{Template-Variablen!\$entry\_vars.reset\_timestamp}%
\ospitem{\ospsmarty{entry\_vars.reset\_timestamp}}
\ospsmartytyp{Zahl}
Enthält immer das aktuelle Datum (in Unix-Sekunden).

\index{Template-Variablen!\$entry\_vars.hidden}%
\ospitem{\ospsmarty{entry\_vars.hidden}}
\ospsmartytyp{Zeichenkette}
Enthält HTML-Code mit versteckten HTML"=Formularfeldern, die einige interne
Variablen zuweisen.

\index{Template-Variablen!\$entry\_vars.errMsg}%
\ospitem{\ospsmarty{entry\_vars.errMsg}}
\ospsmartytyp{Zeichenkette}
Falls beim Speichern oder Bearbeiten eines Artikels Fehlermeldungen auftreten,
werden sie in dieser Variable  gespeichert.

\index{Template-Variablen!\$entry\_vars.targetURL}%
\ospitem{\ospsmarty{entry\_vars.targetURL}}
\ospsmartytyp{Zeichenkette}
Enthält das Verweisziel (URL) des HTML-Formulars. Da das Formular zum
Bearbeiten von Artikeln von unterschiedlichen Stellen des Serendipity-Kerns auch
z.\,B. durch Plugins aufgerufen werden kann, kann die Ziel-URL
unterschiedlich lauten und wird daher über eine Variable abstrahiert.

\index{Template-Variablen!\$entry\_vars.cat\_count}%
\ospitem{\ospsmarty{entry\_vars.cat\_count}}
\ospsmartytyp{Zahl}
Enthält die Anzahl der zuweisbaren Blog-Kategorien.

\index{Template-Variablen!\$entry\_vars.cat\_state}%
\ospitem{\ospsmarty{entry\_""vars.cat\_state}}
\ospsmartytyp{Zeichenkette}
Wenn einem Blog-Artikel mehr als eine Kategorie zugewiesen werden soll, kann ein
Mehrfach-Auswahlfeld für die Kategorie-Auswahl aktiviert werden 
(siehe Seite \pageref{eintraege-kategorie-dropdown}).
Sobald einem Artikel mehr als eine Kategorie zugewiesen wurde, erscheint beim
Bearbeiten dieses Artikels standardmäßig das Mehrfach-Auswahlfeld, andernfalls
nur ein einfaches Ausklappfeld. 
Die Variable \cmd{entry\_""vars.cat\_state} bestimmt, wie die Kategorie-Auswahl
dargestellt wird. Der Wert \cmd{on} steht für \emph{Mehrfach-Auswahlfeld},
\cmd{off} für \emph{einfaches Ausklappfeld}. 

\index{Template-Variablen!\$entry\_vars.serendipityRightPublish}%
\ospitem{\ospsmarty{entry\_vars.serendipityRightPublish}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn ein Redakteur die Erlaubnis hat, Artikel zu
veröffentlichen (siehe Seite \pageref{rightpublish}).

\index{Template-Variablen!\$entry\_vars.wysiwyg\_blocks}%
\ospitem{\ospsmarty{entry\_vars.wysiwyg\_blocks}}
\ospsmartytyp{Eindimensionales Array}
Enthält eine Liste von Blöcken, die durch den WYSIWYG-Editor gefüllt werden
können (\cmd{body}, \cmd{extended}).

\index{Template-Variablen!\$entry\_vars.entry\_template}%
\ospitem{\ospsmarty{entry\_vars.entry\_template}}
\ospsmartytyp{Zeichenkette}
Enthält den Pfad zur darzustellenden Template-Datei \cmd{admin/""entries.tpl}.
Plugins können ein Backend"=Template frei modifizieren, um
unterschiedliche Artikel-Editor-Oberflächen darzustellen.

\index{Template-Variablen!\$entry\_vars.entry}%
\ospitem{\ospsmarty{entry\_vars.entry}}
\ospsmartytyp{Eindimensionales Array}
Enthält die Meta-Daten des Blog-Artikels, sofern dieser gespeichert wurde oder
sich in der Vorschau befindet. Folgende Array-Schlüssel sind verfügbar:

\begin{ospdescription}
\index{Template-Variablen!\$entry\_vars.entry.isdraft}%
\ospitem{\ospsmarty{entry\_vars.entry.isdraft}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn der Artikel als Entwurf gespeichert wurde.

\index{Template-Variablen!\$entry\_vars.entry.moderate\_comments}%
\ospitem{\ospsmarty{entry\_vars.entry.moderate\_comments}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn die Kommentare zu dem Blog-Artikel moderiert
werden sollen.

\index{Template-Variablen!\$entry\_vars.entry.allow\_comments}%
\ospitem{\ospsmarty{entry\_vars.entry.allow\_comments}}
\ospsmartytyp{Boolean}
Ist auf \cmd{true} gesetzt, wenn Kommentare zu dem Blog-Artikel erlaubt sind.

\index{Template-Variablen!\$entry\_vars.entry.title}%
\ospitem{\ospsmarty{entry\_vars.entry.title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Blog-Artikels.

\index{Template-Variablen!\$entry\_vars.entry.body}%
\ospitem{\ospsmarty{entry\_vars.entry.body}}
\ospsmartytyp{Zeichenkette}
Enthält den Artikeltext.

\index{Template-Variablen!\$entry\_vars.entry.extended}%
\ospitem{\ospsmarty{entry\_vars.entry.extended}}
\ospsmartytyp{Zeichenkette}
Enthält den erweiterten Artikeltext.

\index{Template-Variablen!\$entry\_vars.entry.id}%
\ospitem{\ospsmarty{entry\_vars.entry.id}}
\ospsmartytyp{Zahl}
Enthält die ID des Artikels.

\index{Template-Variablen!\$entry\_vars.entry.timestamp}%
\ospitem{\ospsmarty{entry\_vars.entry.timestamp}}
\ospsmartytyp{Zahl}
Enthält das Erstellungsdatum des Artikels (in Unix"=Sekunden).

\index{Template-Variablen!\$entry\_vars.entry.entry\_form}%
\ospitem{\ospsmarty{entry\_vars.entry.entry\_form}}
\ospsmartytyp{Zeichenkette}
Enthält etwaigen HTML-Code, der als Zusatz im \cmd{<form>}-HTML-Tag ausgegeben
werden kann, um z.\,B.\ individuelles JavaScript auszugeben. Plugins können diese
Variable benutzen, um erweiterte Funktionen einzubinden.

\end{ospdescription}
%End entry_vars.entry

\end{ospdescription}
%End entry_vars

\end{ospdescription}
%End admin/entries.tpl 


%revised
%---------------------------------------------------------------------------
\index{Template-Dateien!sidebar.tpl}%
\subsubsection{sidebar.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{sidebar.tpl} ist zuständig für die Darstellung der
Seitenleisten"=Plugins. Sie wird jeweils pro konfigurierter Seitenleiste (links,
rechts \ldots) mittels des Funktionsaufrufs
\ospsmarty{serendipity\_printSidebar} (siehe Seite \pageref{printsidebar}) eingelesen und meist in
der \cmd{index.tpl} aufgerufen.

\begin{ospdescription}

\index{Template-Variablen!\$plugindata}%
\ospitem{\ospsmarty{plugindata}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{sidebar.tpl}
\ospsmartydoc{include/plugin\_api.inc.php,}
\cmd{serendipity\_plugin\_api::generate\_plugins()}\\
Das Array \ospsmarty{plugindata} enthält die Ausgaben (und Metadaten) aller
dargestellten Seitenleisten-Plugins.
Das mehrdimensionale Array enthält für jedes durchnummerierte Unter-Array
folgende Schlüssel: 

\begin{ospdescription}
\ospitem{\ospsmarty{plugindata.X.side}}
\ospsmartytyp{Zeichenkette}
Enthält den Namen der zugehörigen Seite des jeweiligen Seitenleisten"=Plugins,
z.\,B.\ \cmd{left} für ein Element der linken Seitenleiste.

\ospitem{\ospsmarty{plugindata.X.class}}
\ospsmartytyp{Zeichenkette}
Enthält den PHP-Klassennamen des Seitenleisten"=Plugins, z.\,B.\
\cmd{serendipity\_plugin\_comments}. Der PHP"=Klassenname entspricht dabei auch
üblicherweise dem Datei- und Verzeichnisnamen des Plugins, somit wäre der
genannte Plugin-Code in der Datei
\cmd{plugins/serendipity\_plugin\_comments/serendipi\-ty\_plugin\_comments.php} enthalten.

\ospitem{\ospsmarty{plugindata.X.title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel eines Seitenleisten-Plugins, wie er in der Seitenleiste
angezeigt werden soll. Dieser Titel ist bei vielen Plugins vom Benutzer frei
wählbar. 

\ospitem{\ospsmarty{plugindata.X.content}}
\ospsmartytyp{Zeichenkette}
Enthält die Ausgabe eines Seitenleisten-Plugins als HTML-Code. 

\ospitem{\ospsmarty{plugindata.X.id}}
\ospsmartytyp{Zeichenkette}
Enthält eine eindeutige Identifikationsnummer des jeweiligen
Seitenleisten-Plugins. Die ID wird bei Installation des Plugins vergeben, ist
also auch bei mehrfach installierten gleichartigen Seitenleisten-Plugins für
jede einzelne Instanz unterschiedlich.

Interne Plugins (die im Serendipity-Kern enthalten sind) enthalten in der
Identifikationsnummer ein vorangestelltes \cmd{@}-Symbol, darauf folgt der
Klassenname des Plugins und abschließend ein Doppelpunkt mit einer zufälligen,
32 Zeichen langen Kombination aus Zahlen und Buchstaben.
\end{ospdescription}

\index{Template-Variablen!\$pluginside}%
\ospitem{\ospsmarty{pluginside}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{sidebar.tpl}
\ospsmartydoc{include/plugin\_api.inc.php,}
\cmd{serendipity\_plugin\_api::generate\_plugins()}\\
Da die Template-Datei \cmd{sidebar.tpl} pro Seitenleiste (links, rechts \ldots)
mehrfach aufgerufen wird, bestimmt die zentrale Variable 
jeweils die entsprechende Seitenleiste. Die Werte der Variable entsprechen dem
konfigurierten Seitenleistennamen wie \cmd{Left}, \cmd{Right} (siehe auch Seite
\pageref{customsidebars}).
Zu beachten ist, dass der erste Buchstabe des Namens großgeschrieben wird.

Diese Variable wird üblicherweise dazu benutzt, um eindeutige
CSS-Klassenselektoren (wie \cmd{serendipityLeftSidebar}) automatisch zu benennen
und zuzuweisen.
\end{ospdescription}


%revised
%---------------------------------------------------------------------------
\label{media-choose.tpl}%
\index{Template-Dateien!admin/media\_*.tpl}%
\subsubsection{admin/media\_*.tpl}
%---------------------------------------------------------------------------

Die Template-Dateien für die Darstellung der
Mediendatenbank\footnote{\cmd{admin/media\_choose.tpl, media\_imgedit.tpl,
media\_imgedit\_done.tpl, media\_pane.tpl, media\_items.tpl,
media\_properties.tpl, media\_upload.tpl, media\_showitem.tpl}} werden innerhalb
des Backends eingebunden. Für welchen Bereich die jeweilige Datei zuständig ist,
wird auf Seite \pageref{mediatemplates} beschrieben.

\begin{ospdescription}
\index{Template-Variablen!\$media}%
\ospitem{\ospsmarty{media} (gültig in \cmd{media\_pane.tpl},
\cmd{media\_properties.tpl})}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{media\_upload.tpl, media\_properties.tpl}
\ospsmartydoc{include/functions\_images.inc.php,}
\cmd{serendipity\_showMedia()}\\
Enthält die Liste ein oder mehrerer Medienobjekte bei Darstellung in der
Mediendatenbank-Übersicht. Die Ergebnisse der Template"=Dateien
\cmd{media\_upload.tpl} oder \cmd{media\_properties.tpl} werden über die
Smarty-Variable \ospsmarty{MEDIA\_ITEMS} in den jeweiligen Kontext anderer
Smarty-Templates eingebunden.

\begin{ospdescription}
\index{Template-Variablen!\$media.manage}%
\ospitem{\ospsmarty{media.manage}}
\ospsmartytyp{Boolean}
Gibt an, ob Symbole zum Bearbeiten einer Datei der Mediendatenbank (Bearbeiten,
Löschen, Drehen \ldots) angezeigt werden sollen. Enthält den Wert \cmd{true},
falls aktiviert.

\index{Template-Variablen!\$media.perPage}%
\ospitem{\ospsmarty{media.perPage}}
\ospsmartytyp{Zahl} 
Enthält die Anzahl der maximal pro Seite darzustellenden Dateien der
Mediendatenbank.

\index{Template-Variablen!\$media.page}%
\ospitem{\ospsmarty{media.page}}
\ospsmartytyp{Zahl} 
Enthält die Seitennummer der aktuell dargestellen Übersichtsseite der Mediendatenbank.

\index{Template-Variablen!\$media.pages}%
\ospitem{\ospsmarty{media.pages}}
\ospsmartytyp{Zahl} 
Enthält die Seitenanzahl der dargestellten Übersicht der Mediendatenbank.

\index{Template-Variablen!\$media.linkNext}%
\index{Template-Variablen!\$media.linkPrevious}%
\ospitem{\ospsmarty{media.linkNext}, \ospsmarty{media.linkPrevious}}
\ospsmartytyp{Zeichenkette} 
Enthält die URLs zum Zurück- und Weiterblättern der Mediendatenbank"=Übersicht.

\index{Template-Variablen!\$media.extraParems}%
\ospitem{\ospsmarty{media.extraParems}}
\ospsmartytyp{Zeichenkette} 
Enthält etwaige URL-GET-Variablen, die an die URL zum Blättern angehängt werden
müssen, beispielsweise Filtereinschränkungen und Sortierungsoptionen.

\index{Template-Variablen!\$media.show\_upload}%
\ospitem{\ospsmarty{media.show\_upload}}
\ospsmartytyp{Boolean} 
Falls auf \cmd{true} gesetzt, soll die Einbindung der Oberfläche zum Hochladen
einer Datei in die Mediendatenbank mit angezeigt werden.

\index{Template-Variablen!\$media.lineBreak}%
\ospitem{\ospsmarty{media.lineBreak}}
\ospsmartytyp{Zahl}
Gibt an, nach wie vielen Dateien der Mediendatenbank ein Zeilenumbruch erfolgen
soll. 

\index{Template-Variablen!\$media.lineBreakP}%
\ospitem{\ospsmarty{media.lineBreakP}}
\ospsmartytyp{Zahl}
Enthält die relative Breite in Prozent für jede Datei der Mediendatenbank bei
die Darstellung innerhalb der Übersicht. Bei z.\,B.\ 3 Bildern pro Zeile kann jedes
Bild 33\% der Breite einnehmen. Diese Zahl errechnet sich anhand 
der Variable \ospsmarty{media.line\-Break}.

\index{Template-Variablen!\$media.url}%
\ospitem{\ospsmarty{media.url}}
\ospsmartytyp{Zeichenkette}
Enthält die URL zum Backend, mittels derer die Bearbeitungsaktionen ausgeführt
werden können.

\index{Template-Variablen!\$media.enclose}%
\ospitem{\ospsmarty{media.enclose}}
\ospsmartytyp{Boolean}
Falls auf \cmd{true} gesetzt, werden die Dateien der Mediendatenbank mittels des
Templates \cmd{admin/media\_pane.tpl} in einer Übersicht dargestellt. Falls auf
\cmd{false} gesetzt, wird das Template \cmd{admin/media\_properties.tpl}
verwendet, das die Detaileigenschaften einer einzelnen Datei der
Mediendatenbank darstellen kann.

\index{Template-Variablen!\$media.zoomIMG}%
\index{Template-Variablen!\$media.renameIMG}%
\index{Template-Variablen!\$media.resizeIMG}%
\index{Template-Variablen!\$media.rotatecwIMG}%
\index{Template-Variablen!\$media.rotateccwIMG}%
\index{Template-Variablen!\$media.configureIMG}%
\index{Template-Variablen!\$media.deleteIMG}%
\index{Template-Variablen!\$media.prevIMG}%
\index{Template-Variablen!\$media.nextIMG}%
\ospitem{\ospsmarty{media.zoomIMG}, \ospsmarty{media.renameIMG},}
\ospadditem{\ospsmarty{media.resizeIMG}, \ospsmarty{media.rotatecwIMG},}
\ospadditem{\ospsmarty{media.rotateccwIMG}, \ospsmarty{media.configureIMG},}
\ospadditem{\ospsmarty{media.deleteIMG}, \ospsmarty{media.prevIMG}, \ospsmarty{media.nextIMG}}
\ospsmartytyp{Zeichenkette}
Enthält den Pfad zur jeweiligen Datei mit den Symbolen zum Bearbeiten der
Dateien in der Mediendatenbank (Löschen, Umbenennen \ldots).

\index{Template-Variablen!\$media.token}%
\ospitem{\ospsmarty{media.token}}
\ospsmartytyp{Zeichenkette}
Enthält eine zufällige Zeichenkette, die ein Formular vor
dem Fernsteuern durch unberechtigte Zugriffe schützt (siehe  
\cmd{XSRF} auf Seite \pageref{xsrf}). 
Diese Zeichenkette muss als verstecktes Element des Formulars zum Hochladen der
Datei eingebunden werden.

\index{Template-Variablen!\$media.form\_hidden}%
\ospitem{\ospsmarty{media.form\_hidden}}
\ospsmartytyp{Zeichenkette}
Enthält eine Liste von benötigten, versteckten HTML"=Formularfeldern. Diese
werden vom Serendipity-Kern geliefert und müssen in das Formular des Templates
eingebunden werden. Die Variable enthält volllständig formatierten HTML-Code.

\index{Template-Variablen!\$media.blimit\_path}%
\ospitem{\ospsmarty{media.blimit\_path}}
\ospsmartytyp{Zeichenkette}
Falls die Ausgabe der Dateien der Mediendatenbank auf ein Verzeichnis
eingeschränkt wird, enthält diese Variable den letzten übergeordneten
Verzeichnisnamen.

\index{Template-Variablen!\$media.only\_path}%
\index{Template-Variablen!\$media.limit\_path}%
\ospitem{\ospsmarty{media.only\_path}, \ospsmarty{media.limit\_path}}
\ospsmartytyp{Zeichenkette}
Falls die Ausgabe der Dateien der Mediendatenbank auf ein Verzeichnis
eingeschränkt wird, enthält diese Variable den vollständigen Verzeichnisnamen.

\index{Template-Variablen!\$media.only\_filename}%
\ospitem{\ospsmarty{media.only\_filename}}
\ospsmartytyp{Zeichenkette}
Falls die Ausgabe der Dateien der Mediendatenbank auf einen speziellen Dateinamen
eingeschränkt wird, enthält diese Variable den begrenzenden Dateinamen.

\index{Template-Variablen!\$media.sortorder}%
\ospitem{\ospsmarty{media.sortorder}}
\ospsmartytyp{Eindimensionales Array}
Falls die Ausgabe der Dateien der Mediendatenbank mit einer vom Benutzer
bestimmten Sortierungsreihenfolge erfolgt, enthält diese Variable die
Details zur Sortierung. Dazu werden die Unter-Array-Schlüssel \cmd{order}
(Datenbank-Spaltenname), \cmd{order\-mode} (aufsteigende oder absteigende Sortierung,
\cmd{ASC}/\cmd{DESC}),\osplinebreak{} \cmd{perpage} (Anzahl der Elemente pro Seite) eingebunden.

\index{Template-Variablen!\$media.keywords\_selected}%
\ospitem{\ospsmarty{media.keywords\_selected}}
\ospsmartytyp{Zeichenkette}
Falls die Ausgabe der Dateien der Mediendatenbank auf Dateien mit speziellem
Schlüsselwort eingeschränkt wird, enthält diese Variable die Liste der
Schlüsselwörter. 

\index{Template-Variablen!\$media.keywords}%
\ospitem{\ospsmarty{media.keywords}}
\ospsmartytyp{Eindimensionales Arrays} 
Enthält ein Array aller verfügbaren Schlüsselwörter (siehe Seite
\pageref{Medien-Schluesselwoerter}).

\index{Template-Variablen!\$media.filter}%
\ospitem{\ospsmarty{media.filter}}
\ospsmartytyp{Mehrdimensionales Array}
Falls die Ausgabe der Dateien der Mediendatenbank mit einer vom Benutzer
bestimmten Filterung erfolgt, enthält diese Variable die jeweiligen
Filtermechanismen. Jeder Unter-Array"=Schlüssel entspricht dem Namen eines
Datenbankfeldes, das jeweils weitere Array-Schlüssel enthalten kann. Jeder
Filter besitzt einen \cmd{from}- und \cmd{to}-Schlüssel, der einen Wert
\emph{von/bis} beschränkt. Beispiel:

\begin{ospcode}
\$media['filter'] = array(
  'title'     => 'Intern',
  'timestamp' => array(
                  'from' => 1192455852,
                  'to'   => 1182455852
                 ),
  'authorid'  => '12'                 
);
\end{ospcode}

Die Liste der verfügbaren Filter richtet sich nach der Variable
\ospsmarty{media.sort\_order}.

\index{Template-Variablen!\$media.sort\_order}%
\ospitem{\ospsmarty{media.sort\_order}}
\ospsmartytyp{Mehrdimensionales Array}
Enthält die Liste aller filterbaren Datenbankfelder der Mediendatenbank. Diese
Variable wird durch die Serendipity-Funktion
\cmd{serendipity\_getImageFields()} (Datei \cmd{include/functions""\_images.inc.php})
gefüllt und gibt Metadaten wie Typ und Beschreibung jedes Datenfeldes 
aus. Der Haupt-Array-Schlüssel gibt den Datenbankspaltennamen (wie \cmd{i.date})
an, die Unterschlüssel \cmd{desc} und \cmd{type} enthalten die jeweiligen Metadaten.

Die Liste dieser filterbaren Datenbankspalten wird dynamisch in den
Template-Dateien ausgewertet, um die entsprechenden Eingabeboxen für das
Suchformular zu erstellen.

\index{Template-Variablen!\$media.authors}%
\ospitem{\ospsmarty{media.authors}}
\ospsmartytyp{Mehrdimensionales Array}
Enthält ein Array aller verfügbaren Autoren des Blogs, so dass die Auswahl der
Dateien der Mediendatenbank auf einen gewünschten Eigentümer eingeschränkt
werden kann. Die Liste der Autoren wird mittels der Serendipity-Funktion
\cmd{serendipity""\_fetchUsers()} (Datei \cmd{include/functions.inc.php}) bezo-\osplinebreak{}gen.
Die verfügbaren Array-Schlüssel entsprechen den Datenbankspaltennamen der
\cmd{serendipity\_authors}-Tabelle.

\index{Template-Variablen!\$media.sort\_row\_interval}%
\ospitem{\ospsmarty{media.sort\_row\_interval}}
\ospsmartytyp{Eindimensionales Array}
Enthält ein Array mit den Werten, wie viele Dateien pro Seite dargestellt werden
können. Standardmäßig sind das die Werte \cmd{8, 16, 50, 100}.

\index{Template-Variablen!\$media.nr\_files}%
\ospitem{\ospsmarty{media.nr\_files}}
\ospsmartytyp{Zahl} 
Enthält die Anzahl der auf der Seite dargestellten Dateien der Mediendatenbank.

\index{Template-Variablen!\$media.files}%
\ospitem{\ospsmarty{media.files}}
\ospsmartytyp{Mehrdimensionales Array} 
Enthält ein Array aller darzustellenden Dateien der Mediendatenbank.

\index{Template-Variablen!\$media.paths}%
\ospitem{\ospsmarty{media.paths}}
\ospsmartytyp{Mehrdimensionales Array} 
Enthält ein Array aller eingerichteten Verzeichnisse der Mediendatenbank. Die
verfügbaren Array-Schlüssel sind identisch mit den auf Seite
\pageref{mediafolders} aufgeführten.

\index{Template-Variablen!\$media.is\_edit}%
\ospitem{\ospsmarty{media.is\_edit}}
\ospsmartytyp{Boolean} 
\ospsmartyscope{media\_properties.tpl}
Ist \cmd{true} gesetzt, wenn das Formular der Template-Datei
\cmd{media\_""properties.tpl} zum Bearbeiten der Eigenschaften einer
Datei der Mediendatenbank angezeigt werden soll.

\index{Template-Variablen!\$media.editform\_hidden}%
\ospitem{\ospsmarty{media.editform\_hidden}}
\ospsmartytyp{Zeichenkette} 
\ospsmartyscope{media\_properties.tpl}
Enthält HTML-Code für versteckte Formularwerte, die zum Bearbeiten einer
Datei der Mediendatenbank benötigt werden.

\index{Template-Variablen!\$media.keywordsPerBlock}%
\ospitem{\ospsmarty{media.keywordsPerBlock}}
\ospsmartytyp{Zahl} 
\ospsmartyscope{media\_properties.tpl}
Gibt an, wie viele Schlüsselwörter beim Zuweisen zu einer Datei der
Mediendatenbank nebeneinander in einer Zeile dargestellt werden können
(standardmäßig \cmd{3}).

\index{Template-Variablen!\$media.dprops}%
\ospitem{\ospsmarty{media.dprops}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{media\_properties.tpl}
Enthält ein Array mit den verfügbaren Eigenschaftsfeldern für eine Datei der
Mediendatenbank, wie im Blog konfiguriert (siehe Seite \pageref{entryproperties}).
\end{ospdescription}

\ospitem{\ospsmarty{media} (gültig in \cmd{media\_upload.tpl})}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{media\_upload.tpl}
\ospsmartydoc{include/admin/images.inc.php,}
\cmd{case 'addSelect'}\\
Enthält globale Eigenschaften der Mediendatenbank und deren vom Benutzer
angelegte Verzeichnisse, die benötigt werden, um das Formular zum Hochladen einer
Datei darzustellen.

\begin{ospdescription}
\index{Template-Variablen!\$media.token}%
\ospitem{\ospsmarty{media.token}}
\ospsmartytyp{Zeichenkette}
Enthält eine zufällige Zeichenkette, die ein Formular vor
dem Fernsteuern durch unberechtigte Zugriffe schützt (siehe  
\cmd{XSRF} auf Seite \pageref{xsrf}). 
Diese Zeichenkette muss als verstecktes Element des Formulars zum Hochladen der
Datei eingebunden werden.

\index{Template-Variablen!\$media.form\_hidden}%
\ospitem{\ospsmarty{media.form\_hidden}}
\ospsmartytyp{Zeichenkette}
Enthält eine Liste von benötigten, versteckten HTML"=Formularfeldern. Diese
werden vom Serendipity-Kern geliefert und müssen in das Formular des Templates
eingebunden werden. Die Variable enthält vollständig formatierten HTML-Code.

\index{Template-Variablen!\$media.folders}%
\ospitem{\ospsmarty{media.folders}}
\ospsmartytyp{Mehrdimensionales Array}
\label{mediafolders}
Enthält eine Liste aller Verzeichnisse und Unterverzeichnisse der
Mediendatenbank. Folgende Array-Schlüssel sind verfügbar:

\begin{ospdescription}
\ospitem{\ospsmarty{media.folders.X.name}}
\ospsmartytyp{Zeichenkette}
Enthält den Namen des jeweiligen Verzeichnisses.

\ospitem{\ospsmarty{media.folders.X.depth}}
\ospsmartytyp{Zeichenkette}
Gibt die Tiefe eines Verzeichnisses an. Für jedes Unterverzeichnis wird dieser
Wert um eins erhöht. Für \cmd{/bilder/ak\-tuell/pfadfinder/} würde die Variable
den Wert \cmd{3} enthalten.

\ospitem{\ospsmarty{media.folders.X.relpath}}
\ospsmartytyp{Zeichenkette}
Enthält den vollständigen Pfad des jeweiligen Verzeichnisses (z.\,B.\
\cmd{bilder/aktuell/pfadfinder/}). Das Verzeichnis wird ohne führenden, aber mit
abschließendem Schrägstrich ausgegeben. 

\ospitem{\ospsmarty{media.folders.X.directory}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn das Element ein Verzeichnis darstellt. Ein
Array derselben Struktur kann von einer internen Serendipity-Funktion auch
erstellt werden, wenn eine Liste aller verfügbaren Dateien der Mediendatenbank
ausgegeben werden soll. Nur in einem solchen Fall kann der Wert auch \cmd{false}
annehmen. Im Kontext der Template-Datei \cmd{media\_upload.tpl} ist der Wert der
Variable \ospsmarty{media"".folders.X.directory} jedoch erwartungsgemäß stets \cmd{true}.
\end{ospdescription}

\index{Template-Variablen!\$media.only\_path}%
\ospitem{\ospsmarty{media.only\_path}}
\ospsmartytyp{Zeichenkette}
Falls die Auswahl der Verzeichnisse für die hochzuladende Datei auf einen Teil
des Verzeichnisbaums beschränkt werden soll, enthält die Variable
\cmd{media.only\_path} den Pfad des Verzeichnisses, ab dem Unterverzeichnisse
eingebunden werden sollen.

\index{Template-Variablen!\$media.max\_file\_size}%
\ospitem{\ospsmarty{media.max\_file\_size}}
\ospsmartytyp{Zahl}
Enthält die maximale Größe (in Bytes) einer hochzuladenden Datei. Diese kann in
der Serendipity-Konfiguration festgelegt werden (siehe Seite \pageref{uploadlimit}).

\index{Template-Variablen!\$media.maxImgHeight}%
\index{Template-Variablen!\$media.maxImgWidth}%
\ospitem{\ospsmarty{media.maxImgHeight, media.maxImgWidth}}
\ospsmartytyp{Zahl}
Enthält die maximale Bildbreite und -höhe einer hochzuladenden Datei. Diese kann
in der Serendipity-Konfiguration festgelegt werden (siehe Seite \pageref{uploadlimit2}).
\end{ospdescription}

\ospitem{\ospsmarty{media} (gültig in \cmd{media\_choose.tpl}, \cmd{media\_showitem.tpl})}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{media\_choose.tpl, media\_showitem.tpl}
\ospsmartydoc{serendipity\_admin\_image\_selector.php}

\begin{ospdescription}
\index{Template-Variablen!\$media.GET\_STRING}%
\ospitem{\ospsmarty{media.GET\_STRING}}
\ospsmartytyp{Zeichenkette} 
Enthält eine Zeichenkette mit den benötigten URL-Variablen, die innerhalb des
Popups zur Auswahl einer Mediendatenbank-Datei an die Folgeseiten weitergereicht
werden müssen.

\index{Template-Variablen!\$media.frameset}%
\ospitem{\ospsmarty{media.frameset}}
\ospsmartytyp{Boolean} 
Enthält den Wert \cmd{true}, wenn die erste Seite des Mediendatenbank"=Popups
eingebunden wird. In diesem Fall stellt die Template"=Datei
\cmd{media\_choose.tpl} keine Inhalte dar, sondern nur das globale Frameset
(links Verzeichnisnavigation, rechts Inhalt).

\index{Template-Variablen!\$media.body\_id}%
\ospitem{\ospsmarty{media.body\_id}}
\ospsmartytyp{Zeichenkette} 
Enthält eine eindeutige ID, die dem \cmd{<body>}-Element des Templates
zugewiesen wird, um via CSS unterscheiden zu können, ob innerhalb des Framesets
die Verzeichnis- (Wert \cmd{serendipi\-tyAdminBodyImageSelectorTree}) oder
die Dateiauswahl (\cmd{se\-rendipityAdminBodyImageSelector}) dargestellt wird.
 
\index{Template-Variablen!\$media.css}%
\ospitem{\ospsmarty{media.css}}
\ospsmartytyp{Zeichenkette} 
Enthält die URL zur \cmd{admin/style.css}-Datei für die Darstellung des
Serendipity-Backends. In diesem Stylesheet wird auch das Aussehen der
Mediendatenbank definiert.

\index{Template-Variablen!\$media.css\_tree}%
\ospitem{\ospsmarty{media.css\_tree}}
\ospsmartytyp{Zeichenkette} 
Enthält die URL zur \cmd{treeview/tree.css}-Datei für die Darstellung der
Verzeichnisauswahl der Mediendatenbank.

\index{Template-Variablen!\$media.css\_front}%
\ospitem{\ospsmarty{media.css\_front}}
\ospsmartytyp{Zeichenkette} 
Enthält die URL zur \cmd{style.css}-Datei für die Darstellung des Frontends.

\index{Template-Variablen!\$media.token\_url}%
\ospitem{\ospsmarty{media.token\_url}}
\ospsmartytyp{Zeichenkette} 
Enthält eine zufällige Zeichenkette, die ein Formular vor
dem Fernsteuern durch unberechtigte Zugriffe schützt (siehe 
\cmd{XSRF} auf Seite \pageref{xsrf}). 
Diese Zeichenkette muss als Teil einer URL (GET-Variablen) eingebunden werden.

\index{Template-Variablen!\$media.imgID}%
\ospitem{\ospsmarty{media.imgID}}
\ospsmartytyp{Zahl} 
Falls nur eine einzelne Datei in der Oberfläche der Mediendatenbank angezeigt
werden soll, enthält diese Variable die ID für dieses Objekt. Diese
Variable entspricht der URL-GET-Variable 
\index{Serendipity-Variablen!\$serendipity['GET']['image']}%
\cmd{\$serendipity['GET']['image']}. Wurde eine Datei gerade\osplinebreak{} hochgeladen, 
enthält diese Variable die neue ID dieser Datei in der Mediendatenbank.

\index{Template-Variablen!\$media.from}%
\ospitem{\ospsmarty{media.from}}
\ospsmartytyp{Zeichenkette} 
Enthält den Wert der URL-GET-Variable 
\index{Serendipity-Variablen!\$serendipity['GET']['from']}%
\cmd{\$serendipity['GET']""['from']}, der die Verweisquelle für 
ein Bild (\ospsmarty{media.imgID}) angibt, von der aus ein Bild eingebunden wurde.

\index{Template-Variablen!\$media.case}%
\ospitem{\ospsmarty{media.case}}
\ospsmartytyp{Zeichenkette} 
An einigen Stellen bindet das Popup-Fenster der 
Mediendatenbank Inhalte des Backends ein, die sonst über andere Menüpunkte
ereichbar sind. Diese werden extern eingebunden.

Wenn ein Bild über das Mediendatenbank-Popup-Fenster eingebunden wird, bestimmt
der Benutzer über mehrere aufeinanderfolgende Schritte die Auswahl und 
Platzierung des Bildes. Die Ausgabe erfolgt jeweils innerhalb desselben
Templates (\cmd{me\-dia\_choose.tpl}). Um die Schritte voneinander unterscheiden zu
können, enthält diese Template-Variable  einen eindeutigen
Identifikator. Dieser kann auch dann abgefragt werden, wenn das Popup-Fenster
administrative Aktionen einbindet, die sonst eigentlich über andere Menüpunkte
erreichbar sind (z.\,B.\ \menu{Verzeichnisse verwalten}). Die Variable kann
folgende Werte aufweisen:

\cmd{external} bedeutet, dass Teile des Backends in der Mediendatenbank
eingebunden werden. Diese HTML-Ausgaben werden in der Variable
\ospsmarty{media.external} gespeichert.

\cmd{choose} bedeutet, dass der Benutzer eine Datei ausgewählt hat und nun deren
Platzierung bestimmen möchte.

\cmd{tree} bedeutet, dass die Verzeichnisstruktur (bei der Darstellung des
linken Frames) ausgegeben wird.

\cmd{showitem} bedeutet, dass die Eigenschaften eines speziellen Bildes
dargestellt werden.

\cmd{start} bedeutet, dass die Frameset-Übersicht angezeigt wird.

\cmd{default} bedeutet, dass die Übersicht der Dateien der Mediendatenbank
angezeigt wird.

\index{Template-Variablen!\$media.external}%
\ospitem{\ospsmarty{media.external}}
\ospsmartytyp{Zeichenkette} 
Enthält etwaige HTML-Ausgaben von Teilen des Backends (Formular zum
Datei-Upload, Verzeichnisse verwalten \ldots) zur Einbindung in das Popup der
Mediendatenbank.

\index{Template-Variablen!\$media.is\_uploaded}%
\ospitem{\ospsmarty{media.is\_uploaded}}
\ospsmartytyp{Boolean} 
Ist auf den Wert \cmd{true} gesetzt, wenn gerade eine Datei in die
Mediendatenbank hochgeladen wurde. Mittels dieser Variable können dann
entsprechende Meldungen über den Erfolg oder das Fehlschlagen des Vorgangs
ausgegeben werden.

\index{Template-Variablen!\$media.is\_created}%
\ospitem{\ospsmarty{media.is\_created}}
\ospsmartytyp{Boolean} 
Ist auf den Wert \cmd{true} gesetzt, wenn gerade ein Verzeichnis in der
Mediendatenbank erstellt wurde. Mittels dieser Variable können dann
entsprechende Meldungen über den Erfolg oder das Fehlschlagen des Vorgangs
ausgegeben werden.

\index{Template-Variablen!\$media.is\_deleted}%
\ospitem{\ospsmarty{media.is\_deleted}}
\ospsmartytyp{Boolean} 
Ist auf den Wert \cmd{true} gesetzt, wenn gerade ein Verzeichnis oder eine Datei
in der Mediendatenbank gelöscht wurde. Mittels dieser Variable können dann
entsprechende Meldungen über den Erfolg oder das Fehlschlagen des Vorgangs
ausgegeben werden.

\index{Template-Variablen!\$media.new\_dir}%
\ospitem{\ospsmarty{media.new\_dir}}
\ospsmartytyp{Zeichenkette} 
Falls ein neues Verzeichnis erstellt wurde, enthält diese Variable den Pfad zu
diesem neuen Verzeichnis (siehe auch \ospsmarty{media.is\_""created}).

\label{mediafile}
\index{Template-Variablen!\$media.file}%
\ospitem{\ospsmarty{media.file}}
\ospsmartytyp{Mehrdimensionales Array} 
Enthält die Metadaten für eine gewählte Datei der Mediendatenbank. Die
Array-Schlüssel sind:

\begin{ospdescription}
\index{Template-Variablen!\$media.file.id}%
\ospitem{\ospsmarty{media.file.id}}
\ospsmartytyp{Zahl} 
Enthält die ID des Mediendatenbank-Objekts.

\index{Template-Variablen!\$media.file.name}%
\ospitem{\ospsmarty{media.file.name}}
\ospsmartytyp{Zeichenkette} 
Enthält den Dateinamen des Mediendatenbank-Objekts\osplinebreak{} (ohne Datei-Endung).

\index{Template-Variablen!\$media.file.extension}%
\ospitem{\ospsmarty{media.file.extension}}
Enthält die Datei-Endung des Mediendatenbank-Objekts. 
\ospsmartytyp{Zeichenkette} 

\index{Template-Variablen!\$media.file.mime}%
\ospitem{\ospsmarty{media.file.mime}}
\ospsmartytyp{Zeichenkette} 
\index{MIME}%
Enthält den MIME\footnote{\emph{Multipurpose Internet Mail
Extensions} sind eine standardisierte Spezifikation von Datentypen und geben an, ob ein Objekt ein
Bild, eine Videodatei oder anderes darstellt. Ein MIME-Type besteht aus einem
Basistypen, gefolgt von einem Schrägstrich und dann einem Detailwert.
\cmd{image/jpeg} wird beispielsweise für JPEG-Grafiken verwendet.}-Typ eines
Mediendatenbank-Objekts.

\index{Template-Variablen!\$media.file.size}%
\ospitem{\ospsmarty{media.file.size}}
\ospsmartytyp{Zahl} 
Enthält die Dateigröße (in Bytes) des Mediendatenbank-Objekts.

\index{Template-Variablen!\$media.file.dimensions\_width}%
\index{Template-Variablen!\$media.file.dimensions\_height}%
\ospitem{\ospsmarty{media.file.dimensions\_width},}
\ospadditem{\ospsmarty{media.file.dimensions\_height}}
\ospsmartytyp{Zahl} 
Falls das Mediendatenbank-Objekt eine Grafik ist, enthalten diese Variablen die
Breite und Höhe (in Pixeln). Bei anderen Dateitypen (Dokumente, Videos)
enthalten diese Variablen den Wert 0.

\index{Template-Variablen!\$media.file.thumbWidth}%
\index{Template-Variablen!\$media.file.thumbHeight}%
\ospitem{\ospsmarty{media.file.thumbWidth},}
\ospadditem{\ospsmarty{media.file.thumbHeight}}
\ospsmartytyp{Zahl} 
Enthält die Breite und Höhe der Vorschaugrafik.

\index{Template-Variablen!\$media.file.date}%
\ospitem{\ospsmarty{media.file.date}}
\ospsmartytyp{Zahl} 
Enthält Hochladedatum eines Mediendatenbank-Objekts (in Unix-Sekunden).

\index{Template-Variablen!\$media.file.thumbnail\_name}%
\ospitem{\ospsmarty{media.file.thumbnail\_name}}
\ospsmartytyp{Zeichenkette} 
Wurde ein Vorschaubild (\emph{Thumbnail}) für ein Mediendatenbank"=Objekt
erstellt, enthält diese Variable das Suffix für diese Dateien,
standardmäßig \cmd{serendipityThumb}. Dieses Suffix wird nach dem Dateinamen,
aber vor der Datei"=Endung platziert, so dass eine Vorschaudatei dem Schema\osplinebreak{}
\cmd{Bild.serendipityThumb.jpg} entspricht. Das Suffix kann vom Administrator
des Blogs frei vergeben werden (siehe Seite \pageref{thumbnailendung}).

\index{Template-Variablen!\$media.file.authorid}%
\ospitem{\ospsmarty{media.file.authorid}}
\ospsmartytyp{Zahl} 
Enthält die ID des Autors, der die Datei hochgeladen hat. Wenn eine Datei für
alle Redakteure zugänglich sein soll, enthält diese ID den Wert \cmd{0}.

\index{Template-Variablen!\$media.file.path}%
\ospitem{\ospsmarty{media.file.path}}
\ospsmartytyp{Zeichenkette} 
Enthält den Namen des Verzeichnisses (relativ zum Stammverzeichnis der
Mediendatenbank), in dem das Objekt gespeichert wurde.

\index{Template-Variablen!\$media.file.realfile}%
\ospitem{\ospsmarty{media.file.realfile}}
\ospsmartytyp{Zeichenkette} 
Enthält den vollständigen Pfad einer Datei der Mediendatenbank, wo sie auf dem
Server abgelegt wurde.

\index{Template-Variablen!\$media.file.hotlink}%
\ospitem{\ospsmarty{media.file.hotlink}}
\ospsmartytyp{Zeichenkette} 
Wenn ein Objekt der Mediendatenbank nicht lokal gespeichert wurde, sondern von
einem fremden Server geladen werden soll (\cmd{hotlinking}), enthält diese
Variable die URL, unter der die Datei verfügbar ist.

\index{Template-Variablen!\$media.file.nice\_hotlink}%
\ospitem{\ospsmarty{media.file.nice\_hotlink}}
\ospsmartytyp{Zeichenkette} 
Falls das Objekt der Mediendatenbank von einem fremden Server geladen wird
(\cmd{hotlinking}), enthält die Variable 
die Ziel-URL, die jeweils nach 45 Zeichen automatisch umbrochen wird, so dass
man sie problemlos unterhalb eines Bildes anzeigen kann.

\index{Template-Variablen!\$media.file.realname}%
\ospitem{\ospsmarty{media.file.realname}}
\ospsmartytyp{Zeichenkette} 
Enthält den vollständigen Dateinamen, wie die Datei ursprünglich hochgeladen
wurde. Da im Falle doppelter Dateinamen der Name auf dem Server automatisch
durchnummeriert wird, kann mittels \ospsmarty{media.file.realname} 
dennoch der ursprüngliche Dateiname ausgelesen werden.

\index{Template-Variablen!\$media.file.full\_thumb}%
\ospitem{\ospsmarty{media.file.full\_thumb}}
\ospsmartytyp{Zeichenkette}
Enthält den vollständigen Pfad im Dateisystem zum Vorschaubild eines
Mediendatenbank-Objekts.

\index{Template-Variablen!\$media.file.full\_thumbHTTP}%
\index{Template-Variablen!\$media.file.show\_thumb}%
\ospitem{\ospsmarty{media.file.full\_thumbHTTP},}
\ospadditem{\ospsmarty{media.file.show\_thumb}}
\ospsmartytyp{Zeichenkette} 
Enthält den vollständigen Pfad zum Vorschaubild eines
Mediendatenbank"=Objekts, über den das Bild mittels HTTP-URL aufgerufen werden kann.

\index{Template-Variablen!\$media.file.imgsrc}%
\ospitem{\ospsmarty{media.file.imgsrc}}
\ospsmartytyp{Zeichenkette} 
Enthält den relativen Pfad (ab Serendipity"=Stammverzeichnis) zum
Vorschaubild eines Mediendatenbank"=Objekts,\osplinebreak{} über den das Bild mittels HTTP-URL
aufgerufen werden kann.

\index{Template-Variablen!\$media.file.full\_file}%
\ospitem{\ospsmarty{media.file.full\_file}}
\ospsmartytyp{Zeichenkette} 
Enthält den vollständigen HTTP-Pfad zum Objekt der Mediendatenbank.

\index{Template-Variablen!\$media.file.diskname}%
\ospitem{\ospsmarty{media.file.diskname}}
\ospsmartytyp{Zeichenkette} 
Enthält den vollen Dateinamen eines Objekts der Mediendatenbank, zusammengesetzt
aus \ospsmarty{media.file.name}\osplinebreak{} und \ospsmarty{media.file.extension}. 

\index{Template-Variablen!\$media.file.links}%
\ospitem{\ospsmarty{media.file.links}}
\ospsmartytyp{Eindimensionales Array} 
Enthält ein Array mit URLs, von denen auf das Objekt der Mediendatenbank
verwiesen wurde. Diese Linkliste kann nur dann automatisch ausgewertet werden,
wenn die Objekte der Mediendatenbank mittels spezieller Methode ausgeliefert
werden (siehe Seite \pageref{mdb-profi}).

\index{Template-Variablen!\$media.file.dim}%
\ospitem{\ospsmarty{media.file.dim}}
\ospsmartytyp{Eindimensionales Array} 
Enthält ein Array mit Metadaten des Vorschaubildes. Das Array wird mittels der
PHP-Funktion \cmd{getimagesize}\footnote{\cmd{http://www.php.net/getimagesize}} erstellt.

\index{Template-Variablen!\$media.file.is\_image}%
\ospitem{\ospsmarty{media.file.is\_image}}
\ospsmartytyp{Boolean} 
Enthält den Wert \cmd{true}, wenn ein Objekt der Mediendatenbank eine Bilddatei
ist. Bei Dokumenten und anderen Dateitypen enthält diese Variable den Wert \cmd{false}.

\index{Template-Variablen!\$media.file.mediatype}%
\ospitem{\ospsmarty{media.file.mediatype}}
\ospsmartytyp{Zeichenkette} 
Enthält den genauen Typ eines Objektes der Mediendatenbank: \cmd{image}, \cmd{video},
\cmd{audio}, \cmd{document}, \cmd{archive} (gepackte Dateiarchive) oder 
\cmd{binary} (alle anderen Dateien).

\index{Template-Variablen!\$media.file.is\_editable}%
\ospitem{\ospsmarty{media.file.is\_editable}}
\ospsmartytyp{Boolean} 
Falls der aktuelle Redakteur das Objekt der Mediendatenbank bearbeiten oder
löschen darf (aufgrund seiner Benutzerrechte), enthält diese Variable den Wert \cmd{true}.

\index{Template-Variablen!\$media.file.preview\_url}%
\ospitem{\ospsmarty{media.file.preview\_url}}
\ospsmartytyp{Zeichenkette} 
Enthält die URL, mit der das Bild mittels der Funktionen der Mediendatenbank
dargestellt werden kann.

\index{Template-Variablen!\$media.file.preview}%
\ospitem{\ospsmarty{media.file.preview}}
\ospsmartytyp{Zeichenkette} 
Enthält ein HTML \cmd{<img>}-Tag, das die Vorschaugrafik darstellt und ggf.
einen Link (\cmd{<a href}) zur Originalversion der Datei (als Popup-Fenster) 
einbindet.

\index{Template-Variablen!\$media.file.popupWidth}%
\index{Template-Variablen!\$media.file.popupHeight}%
\ospitem{\ospsmarty{media.file.popupWidth},}
\ospadditem{\ospsmarty{media.file.popupHeight}}
\ospsmartytyp{Zahl} 
Enthält die Breite und Höhe für ein Popup-Fenster, in dem die Originalversion
der Datei per Klick auf das Vorschaubild geöffnet wird.
 
\index{Template-Variablen!\$media.file.nice\_size}%
\ospitem{\ospsmarty{media.file.nice\_size}}
\ospsmartytyp{Zeichenkette} 
Enthält die Dateigröße als auf zwei Nachkommastellen gerundeten Kilobyte-Wert.

\index{Template-Variablen!\$media.file.finishJSFunction}%
\ospitem{\ospsmarty{media.file.finishJSFunction}}
\ospsmartytyp{Zeichenkette} 
Wenn ein Objekt der Mediendatenbank vom Benutzer zum Einfügen in einen Artikel
ausgewählt wird, können externe Plugins die Darstellung des Dialogs zum
Einfügen verändern. Am Ende wird der zusammengestellte HTML-Code für die
Einbindung in den Artikel zurückgeliefert und über die
JS-Funktion \cmd{serendipity\_imageSelector\_""done()}\osplinebreak{} ausgewertet. 
Wenn ein Plugin stattdessen ein eigenes JavaScript verwenden will, muss der Name
dieser JavaScript-Funktion in der Variable
\ospsmarty{media.file.finishJSFunc\-tion} hinterlegt werden und wird dort später
über die Smarty-Template-Datei \cmd{media\_choose.tpl} aufgerufen.

\index{Template-Variablen!\$media.file.origfinishJSFunction}%
\ospitem{\ospsmarty{media.file.origfinishJSFunction}}
\ospsmartytyp{Zeichenkette} 
Diese Variable enthält den ursprünglichen JavaScript"=Funktionsaufruf für die
Einbindung eines Objekts der Mediendatenbank (siehe vorige Variable).

\index{Template-Variablen!\$media.file.fast\_select}%
\ospitem{\ospsmarty{media.file.fast\_select}}
\ospsmartytyp{Boolean} 
Falls ein Redakteur ein Objekt der Mediendatenbank, das keine Grafik
darstellt, zum Einfügen in einen Artikel auswählt, kann ein vollständiger Link
zu dieser Datei ohne weitere Positionierungsdialoge zurückgeliefert werden. Die\osplinebreak{}
Template-Datei \cmd{media\_choose.tpl} kann in einem solchen Fall einige
Funktionsaufrufe übergehen. Dies geschieht über die Variable
\ospsmarty{media.file.fast\_select}, die den Wert \cmd{true} enthält, wenn keine
Grafikdatei gewählt wurde.

\index{Template-Variablen!\$media.file.props}%
\ospitem{\ospsmarty{media.file.props}}
\ospsmartytyp{Mehrdimensionales Array} 
Dieses Array enthält die Meta-Eigenschaften einer Datei, wie sie vom Benutzer
frei vergeben werden können (Schlüsselwörter, Beschreibungen, EXIF-Daten
\ldots). Das Array ist in vier Hauptschlüssel untergliedert:

\osppagebreak

\index{Template-Variablen!\$media.file.props.base\_property}%
\ospsmarty{media.file.props.base\_property}\\
\ospsmartytyp{Eindimensionales Array} 
Enthält die vom Benutzer zugewiesenen freien Eigenschaften für Objekte (siehe
Seite \pageref{entryproperties}).
Der jeweilige Schlüssel des Unter-Arrays entspricht dem Namen der
Eigenschaft (\cmd{DPI}, \cmd{COPYRIGHT} \ldots), der Wert enthält die
Eingabe des Benutzers.

\index{Template-Variablen!\$media.file.props.base\_hidden}%
\ospsmarty{media.file.props.base\_hidden}\\
\ospsmartytyp{Eindimensionales Array} 
Enthält interne Wertezuweisungen.
\ospsmarty{media.file.props.""base\_hidden.author} enthält den Namen des Autors
für das jeweilige Objekt der Mediendatenbank und
\ospsmarty{media.""file.props.base\_hidden.authorid} die ID dieses Autors. 

\index{Template-Variablen!\$media.file.props.base\_keyword}%
\ospsmarty{media.file.props.base\_keyword}\\
\ospsmartytyp{Eindimensionales Array} 
Enthält die vom Benutzer zugewiesenen Schlüsselwörter zu einem Objekt der
Mediendatenbank (siehe Seite \pageref{Medien-Schluesselwoerter}).
Der Array-Schlüssel entspricht dem gesetzten Schlüsselwort, als Wert
wird immer \cmd{1} vergeben.

\index{Template-Variablen!\$media.file.props.base\_metadata}%
\ospsmarty{media.file.props.base\_metadata}\\
\ospsmartytyp{Eindimensionales Array} 
Enthält etwaige EXIF- oder MP3-Metadaten. Der Name des Array-Schlüssels
entspricht dem Metadaten-Schlüssel und der Wert dem jeweiligen Inhalt.
\end{ospdescription}

\index{Template-Variablen!\$media.perm\_denied}%
\ospitem{\ospsmarty{media.perm\_denied}}
\ospsmartytyp{Boolean} 
Ist auf den Wert \cmd{true} gesetzt, wenn ein Benutzer für eine gewählte Aktion
keine ausreichenden Zugriffsrechte hat.

\index{Template-Variablen!\$media.paths}%
\ospitem{\ospsmarty{media.paths}}
\ospsmartytyp{Mehrdimensionales Array} 
Enthält ein Array aller eingerichteten Verzeichnisse der Mediendatenbank. Die
verfügbaren Array-Schlüssel sind identisch mit den auf Seite
\pageref{mediafolders} aufgeführten.

\end{ospdescription}

\index{Template-Variablen!\$MEDIA\_LIST}%
\ospitem{\ospsmarty{MEDIA\_LIST}}
\ospsmartytyp{Zeichenkette} 
\ospsmartyscope{media\_choose.tpl, media\_showitem.tpl}
Enthält die Dateiübersicht als HTML-Ausgabe, die anhand der Template"=Datei
\cmd{media\_items.tpl} geparst wurde.

\end{ospdescription}




%revised
%---------------------------------------------------------------------------
\label{commenttemplates}%
\index{Template-Dateien!commentpopup.tpl}%
\index{Template-Dateien!comments.tpl}%
\index{Template-Dateien!trackbacks.tpl}%
\subsubsection{commentpopup.tpl, comments.tpl, trackbacks.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{commentpopup.tpl} wird zur Ausgabe von Kommentaren zu
einem Blog-Artikel verwendet. Die Kommentare und Trackbacks selbst werden über
die Template-Dateien \cmd{comments.tpl} und \cmd{trackbacks.""tpl} eingebunden, die
auch für die Einbindung von Kommentaren innerhalb der Detailansicht eines
Blog-Artikels herangezogen werden.

\begin{ospdescription}

\ospitem{\ospismarty{entry\_id}}
\ospsmartytyp{Zahl}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält die ID des Blog-Artikels, zu dem die Kommentare eingebunden werden.

\ospitem{\ospismarty{comment\_url}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält die URL der aktuellen Seite, die für das Ziel von Formularen oder Links
eingesetzt werden kann.

\ospitem{\ospismarty{comment\_string}}
\ospsmartytyp{Eindimensionales Array}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält ein Array mit Wortstücken. Dieses enthält Platzhalter, so dass die
später notwendigen Variablen dazwischen eingebunden werden können. Die
Wortstücke enthalten je nach Aktion des Besuchers entweder einen Hinweis zum
erfolgreichen Kommentieren oder Fehlermeldungen.

\ospitem{\ospismarty{comment\_entryurl}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Permalink zum Blog-Artikel, dessen Kommentare/""Trackbacks angesehen werden.
 
\ospitem{\ospismarty{is\_comment\_added}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn ein Kommentar hinzugefügt wurde.

\ospitem{\ospismarty{is\_showtrackbacks}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn innerhalb des Popup-Fensters Trackbacks
angezeigt werden.

\ospitem{\ospismarty{is\_showcomments}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn innerhalb des Popup-Fensters Kommentare
angezeigt werden.

\ospitem{\ospismarty{is\_comment\_allowed}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn Kommentare zum jeweiligen Blog"=Artikel
zugelassen werden.

\ospitem{\ospismarty{is\_comment\_notadded}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn ein Kommentar nicht hinzugefügt werden konnte.

\ospitem{\ospismarty{is\_comment\_empty}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{comment.php}
Enthält den Wert \cmd{true}, wenn ein Kommentar keinen Inhalt enthielt und
daher nicht hinzugefügt werden konnte.

\ospitem{\ospismarty{COMMENTFORM}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentpopup.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,} 
\cmd{serendipity\_displayCommentForm()}\\
Enthält den geparsten HTML-Inhalt der Datei \cmd{commentform.tpl} zur
Darstellung eines Kommentarformulars.

\ospitem{\ospismarty{comments}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{comments.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_printComments()}\\
Das Array \ospsmarty{comments} enthält die Liste der Kommentare zu einem
Blog-Artikel und wird mittels der
\ospsmarty{\{serendipity\_printComments}-Smarty-Funktion innerhalb der
\cmd{entries.tpl}-Template-Datei eingebunden. 

\label{template-comments}
\begin{ospdescription}
\ospitem{\ospsmarty{comments.X.comment}}
\ospsmartytyp{Zeichenkette}
Enthält den Kommentartext. HTML-Tags werden entfernt und etwaige Sonderzeichen
zur Sicherheit maskiert.

\ospitem{\ospsmarty{comments.X.body}}
\ospsmartytyp{Zeichenkette}
Enthält den ursprünglichen, unveränderten Kommentartext, wie er eingegeben wurde.
HTML-Tags und etwaige Sonderzeichen sind nach wie vor enthalten.

\ospitem{\ospsmarty{comments.X.url}}
\ospsmartytyp{Zeichenkette}
Enthält die Homepage des Kommentators.

\ospitem{\ospsmarty{comments.X.link\_delete}}
\ospsmartytyp{Zeichenkette}
Enthält eine URL, mit der Blog-Redakteure (die entsprechenden Rechte
vorausgesetzt) einen Kommentar löschen können.

\ospitem{\ospsmarty{comments.X.no\_email}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn die E-Mail-Adresse der Kommentatoren entfernt
werden soll.

\ospitem{\ospsmarty{comments.X.email}}
\ospsmartytyp{Zeichenkette}
Enthält die E-Mail-Adresse des Kommentators. Das \cmd{@}-Zeichen wird durch die
Zeichenkette \cmd{[at]} ersetzt.

\ospitem{\ospsmarty{comments.X.clear\_email}}
\ospsmartytyp{Zeichenkette}
Enthält die ursprüngliche, unveränderte E-Mail-Adresse des\osplinebreak{} Kommentators.

\ospitem{\ospsmarty{comments.X.pos}}
\ospsmartytyp{Zahl}
Enthält eine fortlaufende Zahl, die die aktuelle Nummer eines Kommentars darstellt.

\ospitem{\ospsmarty{comments.X.parent\_id}}
\ospsmartytyp{Zahl}
Wenn sich ein Kommentator auf einen vorhergehenden Kommentar bezieht, enthält der Wert der
Variable \ospsmarty{comments.X.""parent\_id} die ID dieses Kommentars.

\ospitem{\ospsmarty{comments.X.trace}}
\ospsmartytyp{Zeichenkette}
Bei aufeinander bezogenen Kommentaren wird die Verschachtelungstiefe durch die
Variable \ospsmarty{comments.X.trace} angegeben. Für den zweiten Kommentar
unterhalb des dritten Kommentars würde diese Variable den Wert \cmd{3.2} enthalten.

\ospitem{\ospsmarty{comments.X.depth}}
\ospsmartytyp{Zahl}
Enthält die aktuelle Verschachtelungstiefe für aufeinander bezogene
Kommentare. 

\ospitem{\ospsmarty{comments.X.author}}
\ospsmartytyp{Zeichenkette}
Enthält den Namen des Kommentators.

\ospitem{\ospsmarty{comments.X.id}, \ospsmarty{comments.X.commentid}}
\ospsmartytyp{Zahl}
Enthält eine eindeutige ID des Kommentars.

\ospitem{\ospsmarty{comments.X.authorid}}
\ospsmartytyp{Zahl}
Enthält die ID des Autors, der den Blog-Artikel verfasst hat, auf welchen sich der
Kommentar bezieht.

\ospitem{\ospsmarty{comments.X.entry\_id}, \ospsmarty{comments.X.entryid}}
\ospsmartytyp{Zahl}
Enthält die eindeutige ID des Blog-Artikels, auf den sich der Kommentar bezieht.

\ospitem{\ospsmarty{comments.X.title}}
\ospsmartytyp{Zeichenkette}
Enthält den Titel des Blog-Artikels, auf den sich der Kommentar bezieht.

\ospitem{\ospsmarty{comments.X.timestamp}}
\ospsmartytyp{Zahl}
Enthält die Uhrzeit (in Unix-Sekunden), zu der der Kommentar verfasst wurde. 

\ospitem{\ospsmarty{comments.X.ctitle}}
\ospsmartytyp{Zeichenkette}
Enthält eine etwaige Überschrift des Kommentars. Dieses Eingabefeld wird
standardmäßig in Serendipity-Templates nur für Trackbacks verwendet.

\ospitem{\ospsmarty{comments.X.ip}}
\ospsmartytyp{Zeichenkette}
Enthält die IP-Adresse des Kommentators.

\ospitem{\ospsmarty{comments.X.type}}
\ospsmartytyp{Zeichenkette}
Gibt den Typ des Kommentars an. Dies kann entweder \cmd{NORMAL} (Kommentare),
\cmd{TRACKBACK} oder \cmd{PINGBACK} sein. 

\ospitem{\ospsmarty{comments.X.subscribed}}
\ospsmartytyp{Boolean}
Ist auf \cmd{1} gesetzt, wenn der Verfasser eines Kommentars die Option
\menu{Bei Aktualisierung dieser Kommentare benachrichtigen} aktiviert hat.
\end{ospdescription}

\ospitem{\ospismarty{trackbacks}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{trackbacks.tpl}
\ospsmartydoc{include/functions\_trackbacks.inc.php,}
\cmd{serendipity\_printTrackbacks()}\\
Das Array \ospsmarty{trackbacks} enthält die Liste der Trackbacks zu einem
Blog-Artikel und wird mittels der Smarty-Funktion
\ospsmarty{serendipity\_""printTrackbacks} innerhalb der
\cmd{entries.tpl}-Template-Datei eingebunden. 

Das Trackbacks-Array verfügt über ähnliche Array-Schlüssel wie das
ab Seite \pageref{template-comments} aufgeführte \ospsmarty{comments}-Array.
Dabei sind folgende
Schlüssel identisch: \cmd{id}, \cmd{entry\_id}, \cmd{parent\_id}, \cmd{timestamp}, \cmd{title}, \cmd{author},
\cmd{email}, \cmd{url}, \cmd{ip}, \cmd{body}, \cmd{type}, \cmd{subscribed}.

Hinzu kommt folgender Schlüssel:

\begin{ospdescription}
\ospitem{\ospsmarty{trackbacks.X.status}}
\ospsmartytyp{Zeichenkette}
Gibt an, ob ein Trackback bereits veröffentlicht (\cmd{approved}) ist oder sich noch in
Freischaltung (\cmd{pending}) befindet.

\end{ospdescription}

\end{ospdescription}


%---------------------------------------------------------------------------
\index{Template-Dateien!commentform.tpl}%
\subsubsection{commentform.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{commentform.tpl} ist ein Formular zum Hinzufügen von
Kommentaren. Dieses wird über die Smarty-Variable \ospsmarty{COMMENTFORM}
sowohl innerhalb der Template-Datei \cmd{entries.tpl} als auch in
\cmd{comment\-popup.tpl} eingebunden.

\begin{ospdescription}

\ospitem{\ospismarty{commentform\_action}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die Ziel-URL, an die die Daten des Kommentarformulars gesendet werden.

\ospitem{\ospismarty{commentform\_id}}
\ospsmartytyp{Zahl}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die ID des Artikels, für den das Kommentarformular eingebunden wird.

\ospitem{\ospismarty{commentform\_name}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die Eingabe \cmd{Name} des Benutzers im Kommentarformular.

\ospitem{\ospismarty{commentform\_email}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die Eingabe \cmd{E-Mail} des Benutzers im Kommentarformular.

\ospitem{\ospismarty{commentform\_url}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die Eingabe \cmd{Homepage} des Benutzers im Kommentarformular.

\ospitem{\ospismarty{commentform\_remember}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält den Wert \cmd{true}, wenn der Benutzer die Option \menu{Daten
merken?} im Kommentarformular aktiviert hat, um seine Stammdaten in einem
Cookie zu speichern und bei Folgekommentaren nicht erneut eintragen zu müssen.

\ospitem{\ospismarty{commentform\_subscribe}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält den Wert \cmd{true}, wenn der Benutzer die Option 
\menu{Bei Aktualisierung dieser Kommentare benachrichtigen} im
Kommentarformular aktiviert hat.

\ospitem{\ospismarty{commentform\_replyTo}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält den HTML-Code zur Darstellung eines Auswahlfeldes mit allen bereits
bestehenden Kommentaren eines Artikels. Der kommentierende Benutzer kann darin
auswählen, auf welchen Kommentar er sich beziehen möchte.

\ospitem{\ospismarty{commentform\_data}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält den Kommentartext des Benutzers.

\ospitem{\ospismarty{is\_commentform\_showToolbar}}
\label{commentformshowtoolbar}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enhält den Wert \cmd{true}, wenn die beiden Sonderoptionen \menu{Daten
merken} und \menu{Bei Aktualisierung dieser Kommentare benachrichtigen}
angezeigt werden sollen.

\ospitem{\ospismarty{is\_allow\_Subscriptions}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enhält den Wert \cmd{true}, wenn \menu{Bei Aktualisierung dieser Kommentare benachrichtigen}
angezeigt werden soll. Diese Einstellung kann über die globale
Serendipity-Konfiguration (siehe Seite \pageref{config-subscriptions})
vorgenommen werden.

\ospitem{\ospismarty{is\_moderate\_comments}}
\ospsmartytyp{Boolean}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält den Wert \cmd{true}, wenn Kommentare des aktuellen Artikels moderiert
werden. 

\ospitem{\ospismarty{commentform\_entry}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_displayCommentForm()}\\
Enthält die Metadaten des Blog-Artikels (siehe Seite \pageref{template-entries}). 
\end{ospdescription}

%---------------------------------------------------------------------------
\index{Template-Dateien!comments\_by\_author.tpl}%
\subsubsection{comments\_by\_author.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{comments\_by\_author.tpl} wird ausgegeben, wenn eine
Übersichtsseite der Kommentare unabhängig von Ihren Blog-Artikeln dargestellt
wird (siehe Seite \pageref{Kommentaruebersicht}). Die Template-Datei wird über
die Variable \ospsmarty{ENTRIES} in die Template-Datei \cmd{content.tpl} eingebunden.
\begin{ospdescription}

\ospitem{\ospismarty{comments\_by\_authors}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{commentform.tpl}
\ospsmartydoc{include/functions\_comments.inc.php,}
\cmd{serendipity\_printCommentsByAuthor()}\\
Enthält die Daten der Kommentare, die in der Übersicht dargestellt werden
sollen. Der Schlüssel der ersten Dimension des Arrays enthält die ID des
Blog-Artikels, auf die sich ein Kommentar bezieht. Als Wert enthält die zweite
Dimension ein Unter-Array mit den Daten des ersten Kommentars, der zu der ID des
Blog-Artikels gehört. Die Array-Schlüssel sind dabei identisch zu dem ab Seite
\pageref{template-comments} aufgeführten \ospsmarty{comments}-Array.
Dabei sind folgende Schlüssel identisch: \cmd{id, entry\_id, parent\_id,
timestamp, title, author, email, url, ip, body, type, subscribed}.

Zusätzlich verfügt das Array über den Schlüssel
\ospsmarty{comments\_by\_au\-thors.X.link}, das den Permalink zum Blog-Artikel
enthält. Ein weiterer Schlüssel \ospsmarty{comments\_by\_authors.comments}
enthält ein Array mit allen Kommentaren zu diesem Blog-Artikel. Dabei ist
der erste Kommentar, der sich bereits in den Werten der zweiten Dimension
wiederfindet, nochmals enthalten. Das Array der zweiten Dimension dient
grundsätzlich nur der Speicherung der Metadaten zu einem Artikel, da diese mit
den Stammdaten eines Kommentars vermischt sind.

Zuletzt enthält der Schlüssel \ospsmarty{comments\_by\_authors.X.tpl\_com\-ments}
jeweils den vollständigen HTML-Code des zu einem Blog-Artikel geparsten
\cmd{comments.tpl}-Templates. Da durch diese Einbindung des
\cmd{comments.tpl}-Templates Redundanzen vermieden werden können, enthält die
Template-Datei \cmd{comments\_by\_authors.tpl} nur verhältnismäßig wenig
HTML/Smarty-Code.

\end{ospdescription}


%revised
%---------------------------------------------------------------------------
\index{Template-Dateien!plugin\_calendar.tpl}%
\subsubsection{plugin\_calendar.tpl}
%---------------------------------------------------------------------------

\label{plugin-calendar-tpl}%
Das Seitenleisten-Plugin \menu{Kalender} gibt seinen HTML-Code über das
Smarty-Template \cmd{plugin\_calendar.tpl} aus. Folgende Variablen sind dort
verfügbar: 

\begin{ospdescription}

\ospitem{\ospsmarty{plugin\_calendar\_weeks}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{plugin\_calendar.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_calendar\_plugin::generate\_content()}\\
Enthält ein mehrdimensionales Array mit den Daten des jeweiligen dargestellten
Monats. 

Das Array gibt sozusagen eine Tages-Matrix wieder, besteht also aus Zeilen und
Spalten. Die Array-Schlüssel der ersten Dimension entsprechen dabei der Zeile,
die jeweils eine ganze Kalenderwoche enthält. Das heißt,
\ospsmarty{plugin\_calendar\_weeks.0} enthält die ersten 7 Tage,
\ospsmarty{plugin\_calendar\_weeks.1} die zweiten 7 Tage und so fort 
bis zum Ende des jeweiligen Monats.

Jedes dieser Arrays, die einer Kalenderzeile entsprechen, besitzt einen
Array-Schlüssel \ospsmarty{plugin\_calendar\_weeks.0.days}, in dem ein
durchnummeriertes Unter-Array steckt. Dies verfügt jeweils über die
Array-Schlüssel \cmd{name} (Tag), \cmd{properties} (spezielle Attribute) und\osplinebreak{}
\cmd{classes} (zugewiesene CSS-Klasse). Folgende Attribute (\cmd{properties})
können für jeden Tag zugewiesen werden:


\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.FirstRow}\osplinebreak{} ist auf
\cmd{1} gesetzt, wenn der aktuelle Tag in der ersten Kalenderzeile steht.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.FirstInRow}\osplinebreak{} ist auf
\cmd{1} gesetzt, wenn der aktuelle Tag in der ersten Kalenderzeile und an erster
Stelle der Zeile steht.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.LastRow}\osplinebreak{} ist auf
\cmd{1} gesetzt, wenn der aktuelle Tag in der letzten Kalenderzeile steht.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.LastInRow}\osplinebreak{} ist auf
\cmd{1} gesetzt, wenn der aktuelle Tag in der letzten Kalenderzeile und
an letzter Stelle der Zeile steht.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.Today}\osplinebreak{} ist auf
\cmd{1} gesetzt, wenn der jeweilige Tag dem heutigen Datum entspricht.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.Title}\osplinebreak{} enthält ggf.
einen Termin, wenn das via Spartacus erhältliche Ereignis"=Plugin \menu{Mein Kalender} seine
Termine einbettet.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.Active}\osplinebreak{} ist
gesetzt, wenn der aktuelle Tag des Kalenders ausgewählt wurde.

\ospsmarty{plugin\_calendar\_weeks.0.days.0.properties.Link}\osplinebreak{} enthält die
URL zu der Artikelübersicht des jeweiligen Tages.

Die Liste der zugewiesenen CSS-Klassen richtet sich nach den
\cmd{pro\-perties} des Tages; diese können daher später in der Template"=Datei direkt
innerhalb eines \cmd{class='\ldots'}-Attributs eingesetzt werden.

Aufgrund der hohen Verschachtelungstiefe des Kalenders werden die Variablen in
mehrfach verschachtelten \ospsmarty{\{foreach\}}-Schleifen abgearbeitet.

\ospitem{\ospismarty{plugin\_calendar\_dow}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{plugin\_calendar.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_calendar\_plugin::generate\_content()}\\
Da abhängig von regionalen Gepflogenheiten die Woche entweder
an einem Sonntag oder Montag anfängt, muss der Kalender dies berücksichtigen.
Dafür steht das Array \ospsmarty{plugin\_calendar\_dow} zur Verfügung. Es
enthält das jeweilige Datum zum zugehörigen Wochentag. 

Die Array-Schlüssel der ersten Dimension sind aufeinanderfolgend
durchnummeriert (von 1 bis 7). Der Array-Schlüssel \cmd{date} der zweiten
Dimension enthält als Wert das jeweilige Datum (in Unix-Sekunden).

\ospitem{\ospismarty{plugin\_calendar\_head}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{plugin\_calendar.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_calendar\_plugin::generate\_content()}\\
Enthält einige Stammdaten des Kalenders:

\begin{ospdescription}
\ospitem{\ospismarty{plugin\_calendar\_head.month\_date}}
\ospsmartytyp{Zahl}
Enthält das Datum (in Unix-Sekunden) des dargestellten Monats. 

\ospitem{\ospismarty{plugin\_calendar\_head.minScroll},}
\ospadditem{\ospismarty{plugin\_calendar\_head.maxScroll}}
\ospsmartytyp{Zahl}
Enthält das Datum (in Unix-Sekunden) des ersten und letzten Blog-Artikels, so
dass die Anzeige des Kalenders den Zeitraum vorhandener Artikel nicht über-
oder unterschreiten kann.

\ospitem{\ospismarty{plugin\_calendar\_head.uri\_previous},}
\ospadditem{\ospismarty{plugin\_calendar\_head.uri\_next}}
\ospsmartytyp{Zeichenkette}
Enthält die URLs zum Zurück- und Weiterblättern des aktuellen Kalenderblatts.

\ospitem{\ospismarty{plugin\_calendar\_head.uri\_month}}
Enthält die URL für den aktuellen Monat.
\ospsmartytyp{Zeichenkette}

\end{ospdescription}

\end{ospdescription}

%---------------------------------------------------------------------------
\label{plugin-categories-tpl}%
\index{Template-Dateien!plugin\_categories.tpl}%
\subsubsection{plugin\_categories.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{plugin\_categories.tpl} wird zur Ausgabe des
Seitenleisten"=Plugins \menu{Kategorien} verwendet, falls die Option \menu{Smarty
benutzen} dort aktiviert ist. Bei deaktivierter Smarty-Option gibt das Plugin
direkt unveränderbaren HTML-Code aus (der jedoch Performance spart).

\begin{ospdescription}

\ospitem{\ospismarty{is\_form}}
\ospsmartytyp{Boolean}
\ospsmartyscope{plugin\_categories.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_categories\_plugin::generate\_content()}\\
Ist auf \cmd{true} gesetzt, wenn das Seitenleisten-Plugin so konfiguriert wurde,
dass der Besucher mehrere Kategorien gleichzeitig (mittels Ankreuzfeldern)
auswählen darf.

\ospitem{\ospismarty{category\_image}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{plugin\_categories.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_categories\_plugin::generate\_content()}\\
Enthält die URL zum Bild für die kleinen Feed-Symbole, die optional neben einer
Kategorie eingeblendet werden können.

\ospitem{\ospismarty{form\_url}}
\ospsmartytyp{Zeichenkette}
\ospsmartyscope{plugin\_categories.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_categories\_plugin::generate\_content()}\\
Falls der Benutzer mehrere Kategorien gleichzeitig auswählen kann, enthält die
Variable \ospsmarty{form\_url} das Ziel des HTML-Formulars zur Darstellung der
Artikel der gewählten Kategorien.

\ospitem{\ospismarty{categories}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartyscope{plugin\_categories.tpl}
\ospsmartydoc{include/plugin\_internal.inc.php,}
\cmd{serendipity\_categories\_plugin::generate\_content()}\\
Enthält die Liste der Kategorien des Blogs. Die Array-Schlüssel der
zweiten Dimension entsprechen den auf Seite \pageref{db-categories}
aufgeführten. Hinzu kommen folgende Schlüssel:

\begin{ospdescription}

\ospitem{\ospismarty{categories.X.feedCategoryURL}}
\ospsmartytyp{Zeichenkette}
Enthält die URL zum RSS-Feed einer Kategorie.

\ospitem{\ospismarty{categories.X.categoryURL}}
\ospsmartytyp{Zeichenkette}
Enthält die URL für die Übersichtsseite aller Blog-Artikel einer Kategorie.

\ospitem{\ospismarty{categories.X.paddingPx}}
\ospsmartytyp{Zahl}
Enthält abhängig von der Verschachtelungstiefe einer Kategorie eine Zahl, die
der notwendigen Einrückung entspricht. Pro Verschachtelungsebene werden dafür 6
Einheiten (Pixel) vorgesehen.

\ospitem{\ospismarty{categories.X.category\_name}}
\ospsmartytyp{Zeichenkette}
Falls im Seitenleisten-Plugin die Option zur Zählung der Artikel pro Kategorie 
aktiviert wurde, enthält diese Variable den Namen sowie in Klammern gesetzt 
die Anzahl der Artikel.

\ospitem{\ospismarty{categories.X.true\_category\_name}}
\ospsmartytyp{Zeichenkette}
Falls im Seitenleisten-Plugin die Option zur Zählung der Artikel pro Kategorie 
aktiviert wurde, enthält diese Variable den ursprünglichen Kategorienamen, ohne
Nennung der Kategorieanzahl in Klammern.

\end{ospdescription}

\end{ospdescription}

%---------------------------------------------------------------------------
\index{Template-Dateien!plugin\_remoterss.tpl}%
\subsubsection{plugin\_remoterss.tpl}
%---------------------------------------------------------------------------

\label{plugin-remoterss.tpl}
Die Template-Datei \cmd{plugin\_remoterss.tpl} wird zur Ausgabe des
Seitenleisten"=Plugins \menu{Fremder RSS/OPML-Blogroll Feed} (siehe Seite
\pageref{remoterss}) verwendet, falls die Option \menu{Smarty benutzen} dort
aktiviert ist. Bei deaktivierter Smarty-Option gibt das Plugin direkt
unveränderbaren HTML-Code aus (der jedoch Performance spart).

\begin{ospdescription}

\ospitem{\ospismarty{remoterss\_items}}
\ospsmartytyp{Verschachteltes Array}
\ospsmartyscope{plugin\_remoterss.tpl}
\ospsmartydoc{plugins/serendipity\_plugin\_remoterss/seren\-dipity\_plugin\_remoterss.php,} 
\cmd{serendipity\_plugin\_remoterss::generate\_content()}\\
Enthält ein mehrfach verschachteltes Array mit allen Ausgaben und Optionen des
Plugins. Das Array besitzt folgende Schlüssel:

\begin{ospdescription}
\ospitem{\ospismarty{remoterss\_items.items}}
\ospsmartytyp{Verschachteltes Array}
Enthält ein Array mit dem Inhalt des fremden RSS/OPML-Feeds. Pro
durchnummeriertem Array-Schlüssel liegt ein RSS-Artikel vor, der wiederum
nach den XML-Tags des Feeds benannte Unterschlüssel besitzt (\cmd{link}, \cmd{title},
\cmd{comments}, \cmd{author}, \cmd{descrip\-tion}, \cmd{pubDate}, \cmd{guid} \ldots) sowie folgende vom
Plugin vergebene Schlüssel:


\ospismarty{remoterss\_items.items.X.timestamp} (Zahl)\\ enthält den
Unix-Zeitstempel, wann der RSS-Artikel veröffentlicht wurde.

\ospismarty{remoterss\_items.items.X.css\_class} (Zeichenkette)\\ enthält
einen CSS-Klassennamen des RSS-Elements, das in der Plugin-Konfiguration als
\menu{RSS Zielelement} festgelegt wurde.

\ospismarty{remoterss\_items.items.X.decoded\_\ldots} (Zeichenkette)\\ ist
für jedes XML-Element des RSS-Feeds gesetzt und enthält den in den korrekten Zeichensatz
konvertierten Wert. \ospsmarty{remote\-rss\_items.items.X.decoded\_title} enthält
beispielsweise das XML-Element \cmd{title} im Zeichensatz des Blogs. Taucht im
XML-Elementnamen ein Doppelpunkt auf (wie bei \cmd{<content:""encoded>}), wird
dieser durch einen Unterstrich ersetzt
(\ospsmarty{re\-moterss\_items.items.X.decoded\_content\_encoded}).

\ospismarty{remoterss\_items.items.X.display\_elements} (Array)\\ enthält
eine Liste der RSS-XML-Elemente, die der Benutzer als \menu{RSS
Zielelemente} eingetragen hat. In der Smarty-Datei wird dieses Array dafür
verwendet, die darzustellenden RSS-Elemente einzubinden. Sie können jedoch
auch auf den Einsatz dieses Arrays verzichten, wenn Sie die einzubindenden
RSS-Zielelemente direkt über das Smarty-Template hartkodiert auslesen (z.\,B.\
über \ospsmarty{remoterss\_items.items.X.decoded\_description}).


\ospitem{\ospismarty{remoterss\_items.use\_rsslink}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn jeder RSS-Artikel zum Originallink führen
soll. Wird durch die Konfigurationsoptionen des Plugins bestimmt.

\ospitem{\ospismarty{remoterss\_items.bulletimg}}
\ospsmartytyp{Zeichenkette}
Enthält die URL einer Symbolgrafik, wenn diese zu jedem RSS-Artikel dargestellt
werden soll. Wird durch die Konfigurationsoptionen des Plugins bestimmt.

\ospitem{\ospismarty{remoterss\_items.escape\_rss}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn die Sonderzeichen der RSS-Artikel in
HTML-Sonderzeichen umgewandelt werden sollen, so dass kein HTML oder JavaScript
ausgeführt werden kann. Wird durch die Konfigurationsoptionen des Plugins bestimmt.

\ospitem{\ospismarty{remoterss\_items.displaydate}}
\ospsmartytyp{Boolean}
Enthält den Wert \cmd{true}, wenn das Datum eines RSS-Artikels angezeigt werden
soll. Wird durch die Konfigurationsoptionen des Plugins bestimmt.

\ospitem{\ospismarty{remoterss\_items.dateformat}}
\ospsmartytyp{Zeichenkette}
Enthält das Format, in dem das Datum eines RSS-Artikels dargestellt werden
soll. Wird durch die Konfigurationsoptionen des Plugins bestimmt.

\ospitem{\ospismarty{remoterss\_items.target}}
\ospsmartytyp{Zeichenkette}
Enthält den \menu{Link-Target} (siehe Konfigurationsoptionen des Plugins, Seite
\pageref{remoterss-linktarget}) des RSS-Feeds.
\end{ospdescription}


\end{ospdescription}


%revised
\index{Template-Dateien!preview\_iframe.tpl}%
%---------------------------------------------------------------------------
\index{Template-Dateien!preview\_iframe.tpl}%
\subsubsection{preview\_iframe.tpl}
%---------------------------------------------------------------------------

Die Template-Datei \cmd{preview\_iframe.tpl} wird verwendet, um innerhalb des
Backends beim Bearbeiten/Erstellen eines Blog-Artikels eine Vorschau anzuzeigen,
die der Darstellung im Frontend gleicht.

Dabei wird die \cmd{entries.tpl}-Template-Datei wie gewohnt geparst und deren
Ausgabe innerhalb der \cmd{preview\_iframe.tpl} eingebunden.

\begin{ospdescription}
\index{Template-Variablen!\$preview}%
\ospitem{\ospsmarty{preview}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_config.inc.php,}
\cmd{serendipity\_iframe()}\\
Enthält den HTML-Code für die Vorschau des Eintrags.
\end{ospdescription}

%---------------------------------------------------------------------------
\index{Template-Dateien!content.tpl}%
\subsubsection{content.tpl}
%---------------------------------------------------------------------------

Über die Template-Datei \cmd{content.tpl} wird das zentrale Serendipity"=Frontend
zusammengebaut. Abhängig von der darzustellenden Seite enthält es einen
einzelnen Artikel, Artikelübersichten, Suchergebnisse oder anderes.
Grundsätzlich dient die Datei dabei nur zur Einbindung weiterer geparster
Template"=Dateien, die über folgende Variablen verfügbar sind:

\begin{ospdescription}
\index{Template-Variablen!\$ENTRIES}%
\ospitem{\ospsmarty{ENTRIES}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php,}
\cmd{serendipity\_printArchives()}\\
Enthält den HTML-Code für die Artikelübersicht oder einzelne Artikel. Die Inhalte
dieser Variable stammen aus der geparsten Template-Datei \cmd{entries.tpl}. 

\index{Template-Variablen!\$ARCHIVES}%
\ospitem{\ospsmarty{ARCHIVES}}
\ospsmartytyp{Zeichenkette}
\ospsmartydoc{include/functions\_entries.inc.php,}
\cmd{serendipity\_printArchives()}\\
Enthält den HTML-Code für die chronologische Artikelübersicht. Die Inhalte
dieser Variable stammen aus der geparsten Template-Datei \cmd{entries\_archives.tpl}. 
\end{ospdescription}

%---------------------------------------------------------------------------
\index{Template-Dateien!entries\_archives.tpl}%
\subsubsection{entries\_archives.tpl}
%---------------------------------------------------------------------------

Mittels der Template-Datei \cmd{entries\_archives.tpl} werden chronologische 
Artikelübersichten dargestellt. Im Gegensatz zur vollständigen
Artikelübersicht enthält diese Übersicht nur Titel und Datum der Einträge.

\begin{ospdescription}
\index{Template-Variablen!\$archives}%
\ospitem{\ospsmarty{archives}}
\ospsmartytyp{Mehrdimensionales Array}
\ospsmartydoc{include/functions\_entries.inc.php,}
\cmd{serendipity\_printArchives()}\\
Enthält das Array mit den in der Übersicht darzustellenden Einträgen. Dieses
mehrfach verschachtelte Array enthält in der ersten Dimension als Array-Schlüssel
das Jahr, unter dem die jeweiligen Unter-Arrays gegliedert sind. 

In der zweiten Dimension stehen die Schlüssel \cmd{year} und \cmd{months}
zur Verfügung, die jeweils das Jahr und den Monat für die Artikelliste enthalten.
Innerhalb des \cmd{months}-Unter-Arrays befindet sich ein durchnummeriertes Array
mit folgenden Schlüsseln:

\begin{ospdescription}
\ospitem{\ospsmarty{archives.X.months.Y.entry\_count}}
\ospsmartytyp{Zahl}
Enthält die Anzahl der Einträge für den jeweiligen Monat eines Jahres.

\ospitem{\ospsmarty{archives.X.months.Y.link}}
\ospsmartytyp{Zeichenkette}
Enthält die URL, die die Übersichtsseite der Artikel des gewählten Monats anzeigt.

\ospitem{\ospsmarty{archives.X.months.Y.link\_summary}}
\ospsmartytyp{Zeichenkette}
Enthält die URL, die eine zusammenfassende Übersichtsseite der Artikel des
gewählten Monats anzeigt. In der Zusammenfassung werden nur Titel und Datum der
Artikel aufgeführt.

\ospitem{\ospsmarty{archives.X.months.Y.date}}
\ospsmartytyp{Zeichenkette}
Enthält das Datum (in Unix-Sekunden, gerundet auf den vollen Tag) für die Liste
der Artikel des zugehörigen Monats.
\end{ospdescription}

\index{Template-Variablen!\$max\_entries}%
\ospitem{\ospsmarty{max\_entries}}
\ospsmartytyp{Zahl}
\ospsmartydoc{include/functions\_entries.inc.php,}
\cmd{serendipity\_printArchives()}\\
Enthält die höchste Zahl von Artikeln, die in der Übersichtsseite für
ein Monatssegment auftaucht. Diese Zahl wird verwendet, um eine relative Grafik
einzubinden, anhand derer man die Häufigkeitsverteilung der Artikel ablesen kann.
\end{ospdescription}


%revised
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------
\index{Template-Funktionen}%
\subsection{Smarty-Funktionen}
\label{smartyfunctions}
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------

Auf den folgenden Seiten sind alle Smarty-Funktionen aufgeführt, die Serendipity
innerhalb der \cmd{*.tpl}-Template-Dateien zur Verfügung stellt.

Der Aufruf einer Funktion kann mit einigen Parametern ausgestattet werden, die
im Funktionsaufruf wie \cmd{\{serendipity\_funktion parameter1=""wert1
parameter2=wert2 \ldots\}} eingetragen werden.
 
\begin{ospdescription}
\ospitem{\ospfsmarty{serendipity\_printSidebar}}
\ospsmartydoc{include/functions\_smarty.inc.php}
\label{printsidebar}
Stellt die Ausgaben aller Seitenleisten-Plugins für die gewünschte Seitenleiste
im Frontend zusammen.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{side} (Pflicht)}
Enthält den Namen der auszugebenden Seitenleiste (\cmd{left},\osplinebreak{} \cmd{right}, \cmd{hidden} \ldots).
\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{sidebars.tpl})

\label{serendipity-hookPlugin}%
\ospitem{\ospfsmarty{serendipity\_hookPlugin}}
\ospsmartydoc{include/functions\_smarty.inc.php}

\index{Hooks}%
\index{Events}%
Über die Funktion \ospsmarty{serendipity\_hookPlugin} kann ein internes Ereignis
(\cmd{Hook}) ausgeführt werden. Dies führt dazu, dass Serendipity alle
installierten Ereignis-Plugins durchgeht und prüft, ob das jeweilige Plugin für
den gewünschten \cmd{Hook} eine Funktionalität ausführen möchte. Die Rückgaben
dieser Funktionalität (meist HTML-Ausgaben) werden daraufhin direkt ausgegeben.

Diese Funktion dient beispielsweise dazu, um die Ausgaben von zusätzlichen
Ereignis-Plugins in den HTML-Kopfbereich (bspw. \cmd{Meta"=Tags}) umzusetzen,
aber auch für zahlreiche andere interne Serendipity"=Funktionen, wo sich Plugins
einklinken können.

Intern ruft diese Funktion die Serendipity-API-Funktion
\cmd{serendipi\-ty\_plugin\_api::hook\_event()} auf.

\begin{ospdescription}
\ospitem{\cmd{hook} (Pflicht)}
Enthält den Namen des auszuführenden Ereignisses (\cmd{Hook}).\osplinebreak{} Standardmäßig
sind hier nur die Hooks \cmd{frontend\_header}, \cmd{en\-tries\_header},
\cmd{entries\_footer}, \cmd{frontend\_comment} oder\osplinebreak{} \cmd{frontend\_footer}
zulässig.

\ospitem{\cmd{hookAll} (optional)}
Wenn dieser Parameter auf den Wert \cmd{true} gesetzt wird, können auch
beliebige andere Hooks als die oben aufgeführten ausgeführt werden. So können
Sie selbständig Hooks zu Serendipity-Templates hinzufügen und mit eigenen
oder angepassten Ereignis"=Plugins ausführen.

\ospitem{\cmd{data} (optional)}
Enthält ein beliebiges Array mit Daten, die an das Ereignis"=Plugin
weitergeleitet werden. Diese Daten sind für jeden Hook unterschiedlich. Die
übergebenen Daten werden von einem Plugin zum nächsten als referenzierte
Variable weitergegeben und können daher von Plugins beliebig modifiziert werden.
Die Variable verliert nach dem Durchlauf der zugehörigen Plugins ihren
Wert. Falls die Variable jedoch später nochmal verarbeitet werden soll, wird
der Einsatz des Smarty-Modifiers \ospfunc{serendipity\_""refhookPlugin} (siehe
Seite \pageref{refhookplugin}) empfohlen.

\ospitem{\cmd{addData} (optional)}
Enthält ein beliebiges Array mit Daten, die zusätzlich an das Ereignis-Plugin
weitergeleitet werden. Im Gegensatz zu den Daten aus \cmd{data} können Plugins auf
\cmd{addData} nur lesend zugreifen.

\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (falls vorhanden)

\label{serendipity-showPlugin}%
\ospitem{\ospfsmarty{serendipity\_showPlugin}}
\index{Seitenleisten-Plugins!in Templates einbinden}%
\ospsmartydoc{include/functions\_smarty.inc.php}

Gibt die Inhalte eines installierten Seitenleisten-Plugins aus.\osplinebreak{} Dies kann
unabhängig von der gewohnten Darstellung innerhalb der Seitenleiste erfolgen, so
dass ein Seitenleisten-Plugin an beliebiger Stelle in einem Template platziert
werden kann.

Diese Smarty-Funktion kann entweder ein ganz spezielles Plugin ausgeben oder
auch mehrere Plugins derselben Klasse (z.\,B.\ alle HTML-Klötze). 

Parameter: 
\begin{ospdescription}
\ospitem{\cmd{class} (Pflicht)}
Enthält den PHP-Klassennamen des auszugebenden Plugins,\osplinebreak{} z.\,B.
\cmd{serendipity\_quicksearch\_plugin} oder \cmd{serendipity\_""plugin\_amazon}.
Die Ausgabe beinhaltet alle zutreffenden Plugin"=Instanzen dieser Klasse.

\ospitem{\cmd{id} (Pflicht)}
Wenn der PHP-Klassenname nicht über \cmd{class} angegeben wird, muss die ID des
auszugebenden Plugins mittels dieses Parameters gesetzt werden. Als ID wird die
vollständige Zeichenkette des Plugins, wie sie innerhalb der
\cmd{serendipity\_plugins}-Datenbanktabelle erscheint, eingefügt.
Beispiel: \cmd{id="{}@seren\-dipity\_quicksearch\_plugin:3embaf334lovest444698ega\-rvo3693f}

\ospitem{\cmd{side} (optional)}
Seitenleisten-Plugins sind üblicherweise einer direkten Seitenleiste (links,
rechts, versteckt \ldots) zugewiesen. Falls Sie nur Plugins einer bestimmten
Leiste ausgeben wollen, können Sie den Namen dieser Leiste (\cmd{left, right,
hidden}) mit dem Parameter \cmd{side} festlegen. Standardmäßig ist dieser Wert
auf \cmd{*} gesetzt und liest alle Seitenleisten aus.

\ospitem{\cmd{negate} (optional)}
Wenn dieser Wert auf \cmd{true} gesetzt wird, kehrt dies die Auswahl der
auszugebenden Seitenleisten-Plugins um. Anstatt nur die Plugins einer bestimmten
Klasse auszugeben, werden stattdessen alle Plugins \emph{außer} der
festgelegten Klasse/ID ausgegeben.

\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{sidebars.tpl})

\ospitem{\ospfsmarty{serendipity\_getFile}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Liefert den vollständigen Pfad zum Template-Verzeichnis einer beliebigen Datei.
Mithilfe dieser Funktion können die URLs für Grafiken und Weiteres automatisch
und template-unabhängig zusammengebaut werden, so dass Sie keine absoluten URLs
in einer Smarty-Template-Datei einbinden müssen.

Liegt  \cmd{header.gif} im Verzeichnis \cmd{templates/bulletproof/img}\osplinebreak{}
und wollen Sie diese in der Template-Datei \cmd{index.tpl} einbauen,
müssen Sie nicht \cmd{<img
src="{}/blog/templates/bulletproof/img""/header.gif"{} />} eintragen, sondern \cmd{<img
src="{}\{serendipity\_""getFile file="{}img/header.gif"{}\}"{} />}. Dadurch kann das
Template später auch mit anderen Verzeichnisstrukturen eingesetzt werden. 

Parameter:
\begin{ospdescription}
\ospitem{\cmd{file} (Pflicht)}
Hiermit geben Sie an, welchen Dateinamen (und etwaige
Unterverzeichnisse ab dem Stammverzeichnis des Templates) Sie im Template
einbinden wollen.
\end{ospdescription}

Rückgabewert:
Zeichenkette (vollständiger Pfad zum gewünschten\osplinebreak{} Bild)

\ospitem{\ospfsmarty{serendipity\_printComments}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Stellt die Liste aller Kommentare für einen Eintrag dar.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{entry} (Pflicht)}
Enthält die ID des Blog-Artikels, für den die Kommentare dargestellt werden sollen.

\ospitem{\cmd{mode} (optional)}
Legt fest, ob die Artikel hierarchisch (\cmd{\$CONST.VIEWMODE\_THREA\-DED}) oder
chronologisch ((\cmd{\$CONST.VIEWMODE\_LINEAR}) dargestellt werden sollen.

\ospitem{\cmd{order} (optional)}
Legt die Reihenfolge fest, mit der die Kommentare ausgegeben werden (\cmd{ASC}
für aufsteigende Sortierung, \cmd{DESC} für absteigende).

\ospitem{\cmd{limit} (optional)}
Begrenzt die Anzahl der dargestellten Kommentare auf den gewünschten Wert
(standardmäßig alle Kommentare).
\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{comments.tpl})

\ospitem{\ospfsmarty{serendipity\_printTrackbacks}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Stellt die Liste aller Trackbacks für einen Eintrag dar.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{entry} (Pflicht)}
Enthält die ID des Blog-Artikels, für den die Trackbacks dargestellt werden sollen.
\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{trackbacks.tpl})

\ospitem{\ospfsmarty{serendipity\_rss\_getguid}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Wird von Feed-Template-Dateien (\cmd{feed\*.tpl}) verwendet, um einen eindeutigen
Permalink zu einem einzelnen Blog-Artikel zu erzeugen und zurückzuliefern.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{entry} (Pflicht)}
Enthält die ID des Blog-Artikels, zu dem der Permalink zurückgegeben werden soll.

\ospitem{\cmd{is\_comments} (Pflicht)}
Bei der Darstellung von Kommentar-Feeds muss dieser Parameter auf \cmd{true}
gesetzt werden, damit der korrekte Permalink zum zugehörigen Blog-Artikel
bezogen werden kann.
\end{ospdescription}
Rückgabewert:
Zeichenkette (Link zum Blog-Artikel)

\ospitem{\ospfsmarty{serendipity\_getTotalCount}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Kann die gesamte Anzahl an Blog-Artikeln, Kommentaren oder Trackbacks (abhängig
vom Parameter \cmd{what}) darstellen.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{what} (Pflicht)}
Kann entweder \cmd{entries} (Blog-Artikel) , \cmd{trackbacks} oder
\cmd{com\-ments} als Wert enthalten und bestimmt, welche Zahl
zurückgeliefert wird.

Rückgabewert:
Zahl

\ospitem{\ospfsmarty{serendipity\_pickKey}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Da Smarty-Arrays von der Notation der PHP-Arrays abweichen, kann man innerhalb
der Smarty-Syntax keine Array-Schlüssel angeben, die in einer weiteren Variable
benannt sind. Folgendes wäre daher nicht möglich:

\begin{ospcode}
Eintrag: \{\$entries.\$latest\_entry\}
\end{ospcode} 

Stattdessen wurde die Serendipity-Smarty-Funktion \cmd{serendi\-pity\_pickKey}
eingeführt. Mit dieser kann ein gewünschter Ar\-ray-Wert zurückgeliefert werden:

\begin{ospcode}
Eintrag: \{serendipity\_pickKey array=\$entries key=\$latest\_entry\}
\end{ospcode} 

Parameter:
\begin{ospdescription}
\ospitem{\cmd{array} (Pflicht)}
Enthält das Array, aus dem ein Wert zurückgeliefert werden soll.

\ospitem{\cmd{key} (Pflicht)}
Enthält den Namen des Array-Schlüssels, zu dem der Wert zurückgeliefert werden soll.

\ospitem{\cmd{default} (optional)}
Falls kein Array-Schlüssel gefunden wird, kann anstelle eines leeren Wertes ein
anderer Standard-Array-Schlüssel zurückgeliefert werden.
\end{ospdescription}

Rückgabewert:
Array-Wert

\ospitem{\ospfsmarty{serendipity\_showCommentForm}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Stellt das Kommentarformular für einen Beitrag dar.

Parameter:
\begin{ospdescription}
\ospitem{\cmd{id} oder \cmd{entry} (Pflicht)}
Enthält die ID des Blog-Artikels, für den das Kommentarformular dargestellt
werden soll.

\ospitem{\cmd{url} (optional)}
Enthält die URL, an die die Inhalte des Kommentarformulars übermittelt werden
sollen. Zeigt standardmäßig auf die Detailseite des Blog-Artikels.

\ospitem{\cmd{comments} (optional)}
Kann ein Array mit bereits vorhandenen Kommentaren zum Blog-Artikel enthalten.
Falls nicht angegeben, wird dies automatisch aus der Datenbank bezogen.

\ospitem{\cmd{data} (optional)}
Enthält die Eingaben des Benutzers im Kommentarformular (\cmd{POST}-Daten).

\ospitem{\cmd{showToolbar} (optional)}
Wenn auf \cmd{true} gesetzt, werden zusätzliche Felder im Kommentarformular
angezeigt, mit dem ein Benutzer bestimmt, ob zusätzliche Felder
eingebunden werden sollen. Wird  als Smarty-Variable \ospsmarty{is\_commentform\_showToolbar}
weitergereicht (siehe Seite \pageref{commentformshowtoolbar}).

\ospitem{\cmd{moderate\_comments} (optional)}
Gibt an, ob Kommentare zu einem Blog-Artikel moderiert werden. Standardmäßig
wird diese Variable entsprechend der Einstellung des jeweiligen Blog-Artikels gesetzt.
\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{commentform.tpl})

\label{fetchprintentries}%
\ospitem{\ospfsmarty{serendipity\_fetchPrintEntries}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Mittels der Smarty-Funktion  kann eine
Liste von Blog-Einträgen innerhalb beliebiger Smarty-Template-Dateien erzeugt
werden. So können auch mehrere Eintragsauflistungen pro Seite eingefügt werden.

Intern ist die Funktion recht komplex gebaut. Anhand der Funktionsparameter
werden die gewünschten Blog-Einträge ausgelesen, ausgewertet und dann über eine
beliebige Template-Datei (standardmäßig \cmd{entries.tpl}) geparst und zurückgeliefert. 

Parameter:
\begin{ospdescription}
\ospitem{\cmd{category} (optional)}
Legt die Kategorie-ID fest, aus der die Blog-Artikel gelesen werden sollen. Ohne
eine Angabe werden alle Kategorien ausgelesen. Mehrere Kategorien können mittels
Semikolon voneinander getrennt werden.

\ospitem{\cmd{viewAuthor} (optional)}
Legt die Redakteurs-ID fest, vom der die Blog-Artikel gelesen werden sollen. Ohne
eine Angabe werden die Blog-Artikel aller Redakteure berücksichtigt.
Mehrere IDs können mittels Semikolon voneinander getrennt werden.

\ospitem{\cmd{page} (optional)}
Wenn die Liste der Blog-Artikel mehr als eine Seite ausfüllt\footnote{Die Anzahl der Artikel
pro Seite wird bestimmt durch den \cmd{limit}-Parameter.}, bestimmt der Parameter
\cmd{page} die Seitennummer, die aktuell angezeigt wird.
Sollten insgesamt 20 Artikel gefunden und 10 Artikel pro Seite
dargestellt werden, dann würde der Wert \cmd{2} im \cmd{page}-Parameter dafür
sorgen, dass die Artikel 11-20 angezeigt werden.

\ospitem{\cmd{id} (optional)}
Falls ein einzelner Artikel angezeigt werden soll, enthält dieser Parameter die
ID des Blog-Eintrags.

\ospitem{\cmd{range} (optional)}
Kann die Liste der Artikel auf einen gewissen Zeitraum einschränken. Der
Parameter kann entweder einen Wert wie JJJJMMTT (Jahr, Monat, Tag) enthalten, um
nur die Artikel eines Tages darzustellen (z.\,B.\ \cmd{20071224} für den 24.12.2007).
Ein ganzer Monat wird über einen Wert wie \cmd{20071200} angezeigt.

Alternativ kann der Parameter ein Array enthalten, dessen Array-Schlüssel 0 und 1
jeweils einen Unix-Zeitstempel für den Start- und Endzeitpunkt bestimmen.

Wird die Variable leer gelassen oder auf \cmd{null} gesetzt, werden die aktuellsten
Einträge angezeigt.

\ospitem{\cmd{modified\_since} (optional)}
Falls der Parameter \cmd{range} leer gelassen wird oder auf \cmd{null} gesetzt
ist, kann der Parameter  einen Unix-Zeitstempel enthalten,
der das Datum angibt, ab dem alle neuen Artikel ausgelesen werden sollen.

\ospitem{\cmd{full} (optional)}
Wenn dieser Parameter auf \cmd{true} gesetzt wird, kann auch der erweiterte
Eintrag der Blog-Artikel ausgelesen werden. Dies ist besonders wichtig in
Kombination mit dem \cmd{id}-Parameter.

\ospitem{\cmd{limit} (optional)}
Enthält eine Zeichenkette, die angibt, wie viele Blog-Artikel ausgelesen werden
sollen. Diese Zeichenkette kann entweder eine einzelne Zahl oder eine
Angabe \cmd{X, Y} enthalten, wobei \cmd{X} für den Index des Artikels steht, ab
dem Artikel angezeigt werden, und \cmd{Y} für die Anzahl der zu lesenden Beiträge.
\cmd{limit='5, 10'} würde 10 Artikel ausgeben und die ersten 5 Artikel überspringen. 

Wird dieser Parameter nicht angegeben, werden so viele Artikel ausgelesen, wie in
der Konfiguration des Blogs standardmäßig festgelegt.

\ospitem{\cmd{fetchDrafts} (optional)}
Wenn dieser Parameter auf \cmd{true} gesetzt wird, können auch Blog-Entwürfe
ausgelesen werden. Standardmäßig werden nur veröffentlichte Artikel
berücksichtigt. 

\ospitem{\cmd{short\_archives} (optional)}
Wenn auf \cmd{true} gesetzt, erfolgt die Ausgabe der Blog-Artikel nicht wie auf
den normalen Übersichtsseiten, sondern in einer zusammengefassten Ansicht wie bei
den chronologischen Archivseiten.

\ospitem{\cmd{orderby} (optional)}
Legt die Sortierung der Artikel fest. Dieser Parameter legt den Namen des
Datenbankschlüssels der involvierten Tabellen fest und entspricht dem SQL
\cmd{ORDER BY}-Statement. Standardmäßig wird nach dem Veröffentlichungsdatum
eines Artikels sortiert (\cmd{e.timestamp}).

\ospitem{\cmd{filter\_sql} (optional)}
Um die Eingrenzung der gewünschten Blog-Artikel feinzusteuern, kann beliebiger
SQL-Code eingefügt werden, der in der Datenbankabfrage in den \cmd{WHERE}-Teil
integriert wird.

\ospitem{\cmd{noCache} (optional)}
Wenn auf \cmd{true} gesetzt, werden etwaige Caching-Plugins für das Auslesen der
Blog-Artikel deaktiviert. Dies kann in Problemfällen dabei helfen, die Artikel
korrekt auszulesen.

\ospitem{\cmd{noSticky} (optional)}
Wenn auf \cmd{true} gesetzt, werden sogenannte \emph{Dauerhafte Einträge} (siehe
Seite \pageref{stickyentries}) nicht mit ausgelesen. Wenn aktuelle Einträge jedoch als
\emph{Dauerhaft} markiert werden, sind sie trotzdem in der Liste vorhanden -- lediglich ältere 
dauerhafte Einträge werden nicht wie sonst üblich mit aufgenommen.

\ospitem{\cmd{template} (optional)}
Legt den Namen der Smarty-Template-Datei fest, der für die Darstellung der
Einträge verwendet werden soll. Standardmäßig ist dies \cmd{entries.tpl}.

\ospitem{\cmd{block} (optional)}
Legt den Namen der Smarty-Variable fest, die den HTML-Code des geparsten
Templates enthält. Standardmäßig ist dies \cmd{ENTRIES}, gemäß der zentralen
Smarty-Variable \ospsmarty{EN\-TRIES}, die über die
\cmd{content.tpl}-Template-Datei eingebunden wird. Diese Variable sollte
unbedingt eindeutig sein und wird daher standardmäßig auf
\ospsmarty{smarty\_entries\_X} gesetzt, wobei \cmd{X} einer fortlaufenden Zahl
entspricht, die pro neuem \cmd{serendipity\_fetchPrintEntries}"=Funktionsaufruf
erhöht wird.

\ospitem{\cmd{preview} (optional)}
Wenn auf \cmd{true} gesetzt, wird der Artikel so behandelt, als würde er im
Backend als Vorschau angezeigt. Dabei werden einige Plugins deaktiviert,
die sich andernfalls an den Anfang und das Ende der Artikelübersicht einklinken
würden. 

\ospitem{\cmd{groupmode} (optional)}
Diese Variable legt fest, ob die Liste der Artikel nach dem Tag der
Veröffentlichung gruppiert wird (Wert \cmd{date}, Standard) oder ob die Artikel
nach Kategorie sortiert dargestellt werden sollen (Wert \cmd{category}).

\ospitem{\cmd{use\_hooks} (optional)}
Wenn auf \cmd{true} gesetzt, werden Ereignis-Plugins für die Darstellung der
Einträge wie gewohnt ausgeführt. Enthält der Parameter den Wert
\cmd{false}, werden diese Plugins temporär übergangen. Dies gilt nur für den
Aufruf von Textformatierungs"=Ereignis-Plugins. Alle weiteren Ereignis-Plugins
werden weiterhin aufgerufen und können durch den Parameter
\cmd{skip\_smarty\_hooks} beeinflusst werden.

\ospitem{\cmd{use\_footer} (optional)}
Wenn auf \cmd{true} gesetzt, wird der Footer unterhalb der Einträge mit
Informationen zur Menge der gefundenen Artikel und mit Blättermöglichkeit
eingebunden.

\ospitem{\cmd{skip\_smarty\_hooks} (optional)}
Um den Aufruf weiterer Ereignis-Plugins bei der Darstellung der Artikel zu
unterbinden, kann dieser Parameter auf \cmd{true} gesetzt werden. Dieser
Parameter beeinflusst die globale Variable
\cmd{\$serendipity['skip\_smarty\_hooks']} (siehe Seite \pageref{smartyhooks})
temporär und wird nach dem Aufruf der Smar\-ty-Funktion
\cmd{serendipity\_fetchPrintEntries} wieder auf den
ursprünglichen Wert zurückgesetzt.

\ospitem{\cmd{skip\_smarty\_hook} (optional)}
Im Gegensatz zur pauschalen Blockierung aller Ereignis-Plugins kann diese
Variable ein Array enthalten, das eine Liste aller zu blockierenden Ereignisse
(\emph{Hooks}) festlegt. So können gezielt bestimmte Ereignis-Plugins unterdrückt
werden. 

\ospitem{\cmd{select\_key} (optional)}
Kann eine kommaseparierte Liste von SQL"=Tabellenfeldnamen enthalten, die in der
Ausgabe gesetzt werden sollen. Standardmäßig selektiert Serendipity alle
benötigten Felder selbständig.

\ospitem{\cmd{group\_by} (optional)}
Enthält den Tabellenfeldnamen, nach dem die Artikelliste via SQL gruppiert
werden soll. Standardmäßig wird nach Artikel-ID gruppiert, so dass ein Eintrag
niemals mehr als einmal in der Liste auftreten kann.

\ospitem{\cmd{returncode} (optional)}
Legt fest, ob die Artikelausgabe als ein Datensatz (\cmd{single}) oder
mehrfach verschachtelt (\cmd{array}) ausgegeben wird. Im Kontext der
Smarty-Funktion ist grundsätzlich nur der Returncode \cmd{array} sinnvoll.

\ospitem{\cmd{joinauthors} (optional)}
Enthält den Wert \cmd{true}, wenn die Metadaten für den Redakteur eines Artikels
mit ausgelesen werden sollen.

\ospitem{\cmd{joincategories} (optional)}
Enthält den Wert \cmd{true}, wenn die Metadaten für die zugewiesenen Kategorien eines
Artikels mit ausgelesen werden sollen.

\ospitem{\cmd{joinown} (optional)}
Kann SQL-Anweisungen enthalten, die den \cmd{JOIN}-Teil der Abfrage nach
eigenen Wünschen beeinflussen und weitere Tabellen in Betracht ziehen können.

\label{entryproperties-customprop-fetch}%
\ospitem{\cmd{entryprops} (optional)}
Mit diesem Parameter können Sie eine Liste von zusätzlichen \cmd{freien
Eigenschaften} (siehe Seite \pageref{entryproperties}) angeben. Daraufhin werden
nur die Artikel dargestellt, die die gewünschten Eigenschaften enthalten.
So können Sie dafür sorgen, dass beispielsweise nur Artikel angezeigt werden,
die keine dauerhaften Einträge darstellen:

\begin{ospcode}
\{serendipity\_fetchPrintEntries entryprops="ep\_is\_sticky 
 != 'false'"\}
\end{ospcode}

\osppagebreak

Anderes Beispiel: Wenn Sie eine freie Eigenschaft wie \emph{IstArchiviert} festgelegt haben
und dort nur Einträge mit dem Wert \cmd{1} darstellen wollen:

\begin{ospcode}
\{serendipity\_fetchPrintEntries 
  entryprops="ep\_IstArchiviert = '1'"\}
\end{ospcode}

Mehrere Eigenschaften können mit Komma voneinander getrennt werden:

\begin{ospcode}
\{serendipity\_fetchPrintEntries 
  entryprops="ep\_IstArchiviert = '1',ep\_is\_sticky != 
  'false'"\}
\end{ospcode}

Die Smarty-Funktion setzt die notwendigen Bedingungen um und
schreibt sie in den Parameter \cmd{joinown}, so dass Sie keine eigene
SQL-JOIN-Bedingung entwickeln müssen.

\ospitem{\cmd{prevent\_reset} (optional)}
Standardmäßig enthält die Variable den Wert \cmd{false} und sorgt dafür,
dass die zentrale Smarty-Variable \ospsmarty{entries} nicht überschrieben wird.
Wenn Sie die Funktion \cmd{serendi\-pity\_fetchPrintEntries} jedoch dazu
verwenden, die\osplinebreak{} Standardausgabe von Serendipity zu unterdrücken, müssen Sie den
Parameter \cmd{prevent\_reset} auf \cmd{true} setzen, da Sie andernfalls eine
doppelte Artikelausgabe erhalten würden.

\end{ospdescription}

Rückgabewert:
HTML-Zeichenkette (\cmd{entries.tpl})

\end{ospdescription}
\end{ospdescription}



%revised
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------
\index{Template-Modifier}%
\subsection{Smarty-Modifier}    
\label{smartymodifier}
%---------------------------------------------------------------------------
%---------------------------------------------------------------------------

Auf den folgenden Seiten sind alle Smarty-Modifier aufgeführt, die Serendipity
innerhalb der \cmd{*.tpl}-Template-Dateien zur Verfügung stellt.

Ein Modifier wendet eine spezielle Funktion auf eine Variable an und liefert den
Rückgabewert direkt zurück. Im Gegensatz zu einer Smarty-Funktion kann ein
Modifier nicht ohne zugeordnete Variable aufgerufen werden. Modifier können
überall dort eingesetzt werden, wo man Variablen platziert:

\begin{ospcode}
Aktuelles Datum: \{\$smarty.now|@formatTime:'\%d.\%m.\%Y'\}
\end{ospcode}

Der Modifier wird mittels \cmd{|}-Symbol hinter einer Variable (hier als
\emph{Stammvariable} bezeichnet) aufgeführt.
Modifier können beliebig oft hintereinander verkettet werden, um sie
nacheinander anzuwenden. Einige Modifier können Parameter festlegen, die mittels
Doppelpunkt vom Namen des Modifiers getrennt werden.

Wenn die Smarty-Sicherheit ausgeschaltet ist
(\cmd{\$serendipity['smarty']""->security}, siehe Seite \pageref{smartysecurity}),
können auch alle PHP-Funktionen als Modifier eingesetzt werden. Der erste
Parameter einer derart aufgerufenen PHP-Funktion entspricht dabei immer dem
Wert, der links vom Modifier angegeben wurde. Mit aktivierter Smarty-Sicherheit
sind nur die PHP-Funktionen \cmd{sprintf, sizeof, count, rand, print\_r} und
\cmd{str\_repeat} aufrufbar.

Das Sonderzeichen \cmd{@} vor dem Aufruf eines Modifiers heißt, dass die davor
aufgeführte Variable einen einzelnen Wert und kein Array enthält. So kann Smarty
den Zugriff auf die Variable geringfügig beschleunigen. Serendipity-Templates
machen von diesem Sonderzeichen regen Gebrauch.

\begin{ospdescription}
\ospitem{\ospmsmarty{emit\_htmlarea\_code}}
\ospsmartydoc{include/functions\_entries\_admin.inc.php,}
\cmd{serendipity\_printEntryForm()}\\
Gibt den nötigen JavaScript-Code aus, der vom Artikeleditor benötigt wird, um
den WYSIWYG-Editor darzustellen. Dieser Modifier spricht die
Serendipity-Funktion \cmd{serendipity\_emit\_htmlarea\_code} an\osplinebreak{}
(\cmd{include/functions\_entries\_admin.inc.php}) und nimmt den\osplinebreak{}
Namen des jeweils zu konvertierenden Formularelements als Stammvariable  an.

\ospitem{\ospmsmarty{makeFilename}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Konvertiert eine Stammvariable (Zeichenkette) so, dass sie innerhalb einer URL
eingesetzt werden kann. Etwaige Sonderzeichen werden dabei automatisch
konvertiert. Wenn der erste Parameter den Wert \cmd{true} enthält, werden Punkte
in der Zeichenkette entfernt.

\ospitem{\ospmsmarty{xhtml\_target}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Gibt XHTML-gültigen Code zum Öffnen eines Popup-Fensters aus. Die Rückgabe
enthält ein \cmd{onclick="{}\ldots"{}}-Attribut, das innerhalb eines HTML-Tags wie
\cmd{<a>} eingebunden werden kann.

\ospitem{\ospmsmarty{emptyPrefix}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Prüft, ob die Stammvariable einen Wert enthält. Wenn dies der Fall ist, liefert
der Modifier als Ergebnis eine vorangestellte Zeichenkette und erst dann den
Wert (bei dem sämtliche HTML-Sonderzeichen escaped werden).

Wenn \ospsmarty{blogTitle} beispielsweise den Wert \cmd{Dollhouse}
enthält, erreicht man mit dem Smarty-Befehl
\ospsmarty{blogTitle|emptyPrefix:""'Blogtitel - '} die Ausgabe \cmd{Blogtitel -
Dollhouse}. Wäre der Wert der Variable leer, würde auch das Präfix
\cmd{Blogtitel -} nicht angezeigt.

\ospitem{\ospmsmarty{formatTime}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Formatiert eine Stammvariable mit Unix-Sekunden-Wert in eine lesbare Zeit. Der
erste Parameter enthält dabei die Platzhalter für das Ausgabeformat (siehe
\cmd{http://www.php.net/date}). Der Platzhalter kann dabei auch PHP-Konstanten
enthalten, die ein Datum festlegen (bspw. \cmd{\$CONST.DATE\_FORMAT\_ENTRY}). Der
zweite Parameter enthält standardmäßig den Wert \cmd{true}, damit Serendipity
die Zeitzone des Servers berücksichtigt. Die weiteren Parameter werden für
interne Sonderfälle benötigt, um die Behandlung ungültiger Zeitstempel und die
Umgehung der Kalender-Umrechnung festzulegen.

\ospitem{\ospmsmarty{serendipity\_utf8\_encode}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Wandelt eine Zeichenkette in den UTF-8-Zeichensatz.

\ospitem{\ospmsmarty{ifRemember}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Prüft, ob der Benutzer einen benötigten Wert in einem Cookie gespeichert hat. Die Stammvariable legt
dabei den Namen des Cookies fest, das geprüft werden soll. Der erste Parameter
enthält den Inhalt, auf den ein Cookie geprüft wird. Der zweite Parameter legt
fest, ob, wenn ein Cookie keine Daten enthält, der übermittelte Prüfwert
zurückgeliefert werden soll. Der dritte Parameter gibt den Namen des
HTML-Attributs aus, der zurückgeliefert wird.

Diese Funktion wird vor allem für die Darstellung der Mediendatenbank"=Übersicht
verwendet, um die Standardzustände von Auswahlfeldern und Ankreuzboxen festzulegen.

\ospitem{\ospmsmarty{checkPermission}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Prüft, ob ein Benutzer aufgrund seiner Mitgliedschaft in den
Autor-Benutzergruppen ein bestimmtes Recht hat. Als Stammvariable dient der Name
des zu prüfenden Rechts (z.\,B.\ \cmd{adminUsersMaintainOth\-ers}). Als erster
Parameter gilt die ID des Redakteurs, für den das Recht geprüft werden soll
(standardmäßig auf die ID des aktuell eingeloggten Redakteurs gesetzt). Der
zweite Parameter legt fest, ob der Modifier anstelle von \cmd{true/false} für
die Prüfung eine Liste aller zugehörigen Gruppen des Redakteurs zurückliefern soll.

\label{refhookplugin}
\ospitem{\ospmsmarty{serendipity\_refhookPlugin}}
\ospsmartydoc{include/functions\_smarty.inc.php}
Der Aufruf der Smarty-Funktion \ospfunc{serendipity\_hookPlugin} (Seite
\pageref{serendipity-hookPlugin}) kann die von den Plugins durchgereichten Daten
(\cmd{\$eventData}) nicht als referenzierte Variable weitergeben. Nur Modifier
können mit referenzierten Variablen arbeiten, daher dient dieser Modifier nur dem
Zweck, ein Ereignis-Plugin aufzurufen, das mit Smarty-Variablen arbeiten kann. Die
Template-Dateien des Backends machen von diesem Modifier Gebrauch, um zum
Beispiel das Login-Formular mit einigen Zusatzausgaben anzureichern.

Die Stammvariable entspricht dabei dem, was als \cmd{\$eventData} an die Plugins
weitergereicht wird. Der erste Parameter des Modifiers gibt den Namen des
auszuführenden Ereignisses (\cmd{Hook}) an, der zweite Parameter die etwaigen
Zusatzdaten \cmd{\$addData}.
\end{ospdescription}


%revised
\section{index.tpl, content.tpl und entries.tpl im Detail}


Anhand der Variablenliste sollte es Ihnen nun möglich sein, den Hauptaufbau
einer Serendipity-Seite mittels der drei zentralen Template-Dateien
\cmd{index.tpl}, \cmd{content.tpl} und \cmd{entries.tpl} nachzuvollziehen.

Um die Logik der einfachen Smarty-Templates im Schnelldurchlauf kennen zu lernen,
folgt eine kleine Beschreibung mittels der Dateien des Standard-Templates
(\cmd{templates/default/}). 

Wir werden diese Zeile für Zeile durchgehen, daher können Sie in einem
Text-Editor Ihrer Wahl die entsprechende Template-Datei öffnen, um die Schritte nachzuvollziehen.

\index{Template-Dateien!index.tpl}%
\subsection{index.tpl}

Über die Datei \cmd{index.tpl} wird das Grundgerüst der HTML-Seite mitsamt Kopf-
und Fußbereich ausgegeben.

Dazu prüft eine Smarty-Abfrage \cmd{\{if \$is\_embedded != true\}} in der ersten
Zeile, ob die Serendipity-Konfigurationsoption zur eingebetteten Nutzung
aktiviert wurde (siehe Seite \pageref{embedding}).
Ist dies der Fall, werden alle HTML-Kopfbereiche unterdrückt, und das Template
schreitet erst ab Zeile 29 fort.

Bei standardmäßig deaktivierter eingebetteter Nutzung wird im Folgenden die
Variable \ospsmarty{is\_xhtml} geprüft und abhängig davon der entsprechende
HTML \cmd{<!DOCTYPE>}-Tag ausgegeben (Zeile 2 bis 8).

Im nächsten Block begint der \cmd{<html>}- und \cmd{<head>}-Bereich der Seite,
der einige Metadaten wie Seitentitel, Sprache und Links zu den Stylesheets
enthält. 

In Zeile 18 wird geprüft, ob ein spezieller Trackback-Link eingebettet wird. Die
Variable \cmd{entry\_id} ist nur dann gesetzt, wenn im Blog ein einzelner
Artikel angezeigt wird. Andernfalls ist diese Variable leer, und der
entsprechende \cmd{<link>}-HTML-Tag wird nicht ausgegeben.

Kurz vor dem Ende des \cmd{<head>}-Bereichs wird in Zeile 22 ein Aufruf der
Plugin-Schnittstelle mittels \cmd{\{serendipity\_hookPlugin
hook="{}frontend""\_header"{}\}} durchgeführt. An dieser Stelle werden später
etwaige Zusatzausgaben von Plugins eingebunden. Dieser Plugin-Aufruf findet sich
auch in Zeile 27 wieder, damit Plugins auch dann ausgeführt werden, wenn der
Modus zur eingebetteten Nutzung aktiviert wurde.

Eine weitere Abfrage, die den generellen Seitenaufbau betrifft, ist in Zeile 30
zu finden: \cmd{\{if \$is\_raw\_mode != true\}} prüft, ob das Template im Folgenden 
seinen eigenen Kopf-Bereich mit Plugin-Seitenleisten ausgeben soll oder
nicht. Diese spezielle Variable wird intern belegt und ist dafür gedacht, um
mittels Plugin-Schnittstelle fremde Seiten in das Serendipity-Layout
einzubinden. Es wird auch verwendet, wenn ein Template aus einer
Serendipity-Version vor 0.7 aktiviert wurde. Dort gab es noch keine
Smarty-Templates, und die Ausgabe erfolgte mittels einer eigenständigen
\index{Template-Dateien!layout.php}%
\cmd{layout.php}-Datei. Daher wird im üblichen Fall die Variable
\ospsmarty{\$is\_raw\_""mode} meist nicht aktiviert werden, so dass Ihr
\cmd{index.tpl}-Template in fast allen Fällen den Bereich zwischen Zeile 30 und
47 auswerten wird. Im aktivierten \emph{Roh/Raw-Modus} wird der einzubindende
Inhalt über die Variable \ospsmarty{raw\_data} (Zeile 49) ausgeliefert.

In Zeile 31 bis 34 wird der Kopfbereich der Seite mitsamt Blog-Titel und
-Beschreibung eingebunden, darauf folgt eine Layout-Tabelle in Zeile 36, die den
Bereich in linke Seitenleiste, rechte Seitenleiste und mittleren Inhaltsbereich
aufteilt. 

In der linken und rechten Seitenleiste wird in Zeile 38 und 42 vorerst über die
Variablen \ospsmarty{leftSidebarElements} und \ospsmarty{rightSidebarElements}
geprüft, ob die jeweilige Seitenleiste überhaupt Elemente einbindet. Die
Seitenleisten-Zuordnung wird über das Blog-Backend vorgenommen, daher müssen
Templates immer selbständig überprüfen, welche Seitenleisten an welcher Stelle
ausgegeben werden. Dies erfolgt letztlich über den Aufruf
\cmd{\{serendipity\_printSidebar side="{}\ldots"{}\}}.

Der eigentliche Inhalt des Blogs wird über die Variable \ospsmarty{CONTENT}
in Zeile 41 eingebunden. Dieser wird über die folgende Template-Datei
\cmd{content.""tpl} bestimmt.

Am Ende von \cmd{index.tpl} in Zeile 50 wird der Fußbereich durch
Plugin"=Ausgaben mit \cmd{\{serendipity\_hookPlugin
hook="{}frontend\_footer"{}\}} ausgegeben, gefolgt von den schließenden
\cmd{</body>}- und \cmd{</html>}-Tags (nur bei deaktivierter eingebetteter
Nutzung). 

\index{Template-Dateien!content.tpl}%
\subsection{content.tpl}

Die Template-Datei \cmd{content.tpl} ist letztlich nur ein Verteiler, der
entweder die Artikeldarstellung, Suchergebnisse oder eine Archivübersicht aufruft und
mittels \ospsmarty{ENTRIES} und \ospsmarty{ARCHIVES} einbindet.

\osppagebreak

Zusätzlich kann diese Datei für zentrale Ausgaben wie z.\,B.\ für Suchergebnisse
verwendet werden. Diese Ausgaben werden über Smarty-Variablen innerhalb der Datei
von Zeile 3 bis 17 abgefragt.

\index{Template-Dateien!entries.tpl}%
\subsection{entries.tpl}

Die \cmd{entries.tpl}-Template-Datei ist die wohl komplexeste und umfangreichste
Template-Datei. Im Gegensatz zu anderen Blog-Systemen verfolgt Serendipity den
Ansatz der kleinstmöglichen Redundanz: Eine Template-Datei wird für alle Fälle
der Artikeldarstellung verwendet, sowohl Einzelbeiträge als auch
Eintragsübersichten werden (mittels IF-Abfragen) über diese Template-Datei
gesteuert. 

Das Template arbeitet dazu hauptsächlich mit einem großen Array namens
\ospsmarty{entries}. Dieses mehrdimensionale Array wird mittels Schleifen
durchlaufen und ausgegeben, daher macht es für das Template keinen Unterschied,
ob in dem Array ein Eintrag oder 200 Einträge enthalten sind.

In Zeile 2 wird als mit 
\cmd{\{serendipity\_hookPlugin hook="{}entries\_hea\-der"{} addData="{}\$entry\_id"{}\}} dafür 
gesorgt, dass etwaige Ereignis"=Plugins ihre Ausgaben vor der 
Artikeldarstellung ausliefern können.

Von Zeile 4 bis Zeile 181 wird die erste Schleife über das mehrdimensionale
\ospsmarty{entries}-Array ausgegeben. Die erste Dimension enthält die Einträge
gruppiert nach deren Veröffentlichungsdatum. So können Einträge, die zum selben
Tag gehören, auch gemeinsam ausgegeben werden, und pro Datumsgruppe wird nur eine
Datumsüberschrifft dargestellt. Dies muss nicht zwangsläufig so sein, Templates
können die Schleifen auch so anordnen, dass jeder Eintrag eine eigene
Überschrift enthält. Für jeden Schleifen-Durchlauf wird die aktuelle
Datumsgruppe der Variablen \ospsmarty{dategroup} zugewiesen.

Die Zeilen 5 bis 11 regeln diese Ausgabe der Datumsüberschrift in einem eigenen
\cmd{<div>}-Container. Die Variable \ospsmarty{dategroup.is\_sticky} wird
abgefragt, damit für dauerhafte Einträge kein Datum, sondern nur eine
Textüberschrift angezeigt wird. Im \cmd{else}-Fall wird das Datum der jeweiligen
Artikelgruppe dargestellt. Dieser Wert liegt in Unix-Sekunden vor und muss
daher über den Smarty-Modifier \cmd{formatTime} erst in ein menschenlesbares
Format überführt werden.

Ab Zeile 12 beginnt nun die innere Schleife, die die einzelnen Artikel des
\ospsmarty{entries}-Array ausliest. Die Artikel enstammen dabei der Variable\osplinebreak{}
\ospsmarty{dategroup.entries}. Pro Durchlauf der \cmd{foreach}-Schleife wird der
aktuell durchlaufene Artikel der Variable \ospsmarty{entry} zugewiesen, so dass
auf dessen Daten mit einfacher, kurzer Notation zugegriffen werden kann.  

Wird die Detailansicht eines Artikels aufgerufen, enthält das Array nur 
einen Datensatz, und zusätzlich ist die Variable \ospsmarty{is\_single\_entry} 
gesetzt. Diese Variable wird an mehreren Stellen abgefragt, um die Ansicht 
der Detailseite und der Artikelübersicht unterschiedlich zu gestalten.

In Zeile 13 wird der Artikeltitel ausgegeben, gefolgt vom Autorennamen in Zeile
15. Falls der Artikel einer oder mehreren Kategorien zugeordnet ist, werden die
Kategoriebilder in Zeile 18 bis 22 in einer Schleife ausgegeben.

Der Artikeltext wird in Zeile 34 bis 36 ausgegeben. Falls der Artikel einen
erweiterten Eintragstext (\ospsmarty{entry.is\_extended}) besitzt, wird ein
HTML-Link zur Detailseite dieses Artikels ausgegeben.

Damit der erweiterte Eintrag angezeigt wird, wenn die Detailansicht
aufgerufen wurde, wird die Variable \ospsmarty{entry.extended} in Zeile 26 bis
28 dargestellt.

Die Zeilen 38 bis 71 geben weitere Metadaten eines Artikels in einem Fußbereich
aus: Zugeordnete Kategorien, Anzahl der Einträge, Anzahl der Kommentare und Anzahl der
Trackbacks. Dazu werden jeweils einfache IF"=Abfragen auf die entsprechenden
Variablen eingebunden. Fallweise kann die Darstellung der Kommentare als Popup
erfolgen, daher wird die zentrale Konfigurationsvariable \cmd{use\_pops} in
einige IF-Abfragen miteinbezogen. Falls der aktuelle Besucher ein eingeloggter
Redakteur ist, wird ihm zusätzlich in Zeile 67 ein Link zum Bearbeiten des 
Artikels angeboten. Die Zusatzvariable \ospsmarty{entry.add\_footer} enthält
zusätzliche HTML-Ausgaben, die von Ereignis-Plugins stammen.

RDF-Metadaten zur Verwendung für Trackbacks und Suchmaschinen werden in den Zeilen
73 bis 83 dargestellt. Nach diesem Abschnitt dient die Zusatzvariable
\ospsmarty{entry.plugin\_display\_dat} erneut dazu, weitere Ausgaben von
Ereignis-Plugins einzugliedern.

Ab Zeile 86 bis 117 wird bei der Detailansicht eines Artikels die Liste von
Trackbacks angezeigt. Innerhalb dieses Blocks werden von Zeile 87 bis 105 
etwaige Nachrichten eingebunden, falls ein Besucher gerade ein Trackback an die
Artikelseite gesendet hat. Die Liste der Trackbacks erfolgt in Zeile 115 mittels
Smarty-Funktion \cmd{\{serendipity\_printTrackbacks entry=\$en\-try.id\}}.

Zeile 119 bis 172 regelt ähnlich wie im vorausgehenden Block die Darstellung der
Kommentare. Hier wird in Zeile 124 bis 130 ein kleiner Auswahlbereich für den
Benutzer angezeigt, damit die Kommentare entweder verschachtelt oder
chronologisch sortiert dargestellt werden können. Abhängig von dieser Auswahl
erfolgt eine Einbindung der Kommentarliste mittels Smarty-Funktion
\cmd{\{serendipity\_printComments\}}. 

Zeile 134 bis 140 ermöglichen einem eingeloggten Redakteur, den Eintrag für
weitere Kommentare zu sperren oder wieder zu öffnen.

Ab Zeile 143 bis 162 werden Hinweise und Nachrichten für einen Besucher
angezeigt, der gerade einen Kommentar übermittelt hat. Entweder informieren diese
Hinweise über den Erfolg ober die Abweisung des Kommentars, jeweils abhängig
davon, ob Kommentare des Artikels moderiert werden, gesperrt sind oder
Anti-Spam-Maßnahmen zutrafen.

Das Kommentarformular selbst wird über die Variable \ospsmarty{COMMENTFORM} in
Zeile 165 bis 169 eingebunden.

Sollte das Array \ospsmarty{entries} einmal keine Artikel enthalten, wird eine
Information zur leeren Artikelliste in Zeile 177 bis 181 ausgegeben. Dieser
\cmd{else}-Fall der \cmd{foreach}-Schleife tritt beispielweise dann ein, wenn
eine Volltextsuche keine Ergebnisse ausliefert oder wenn man die Übersichtsseite
eines Monats aufruft, in dem kein Artikel verfasst wurde.
 
Im Anschluss an die beiden Schleifen zur Darstellung von Artikeln erfolgt in den
Zeilen 183 bis 197 die Einbindung eines Fußbereichs zum Vor- und Zurückblättern
etwaiger Archivseiten. Auch hier können sich in Zeile 196 etwaige
Ereignis-Plugins einbinden.

\index{Freie Eigenschaften}%
\section{Freie Eigenschaften von Artikeln}
\label{entryproperties-customprop}%

Grundsätzlich bietet Serendipity beim Erstellen eines Artikels nur die
Möglichkeit, die Textbereiche in \emph{Eintrag} und \emph{Erweiterten
Eintrag} aufzuteilen. Zusätzlich gibt es Plugins wie \emph{Textformatierung:
Eintragsdaten einfügen} (siehe Seite \pageref{includeentry}),
mit denen man andere Artikel referenzieren oder beliebige Blöcke
(beispielsweise mit Werbung) anhängen kann.

Eine generische und flexible Lösung für eigene Erweiterungen bietet das
Ereignis-Plugin \emph{Erweiterte Eigenschaften von Artikeln} (siehe Seite \pageref{entryproperties}).

Mithilfe dieses Plugins können Sie beliebig viele zusätzliche Eingabefelder zu
einem Artikel hinzufügen und später darstellen. Die Anwendungsmöglichkeiten sind
vielfältig: Fügen Sie einen Block mit Werbung hinzu, hängen Sie bestimmten
Artikeln Videos und Bilder an oder erfassen Sie die aktuelle Phase Ihres
persönlichen Mondkalenders.

Zwar könnten Sie solche Zusatzinformationen auch direkt in den normalen Eintrag
einfügen, würden aber dadurch möglicherweise (versehentlich) eine von Artikel 
zu Artikel unterschiedliche Formatierung oder Darstellungsweise erhalten;
oder Sie müssten ständig eine große Menge an Vorlage-Code in den Eintrag
übernehmen, damit die benötigten HTML"=Formatierungsanweisungen immer identisch
sind. 

\index{entryproperties}%
Die \emph{Freien Eigenschaften} (engl. \emph{entryproperties}) bieten den
Vorteil, dass Sie nur den rohen Text erfassen müssen und die Darstellung später
anhand Ihres Templates immer an exakt derselben Stelle erfolgt.

Als Beispiel setzen wir uns folgendes Ziel: Zu jedem unserer Artikel wollen wir
neben dem Text auch eine Youtube-Videodatei verlinken können und unsere
aktuelle Stimmung dokumentieren.


\subsection{Plugin installieren}

Die folgenden Schritte setzen voraus, dass Sie das Ereignis-Plugin \emph{Erweiterte
Eigenschaften von Artikeln} (siehe Seite \pageref{entryproperties})
installiert haben. Wenn dies nicht der Fall ist, richten Sie es im Backend
über \menu{Aussehen\sm Plugins verwalten\sm Hier klicken, um Ereignis-Plugin
zu installieren} ein.

\subsection{Freie Eigenschaften anlegen}

Als Erstes müssen Sie die beiden zusätzlichen Eigenschaftsfelder anlegen.
Gehen Sie dazu auf den Menüpunkt \menu{Aussehen\sm Plugins verwalten} und
suchen Sie in der Auflistung der Ereignis-Plugins das Plugin \emph{Erweiterte
Eigenschaften von Artikeln}; klicken Sie auf das Schraubstock-Symbol, um zur
Konfiguration zu gelagen.

Dort finden Sie die Option \menu{Freie Felder}. Hier kann man eine Liste von
Feldnamen eintragen, die zusätzlich angezeigt werden sollen. Dazu benötigt das
Plugin einen eindeutigen Namen pro Feld, diesen können Sie frei vergeben.
Er darf nur aus einem einzelnen Wort bestehen und keine Sonderzeichen oder Umlaute
enthalten. Für unser Beispiel tragen wir dort für zwei Felder \menu{Youtube,Stimmung} ein.
%FM@GH: ist sonst verwirrend, weil du schreibst: 'darf nur aus einem einzelnen Wort bestehen'

\subsection{Artikel erstellen}

Um die Einbindung der freien Felder zu testen, müssen Sie einen neuen Artikel
erstellen. Klicken Sie im Backend dazu auf \menu{Einträge\sm Neuer Eintrag}.
Dort finden Sie nach dem Eingabefeld für den \emph{Erweiterten Eintrag} einen
Bereich mit dem Titel \emph{Erweiterte Optionen}. In diesem Bereich finden Sie
nun einen Abschnitt \emph{Erweiterte Eigenschaften von Artikeln}. Dort bindet
das Plugin neben einigen weiteren Optionen nun zwei große Eingabefelder ein:
eines mit dem Titel \menu{Youtube} und eines mit dem Titel \menu{Stimmung}.

Dort können Sie nun für jeden Artikel einen beliebigen Code eintragen. Was Sie
in die Felder eintragen, ist Ihnen überlassen, jedoch sollten Sie darauf achten,
dort immer nur die \emph{Rohdaten} einzutragen. Alles, was sich bei jeder
Eingabe wiederholen würde (z.\,B.\ umgebende HTML-Formatierung wie eine 
Überschrift oder eine Trennlinie), gehört nicht an diese Stelle, sondern ins
Template. 

Da die Darstellung des Youtube-Videos später einiger HTML-Anweisungen bedarf,
trägt man in das Eingabefeld möglichst nur die Youtube-Video-ID (wie z.\,B.\
\cmd{2BpLGASxt0Q}) ein. Diese Video-ID kann man immer der URL einer Youtube-Seite
(\cmd{http://www.youtube.com/watch?v=2BpLGASxt0Q}) entnehmen.

Zusätzlich werden Sie sicher bemerken, dass neben dem Eingabefeld ein Link
\menu{Mediendatenbank} eingebunden wird. Wenn Sie auf diesen Link klicken,
öffnet sich das bekannte Popup zur Auswahl einer Datei in Ihrer Mediendatenbank
(siehe Seite \pageref{Mediendatenbank-Popup}).
Dort können Sie eine Datei auswählen, die Sie einbinden möchten. Daraufhin
erscheint der Dateiname der ausgewählten Datei innerhalb des Eingabefeldes und
kann somit später im Template z.\,B.\ als Downloadlink oder Bild ausgegeben werden,
ganz wie Sie es benötigen.

Speichern Sie einen Artikel mit ausgefülltem \menu{Youtube}- und
\menu{Stimmung}-Feld ab.

\subsection{Template anpassen}

Nachdem die Daten nun erfasst wurden und mit dem Artikel zusammen abgespeichert
sind, sollen diese natürlich auch in Ihrem Blog dargestellt werden.

Dafür müssen Sie nun die \cmd{entries.tpl}-Template-Datei Ihres Blogs in einem
Editor öffnen. Diese Datei enthält alle Anweisungen, die zur Darstellung eines
Eintrags verwendet werden.

Innerhalb dieser Datei (genaue Beschreibung siehe Seite \pageref{entries.tpl})
können Sie auf die freien Felder flexibel mittels Smarty-Syntax zugreifen. Um
Ihre aktuelle Stimmung direkt unterhalb des Artikeltexts darzustellen, suchen
Sie in der Datei nach einer Stelle, die ungefähr so aussieht:

\begin{ospcode}
\{if \$entry.is\_extended\}
    <div class="serendipity_entry_extended">
     <a id="extended"></a>
     \{\$entry.extended\}
    </div>
\{/if\}
\end{ospcode}

Diese Stelle sorgt üblicherweise einfach nur für die Ausgabe des
erweiterten Eintrags. Wenn Sie Ihre aktuelle Stimmung nur dann anzeigen
wollen, wenn ein Besucher die Detailansicht des Artikels aufruft, müssen Sie nun
ein Stück Smarty-Code \emph{innerhalb} der IF-Abfrage einfügen. Wenn Sie die
Stimmung auch bereits in der Artikelübersicht darstellen wollen, fügen Sie den
folgenden Smarty-Code \emph{nach} dem abschließenden \cmd{\{/if\}} ein:

\begin{ospcode}
<h5>Meine Stimmung:</h5>
<div class="mood">\{\$entry.properties.ep\_Stimmung\}</div>
\end{ospcode}

Die Ausgabe liefert also eine einfache Überschrift und gibt den Text, den Sie
im Artikel hinterlegt haben, innerhalb eines \cmd{<div>}-Feldes mit eigener
CSS-Klasse aus. 

Der Feldname \cmd{ep\_Stimmung} richtet sich dabei nach dem Namen, den Sie in
der Konfiguration des Plugins anfangs eingetragen haben. Er muss exakt mit der
gleichen Groß- und Kleinschreibung wie dort und mit einem 
vorangestellten \cmd{ep\_} aufgeführt werden.

Da die Inhalte dieser Daten immer im \ospsmarty{entry.properties}-Array landen,
müssen sie innerhalb dieses Arrays mit
\ospsmarty{entry.properties.ep\_""\cmdvar{Feldname}} innerhalb der Template-Datei
ausgegeben werden.

Als Zweites fügen Sie nun unterhalb der Darstellung Ihrer Stimmung den
Youtube-Codeschnipsel ein:

\begin{ospcode}
<h5>Youtube-Video</h5>
<div class="youtube">
<object width="425" height="355">
 <param 
   name='movie'
   value='http://www.youtube.com/v/\{\$entry.properties.ep\_Youtube\}'>
 </param>
 <param 
   name="wmode" 
   value="transparent"></param>
 <embed
   src='http://www.youtube.com/v/\{\$entry.properties.ep\_Youtube\}'
   type='application/x-shockwave-flash' 
   wmode='transparent' 
   width='425'
   height='355'></embed>
</object>
</div>
\end{ospcode}

Dieser Code ist direkt von der Youtube-Seite entnommen, lediglich die ID des
Videos wird ersetzt durch die Variable \ospsmarty{entry.properties.ep\_You\-tube}.

Speichern Sie das geänderte Template nun ab und rufen Sie Ihr Blog erneut auf. Sie
werden nun bei dem vorhin erfassten Artikel die Zusatzausgaben sehen.

\subsection{Weitere Prüfungen}

Da Ihre Eingaben nur an das Smarty-Array \ospsmarty{entry.properties}
durchgereicht werden, sind Sie in der Lage, damit weitaus mehr anzustellen, als
nur rohen Text auszugeben.

Sie können beispielsweise auch ein freies Feld wie \cmd{ArtikelAnzahl} anlegen und
dann mittels Smarty-Syntax eine Liste von aktuellen Artikeln des gleichen
Redakteurs holen und darstellen. Dadurch wird ein freies Feld soszusagen als
flexibler Parameter für beliebige Smarty-Funktionsaufrufe verwendet:

\begin{ospcode}
\{\$entry.body\}

<div>Weitere Artikel dieses Autoren:</div>
<div>
\{serendipity\_fetchPrintEntries viewAuthor=\$entry.authorid limit=\$entry.p
roperties.ep\_ArtikelAnzahl\}
</div>
\end{ospcode} 

Im vorigen Beispiel wurde die aktuelle Stimmung und das Youtube-Video immer
angezeigt, selbst wenn in Ihrem Artikel derartige Angaben gar nicht gemacht
wurden. Daher ist es sinnvoll, eine kleine zusätzliche Abfrage einzufügen. Diese
prüft, ob eine entsprechende Variable für den aktuellen Artikel überhaupt
gesetzt ist:

\begin{ospcode}
\{if \$entry.properties.ep\_Stimmung\}
  <h5>Meine Stimmung:</h5>
  <div class="mood">\{\$entry.properties.ep\_Stimmung\}</div>
\{/if\}
\end{ospcode}

\index{Smarty!Eigener PHP-Code}%
\section{Eigene Modifier, Funktionen oder Dateien einbinden}

Smarty ermöglicht es Ihnen nicht nur, auf vorgeschriebene Smarty"=Funktionen und
-Modifier zuzugreifen (siehe auch \cmd{http://smarty.php.net/}), sondern auch
eigene beliebig zu verwenden.

\index{Smarty!Security}%
Standardmäßig ist für Serendipity-Templates die \emph{Template-Security}
aktiviert. Dies heißt, dass Sie keine beliebigen PHP-Funktionen und keine
PHP-Include-Anweisungen in Ihre Templates einbauen dürfen. Dies dient als kleine
zusätzliche Barriere, damit beim Einsatz von Smarty-Markup Ihre Redakteure kein
Unheil auf dem Webserver anrichten können.

Für PHP-Entwickler ist aber genau dies gewünscht. Daher können Sie in der
\cmd{config.inc.php}-Konfigurationsdatei Ihres Templates sehr einfach mittels
der Zeile

\begin{ospcode}
<?php
\$serendipity['smarty']->security = false;
?>
\end{ospcode}

diese Sicherheitabfrage umgehen.

Weiterhin können Sie ganz eigene Smarty-Funktionen oder Smarty-Modifier
einfügen, wenn Sie diese benötigen.

Auch dazu müssen Sie die \cmd{config.inc.php}-Datei Ihres Templates anpassen
(oder erstellen, wenn sie noch nicht existiert). Dort können Sie eine Funktion
wie folgt deklarieren:

\begin{ospcode}
<?php
function zeigeFooter(\$params, \&\$smarty) \{
  if (\$params['lang']) \{
    return "Langer Footer";
  \} else \{
    return "Kurzer Footer";
  \}
\}

\$serendipity['smarty']->register\_function('zeigeFooter', 'zeigeFooter');
\end{ospcode}

Eine Smarty-Funktion muss demnach mittels \cmd{register\_function} einer
existierenden PHP-Funktion zugewiesen werden.\footnote{Siehe auch
\cmd{http://smarty.php.net/register\_function}} Diese PHP-Funktion\osplinebreak{} muss immer
zwei Funktionsparameter haben: \cmd{\$params} und \cmd{\$smarty}. Das Array
\cmd{\$params} enthält alle Funktionsparameter, wie sie in der Template-Datei via
\cmd{\{zeigeFooter parameter=\ldots lang=true \ldots\}} aufgerufen\osplinebreak{} wurden. Dabei
entspricht der Array-Schlüssel von \cmd{\$params} immer dem Parameternamen beim
Smarty-Aufruf. Das \cmd{\$smarty}-Objekt kann innerhalb der PHP-Funktion
selbstverständlich auch für erweiterte Zugriffe auf das Smarty-Framework
verwendet werden. Der Rückgabewert der Funktion enthält das, was später im
Smarty-Template zurückgeliefert wird (üblicherweise HTML-Code).

Die beispielhaft definierte Funktion \cmd{zeigeFooter} kann so verwendet werden,
um einen fest definierten Footer in Ihrer Template-Datei einzubinden.
Selbstverständlich könnte diese Funktion auch Datenbankabfragen ausführen oder
andere HTML-Dateien einbinden. 

Eine ähnliche Syntax gilt für die Festlegung eigener Smarty-Modifier:

\begin{ospcode}
<?php
function meinDatum(\$timestamp, \$kurz = false) \{
  if (\$kurz) \{
    return date('d.m.Y', \$timestamp);
  \} else \{
    return date('d.m.Y um H:i Uhr', \$timestamp);
  \}
\}

\$serendipity['smarty']->register\_modifier('meinDatum', 'meinDatum');
\end{ospcode}

Ein Modifier wie oben würde im Smarty-Template einen Aufruf wie

\begin{ospcode}
Artikeldatum: \{\$entry.timestamp|meinDatum:true\}
\end{ospcode}

ermöglichen. Der Unix-Zeitwert wird an die eigene Funktion \cmd{meinDatum}
weitergereicht. Der erste Parameter der PHP-Funktion entspricht dabei immer dem
Wert, der vor dem Modifier steht. Alle weiteren PHP"=Funktionsparameter
entsprechen der Liste von Parametern, die, mit Doppelpunkten getrennt, nach dem
Smarty-Modifier-Aufruf folgen.

Die PHP-Funktion \cmd{meinDatum} wertet \ospsmarty{entry.timestamp} aus und
liefert abhängig vom Parameter \cmd{kurz} entweder ein ausführlich oder kurz
formatiertes deutsches Datum zurück.

Beliebige PHP-Dateien können mittels Smarty-Funktion \cmd{include\_php}
eingebunden werden. Einen derartigen Aufruf können Sie z.\,B.\ in Ihrer
Datei \cmd{index.tpl} verwenden, um ein eigenes Counter-Script aufzurufen:

\begin{ospcode}
 <html>
 \ldots
 \{include\_php file="/var/www/example/counter.php"\}
\end{ospcode}

Alternativ können Sie einen Counter auch direkt über die
\cmd{config.inc.php}-Datei aufrufen. Dies ist in jedem Fall dann zu bevorzugen,
wenn Sie das Counter-Script auch dann ausführen wollen, wenn Serendipitity
eine andere Seite als die Übersicht darstellt. Dazu können Sie üblichen PHP-Code
verwenden:

\begin{ospcode}
<?php
include '/var/www/example/counter.php';
?>
\end{ospcode}

Achten Sie jedoch darauf, dass innerhalb der \cmd{config.inc.php} niemals
HTML-Ausgaben erfolgen dürfen. Sollte dies vorkommen, müssen Sie mittels PHP
Output Buffering\footnote{Siehe \cmd{http://www.php.net/ob\_start}} die HTML-Ausgaben in
einer Variable abfangen, an die Smarty-Template-Dateien weiterreichen und von
dort aus einbinden.

\cmd{config.inc.php}:
\begin{ospcode}
<?php
ob\_start();
include '/var/www/example/counter.php';
\$tmp = ob\_get\_contents();
ob\_end\_clean();
\$serendipity['smarty']->assign('counter\_code', \$tmp);
?>
\end{ospcode}

\cmd{index.tpl}:
\begin{ospcode}
<html>
 \ldots
 \{$counter\_code\}
\end{ospcode}

\index{Konfigurationsoptionen}%
\index{Eigene Einstellungen}%
\section{Konfigurationsoptionen, Eigene Einstellungen}

Die Konfigurationsoptionen von Serendipity (\menu{Administration\sm Konfiguration}
und \menu{Eigene Einstellungen}) werden über einfache PHP-Dateien gesteuert.
Darüber können Sie leicht eigene neue Konfigurationsoptionen hinzufügen,
die automatisch dargestellt und in der Datenbank gespeichert werden können.

Dies kann dazu verwendet werden, um Serendipity auf eigene Optionen anzupassen,
falls man diese Optionswerte in eigenen PHP-Dateien oder Plugins abfragen
möchte. Dabei müssen Sie jedoch beachten, dass die für die Konfiguration zuständigen
PHP-Dateien bei jedem Serendipity-Update überschrieben werden. Sie sollten
etwaige Anpassungen an dieser Datei also strikt protokollieren und nach einem
Update erneut einfügen.

\label{configlocal}
Die Datei \cmd{include/tpl/config\_personal.inc.php} stellt die Datenbasis für
die \menu{Eigenen Einstellungen} dar. In dieser Datei wird eine Variable
deklariert, die ein mehrdimensionales Array enthält. Die Datei wird vom
Serendipity-Kern ausgelesen, und die Darstellungsoptionen werden anhand des Inhalts
dieser Variable eingebunden.

Eine identische Struktur wird von der Datei
\cmd{include/tpl/config\_local.""inc.php} eingesetzt und dient der Darstellung
für die \menu{Konfiguration}.

Der Schlüsselname des Arrays der ersten Dimension gibt den Abschnittsnamen an.
Bei den \menu{Eigenen Einstellungen} gibt es zwei solche Abschnitte:
\menu{Persönliche Einstellungen} und \menu{Voreinstellungen für neue Einträge}.
Jeder Abschnitt kann für sich ein- und ausgeklappt werden. Weitere individuelle
Abschnitte können Sie daher über einen beliebigen Array-Schlüsselnamen
einbinden. 

Der Titel und die Beschreibung jedes Abschnitts wird in den
Array"=Schlüsseln \cmd{title} und \cmd{description} der zweiten Dimension 
festgelegt.

Der Array-Schlüssel \cmd{items} der zweiten Dimension legt ein weiteres Array
an, in dem alle Konfigurationsfelder enthalten sind. 

\label{apiconfigfield}
Pro Konfigurationsfeld wird ein Array mit folgenden Array-Schlüsseln festgelegt:

\begin{ospdescription}
\ospitem{\cmd{var}}
Legt den Variablennamen fest. Mit diesem Namen ist die Konfigurationsoption
später über \cmd{\$serendipity['\cmdvar{Variablenname}']} zugänglich und wird
mit demselben Namen in der Datenbanktabelle \cmd{seren\-dipity\_config}
abgespeichert. Der Variablenname darf keine Sonderzeichen oder Umlaute
enthalten. 

\ospitem{\cmd{title}}
Legt den dargestellten Titel der Konfigurationsoption fest (kann auf eine eigene
Sprachkonstante verweisen).

\ospitem{\cmd{description}}
Legt die Beschreibung der Konfigurationsoption fest (kann auf eine eigene
Sprachkonstante verweisen).

\ospitem{\cmd{type}}
Legt den Typ der Konfigurationsoption fest. Gültige Werte sind:

\begin{ospdescription}
\ospitem{\cmd{bool}}
Feld mit \emph{Ja/Nein}-Auswahlbox.

\ospitem{\cmd{protected}}
Geschütztes Eingabefeld, dessen Eingaben mit einem \cmd{*} maskiert werden (z.\,B.\
für Passwörter).

\ospitem{\cmd{multilist}}
Ein Mehrfach-Auswahlfeld.

\ospitem{\cmd{list}}
Ein Auswahlfeld (Dropdown).

\ospitem{\cmd{file}}
Ein Dateiauswahlfeld (Upload).

\ospitem{\cmd{textarea}}
Ein mehrzeiliges Texteingabefeld.

\ospitem{\cmd{string (Standard)}}
Ein einzeiliges Texteingabefeld.
\end{ospdescription}

\ospitem{\cmd{default}}
Legt den Standardwert der Option fest, wenn der Benutzer noch keine eigene
Auswahl getroffen hat. Bei Arrays, die ein Auswahlfeld anbieten, kann dieser Wert
ein Array mit sämtlichen möglichen Optionswerten enthalten. Dabei entspricht der
Array-Schlüssel jeweils dem Optionswert und der Array-Inhalt der Beschreibung
des Wertes.

\ospitem{\cmd{permission}}
Gibt den Namen eines Serendipity-Rechtes an, das ein Redakteur über die
Blog-Benutzergruppenzugehörigkeit besitzen muss, um die entsprechende
Konfigurationsoption ausfüllen zu dürfen. Üblicherweise prüft dieses Feld z.\,B.,
ob ein Benutzer der Admin-Gruppe zugehörig ist, um erweiterte Optionen ausfüllen
zu dürfen.

Dieses Feld kann entweder einen einzelnen Rechtenamen enthalten oder ein Array
mit mehreren Rechtenamen. Bei der Angabe mehrerer Rechtenamen muss der Benutzer
alle Rechte besitzen, um eine Option aufrufen zu können. Dies kann über den
Array-Schlüssel \cmd{perm\_mode} gesteuert werden -- enthält dieser den Wert
\cmd{or}, werden die Rechte mit einem logischen \emph{oder} abgefragt, so dass
der Benutzer nur eines der angegebenen Rechte besitzen muss.

\ospitem{\cmd{view}}
Wenn dieser Array-Schlüssel als Wert \cmd{dangerous} enthält, wird die
Konfigurationsoption nicht im Menübereich \menu{Eigene Einstellungen} angezeigt,
sondern nur, wenn das Redakteursprofil über den Bereich \menu{Administration\sm
Benutzerverwaltung} verändert wird. Dies dient dazu, damit sich Benutzer nicht
selbständig und unabsichtlich notwendige Rechte entziehen.

\ospitem{\cmd{flags}}
Kann ein Array mit einigen Zusatzoptionen enthalten, die bestimmen, wie eine
Konfigurationsoption gehandhabt wird. Folgende Flags werden unterstützt:

\begin{ospdescription}
\ospitem{\cmd{installOnly}}
Eine Konfigurationsoption wird nur bei der Installation angezeigt.

\ospitem{\cmd{hideValue}}
Der Wert der Konfigurationsoption wird nicht in der HTML-Ausgabe mitgeliefert,
so dass z.\,B.\ Passwörter nicht im Klartext (oder MD5-Hash) erscheinen.

\ospitem{\cmd{config}}
Ist dieses Flag gesetzt, wird das Rechtefeld in der
Serendipity-Konfigurationstabelle gespeichert. 

\ospitem{\cmd{local}}
Ist dieses Flag gesetzt, wird das Rechtefeld in der
Tabelle \cmd{seren\-dipity\_authors} gespeichert. Dabei wird vorausgesetzt, dass
der entsprechende Feldname als Spaltenname dieser Tabelle vorhanden ist.

\ospitem{\cmd{parseDescription}}
Falls gesetzt, werden spezielle Zeichenketten in der Beschreibung des
Konfigurationsfeldes durch einen Wert ersetzt. Derzeit wird nur die
Zeichenkette \cmd{\%clock\%} innerhalb einer Beschreibung durch die aktuelle
Uhrzeit ersetzt.

\ospitem{\cmd{probeDefault}}
Anstatt einen festen Standard vorzugeben, prüft Serendipity einige festgelegte
Felder (\cmd{dbType, rewrite}) auf gültige Standardwerte.

\ospitem{\cmd{ifEmpty}}
Falls gesetzt, wird der Standardwert für einen Konfigurationswert von
Serendipity speziell geprüft, falls der Benutzer noch keine eigene Option
festgelegt hat.

\ospitem{\cmd{nosave}}
Ist dieses Feld gesetzt, wird der Wert einer Konfigurationsoption nicht in der
Datenbank gespeichert. Dies ist üblicherweise der Fall bei
Datenbank-Zugangsvariablen, die ausschließlich in der Datei
\cmd{serendipity\_config\_local.inc.php} gespeichert werden.

\ospitem{\cmd{simpleInstall}}
Wenn dieses Flag gesetzt ist, wird eine Konfigurationsoption bei der
Installation nur dann angezeigt, wenn der Benutzer die \menu{Einfache
Installation} gewählt hat.

\end{ospdescription}

\end{ospdescription}

\ospvacat

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "serendipity"
